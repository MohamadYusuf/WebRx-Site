var wx;!function(a){"use strict";function b(a){return a||!d?new c:new WeakMap}var c=function(){function b(){this.inner={}}return b.prototype.set=function(b,c){var d=a.getOid(b);this.inner[d]=c},b.prototype.get=function(b){var c=a.getOid(b);return this.inner[c]},b.prototype.has=function(b){var c=a.getOid(b);return this.inner.hasOwnProperty(c)},b.prototype["delete"]=function(b){var c=a.getOid(b);return delete this.inner[c]},Object.defineProperty(b.prototype,"isEmulated",{get:function(){return!0},enumerable:!0,configurable:!0}),b}(),d="function"==typeof WeakMap;a.createWeakMap=b}(wx||(wx={}));var wx;!function(a){var b;!function(a){"use strict";a.injector="wx.injector",a.domManager="wx.domservice",a.router="wx.router",a.messageBus="wx.messageBus",a.expressionCompiler="wx.expressioncompiler",a.htmlTemplateEngine="wx.htmlTemplateEngine",a.hasValueBindingValue="has.wx.bindings.value",a.valueBindingValue="wx.bindings.value"}(b=a.res||(a.res={}))}(wx||(wx={}));var wx;!function(a){"use strict"}(wx||(wx={}));var wx;!function(a){"use strict"}(wx||(wx={}));var wx;!function(a){var b;!function(a){"use strict";var b=function(){function a(a,b){this.propertyName=b,this.sender=a}return a}();a.PropertyChangedEventArgs=b}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";function b(){return"undefined"==typeof this}function c(a){var b=typeof a;return"boolean"===b||"number"===b||"string"===b}function d(b){return null==b?!1:o(b,a.IID.IObservableProperty)}function e(b){return null==b?!1:b instanceof J.commandConstructor||o(b,a.IID.ICommand)}function f(b){return null==b?!1:b instanceof J.listConstructor||o(b,a.IID.IObservableList)}function g(a){return null==a?!1:Rx.helpers.isScheduler(a)}function h(a){return null==a?!1:a instanceof F}function i(a){return d(a)?a():a}function j(){return window&&window.jasmine&&void 0!==window.jasmine.version_?!0:window&&window.getJasmineRequireObj&&"function"==typeof window.getJasmineRequireObj?!0:!1}function k(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b}function l(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=/\{\d+\}/g;return a.replace(d,function(a){return b[a.match(/\d+/)]})}function m(a){return a.replace(/[ \t]+$/g,"").replace(/^[ \t]+/g,"")}function n(a,b,c){var d;if(c)for(d in a)b[d]=a[d];else for(var e=Object.getOwnPropertyNames(a),f=0;f<e.length;f++)d=e[f],b[d]=a[d];return b}function o(a,b){return p(a)?a.queryInterface(b):!1}function p(a){return void 0!==a&&null!==a&&"function"==typeof a.queryInterface}function q(a,b){return Object.keys(a).filter(function(c){var d=a[c];return o(d,b)}).map(function(b){return new I(b,a[b])})}function r(a){if(c(a))return typeof a+":"+a;var b=a[H];return void 0===b&&(b=(++G).toString(),a[H]=b),b}function s(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];if(c){var e,f,g,h=a.className.match(E)||[];if(b)for(f=0;f<c.length;f++)g=c[f],e=h.indexOf(g),-1===e&&h.push(g);else for(f=0;f<c.length;f++)g=c[f],e=h.indexOf(g),-1!==e&&h.splice(e,1);a.className=h.join(" ")}}function t(a){a.getBoundingClientRect()}function u(a){return"function"==typeof a||!1}function v(a){return u(a.dispose)}function w(a,b,c,d){var e={}.toString;if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;var f=e.call(a);if(f!==e.call(b))return!1;switch(f){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var g="[object Array]"===f;if(!g){if("object"!=typeof a||"object"!=typeof b)return!1;var h=a.constructor,i=b.constructor;if(h!==i&&!(u(h)&&h instanceof h&&u(i)&&i instanceof i)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var j=c.length;j--;)if(c[j]===a)return d[j]===b;if(c.push(a),d.push(b),g){if(j=a.length,j!==b.length)return!1;for(;j--;)if(!w(a[j],b[j],c,d))return!1}else{var k,l=Object.keys(a);if(j=l.length,Object.keys(b).length!==j)return!1;for(;j--;)if(k=l[j],!b.hasOwnProperty(k)||!w(a[k],b[k],c,d))return!1}return c.pop(),d.pop(),!0}function x(a){for(var b=a.length,c=new Array(b),d=0;b>d;d++)c[d]=a[d].cloneNode(!0);return c}function y(a){return Array.prototype.slice.call(a)}function z(a){return y(a.childNodes)}function A(a,b){if(!a)throw new Error("disp");if(!b)throw new Error("action");try{b(a)}finally{a.dispose()}}function B(a){return u(require)||J.throwError("there's no AMD-module loader available (Hint: did you forget to include RequireJS in your project?)"),Rx.Observable.create(function(b){try{require([a],function(a){b.onNext(a),b.onCompleted()},function(a){b.onError(a)})}catch(c){b.onError(c)}return Rx.Disposable.empty})}function C(b,c){void 0===c&&(c=!1);var d=o(b,a.IID.IHandleObservableErrors)?b.thrownExceptions:a.app.defaultExceptionHandler;return Rx.Observable.create(function(e){var f=new Rx.CompositeDisposable,g=q(b,a.IID.IObservableProperty);return g.forEach(function(a){var b=a.property,g=c?b.changing:b.changed;f.add(g.subscribe(function(b){var c=new J.PropertyChangedEventArgs(self,a.propertyName);try{e.onNext(c)}catch(f){d.onNext(f)}}))}),f}).publish().refCount()}function D(){if(2===arguments.length)return arguments[0].changed.startWith(arguments[0]()).select(arguments[1]);var a=k(arguments),b=a.pop();return a=a.map(function(a){return a.changed.startWith(a())}),a.push(b),Rx.Observable.combineLatest.apply(this,a)}var E=/\S+/g,F=Rx.Observable;a.noop=function(){},a.isStrictMode=b,a.isPrimitive=c,a.isProperty=d,a.isCommand=e,a.isList=f,a.isRxScheduler=g,a.isRxObservable=h,a.unwrapProperty=i,a.isInUnitTest=j,a.args2Array=k,a.formatString=l,a.trimString=m,a.extend=n;var G=1,H="__rxui_oid__"+(new Date).getTime(),I=function(){function a(a,b){this.property=b,this.propertyName=a}return a}();a.PropertyInfo=I,a.queryInterface=o,a.supportsQueryInterface=p,a.getOwnPropertiesImplementingInterface=q,a.getOid=r,a.toggleCssClass=s,a.triggerReflow=t,a.isFunction=u,a.isDisposable=v,a.isEqual=w,a.cloneNodeArray=x,a.nodeListToArray=y,a.nodeChildrenToArray=z,a.using=A,a.observableRequire=B,a.observeObject=C,a.whenAny=D;var J;!function(b){function c(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d="WebRx: "+l(a,b);throw new Error(d)}function d(b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];var e="WebRx: "+l(b,c);a.app.defaultExceptionHandler.onNext(Error(e))}b.throwError=c,b.emitError=d}(J=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b=function(){function b(){this.registrations={}}return b.prototype.register=function(){var b,c=arguments[0],d=arguments[1],e=arguments[2];if(this.registrations.hasOwnProperty(c)&&a.internal.throwError("'{0}' is already registered",c),a.isFunction(d))b=function(a,b){return d.apply(null,a)};else if(Array.isArray(d)){var f=this,g=d.pop(),h=d;b=function(b,d){var e=h.map(function(b){try{return f.get(b,void 0,d)}catch(e){a.internal.throwError("Error resolving dependency '{0}' for '{1}': {2}",b,c,e)}}),i=[null].concat(e).concat(b),j=g.bind.apply(g,i);return new j}}else b=function(a,b){return d};return this.registrations[c]={factory:b,isSingleton:e},this},b.prototype.get=function(b,c,d){d=d||{},d.hasOwnProperty(b)&&a.internal.throwError("Detected circular dependency a from '{0}' to '{1}'",Object.keys(d).join(", "),b);var e=this.registrations[b];if(void 0===e&&a.internal.throwError("'{0}' is not registered",b),e.isSingleton&&e.value)return e.value;var f={};f[b]=!0,a.extend(d,f);var g=e.factory(c,f);return e.isSingleton&&(e.value=g),g},b.prototype.resolve=function(b,c){var d=b.pop();a.isFunction(d)||a.internal.throwError("Error resolving inline-annotated-array. Constructor must be of type 'function' but is '{0}",typeof d);var e=this,f=b.map(function(c){try{return e.get(c,void 0,b)}catch(f){a.internal.throwError("Error resolving dependency '{0}' for '{1}': {2}",c,Object.getPrototypeOf(d),f)}}),g=[null].concat(f).concat(c),h=d.bind.apply(d,g);return new h},b}();a.injector=new b,a.injector.register(a.res.injector,function(){return new b})}(wx||(wx={}));var wx;!function(a){"use strict";function b(a){return a||!e?new d:new Set}function c(a){var b=new Array;return a.forEach(function(a){return b.push(a)}),b}var d=function(){function b(){this.values=[],this.keys={}}return b.prototype.add=function(b){var c=a.getOid(b);return this.keys[c]||(this.values.push(b),this.keys[c]=!0),this},b.prototype["delete"]=function(b){var c=a.getOid(b);if(this.keys[c]){var d=this.values.indexOf(b);return this.values.splice(d,1),delete this.keys[c],!0}return!1},b.prototype.has=function(b){var c=a.getOid(b);return this.keys.hasOwnProperty(c)},b.prototype.clear=function(){this.keys={},this.values.length=0},b.prototype.forEach=function(a,b){this.values.forEach(a,b)},Object.defineProperty(b.prototype,"size",{get:function(){return this.values.length},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isEmulated",{get:function(){return!0},enumerable:!0,configurable:!0}),b}(),e="function"==typeof Set&&Set.prototype.hasOwnProperty("forEach")&&Set.prototype.hasOwnProperty("add")&&Set.prototype.hasOwnProperty("clear")&&Set.prototype.hasOwnProperty("delete")&&Set.prototype.hasOwnProperty("has");a.createSet=b,a.setToArray=c}(wx||(wx={}));var wx;!function(a){var b;!function(b){"use strict";var c=window,d=c.navigator.userAgent;b.ie,b.opera,b.safari,b.firefox;var e=function(a){return a?parseFloat(a[1]):void 0};c.opera&&c.opera.version&&(b.opera={version:parseInt(c.opera.version())});var f=document&&function(){for(var a=3,b=document.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",c[0];);return a>4?a:void 0}();if(f&&(b.ie={version:f},10>f)){var g=a.createWeakMap();b.ie.getSelectionChangeObservable=function(a){var b=a.ownerDocument,c=g.get(b);return c?c:(c=Rx.Observable.defer(function(){return Rx.Observable.fromEvent(b,"selectionchange")}).select(function(a){return b}).publish().refCount(),g.set(b,c),c)}}f=e(d.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),f&&(b.safari={version:f}),f=e(d.match(/Firefox\/([^ ]*)/)),f&&(b.firefox={version:f});var h="function"==typeof Array.isArray&&"function"==typeof[].forEach&&"function"==typeof[].map&&"function"==typeof[].some&&"function"==typeof[].indexOf&&"function"==typeof Object.keys&&"function"==typeof Object.defineProperty;b.isSupported=!b.ie||b.ie.version>=9||!b.safari||b.safari.version>=5||(!b.firefox||b.firefox.version>=5)&&h,b.jQueryInstance=window.jQuery,b.cleanExternalData=b.jQueryInstance&&"function"==typeof b.jQueryInstance.cleanData?function(a){b.jQueryInstance.cleanData([a])}:function(a){}}(b=a.env||(a.env={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b=function(){function a(){}return a.IUnknown="IUnknown",a.IDisposable="IDisposable",a.IObservableProperty="IObservableProperty",a.IReactiveNotifyPropertyChanged="IReactiveNotifyPropertyChanged",a.IHandleObservableErrors="IHandleObservableErrors",a.IObservableList="IObservableList",a.IList="IList",a.IReactiveNotifyCollectionChanged="IReactiveNotifyCollectionChanged",a.IReactiveNotifyCollectionItemChanged="IReactiveNotifyCollectionItemChanged",a.IReactiveDerivedList="IReactiveDerivedList",a.IMoveInfo="IMoveInfo",a.IObservedChange="IObservedChange",a.ICommand="ICommand",a.IReadOnlyList="IReadOnlyList",a}();a.IID=b}(wx||(wx={}));var wx;!function(a){"use strict";function b(b){var c=function(a){return arguments.length>0?void(a!==c.value&&(c.changingSubject.onNext(a),c.value=a,c.changedSubject.onNext(a))):c.value};return c.queryInterface=function(b){return b===a.IID.IUnknown||b===a.IID.IObservableProperty||b===a.IID.IDisposable?!0:!1},c.dispose=function(){},void 0!==b&&(c.value=b),c.changedSubject=new Rx.Subject,c.changed=c.changedSubject.publish().refCount(),c.changingSubject=new Rx.Subject,c.changing=c.changingSubject.publish().refCount(),c}a.property=b}(wx||(wx={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},wx;!function(a){"use strict";function b(b,c){return g[b]=c,a}function c(b){var c,d=g[b],f=void 0;if(null!=d)if(Array.isArray(d))c=new e(b),a.injector.resolve(d,c),f=Rx.Observable["return"](c);else if(a.isFunction(d))c=new e(b),d(c),f=Rx.Observable["return"](c);else{var h=d;h.instance?f=Rx.Observable["return"](h.instance):(c=new e(b),h.resolve?(a.injector.get(h.resolve,c),f=Rx.Observable["return"](c)):h.require&&(f=a.observableRequire(h.require)["do"](function(a){return a(c)}).select(function(a){return c})))}else f=Rx.Observable["return"](void 0);return f.take(1)["do"](function(a){return g[b]={instance:a}})}var d,e=function(){function b(a){this.bindings={},this.components={},this.expressionFilters={},this.animations={},this.name=a}return b.prototype.merge=function(b){var c=b;return a.extend(c.components,this.components),a.extend(c.bindings,this.bindings),a.extend(c.expressionFilters,this.expressionFilters),a.extend(c.animations,this.animations),this},b.prototype.component=function(a,b){return this.components[a]=b,this},b.prototype.hasComponent=function(a){return null!=this.components[a]},b.prototype.loadComponent=function(a,b){return this.initializeComponent(this.instantiateComponent(a),b)},b.prototype.binding=function(){var b,c=this,d=a.args2Array(arguments),e=d.shift();return 0===d.length?(b=this.bindings[e],"string"==typeof b&&(b=a.injector.get(b),this.bindings[e]=b),b):(b=d.shift(),Array.isArray(e)?e.forEach(function(a){return c.bindings[a]=b}):this.bindings[e]=b,this)},b.prototype.filter=function(){var b,c=a.args2Array(arguments),d=c.shift();return 0===c.length?(b=this.expressionFilters[d],"string"==typeof b&&(b=a.injector.get(b),this.bindings[d]=b),b):(b=c.shift(),this.expressionFilters[d]=b,this)},b.prototype.filters=function(){return this.expressionFilters},b.prototype.animation=function(){var b,c=a.args2Array(arguments),d=c.shift();return 0===c.length?(b=this.animations[d],"string"==typeof b&&(b=a.injector.get(b),this.bindings[d]=b),b):(b=c.shift(),this.animations[d]=b,this)},b.prototype.instantiateComponent=function(b){var c=this,d=this.components[b],e=void 0;if(null!=d)if(d.instance)e=Rx.Observable["return"](d.instance);else if(d.template)e=Rx.Observable["return"](d);else if(d.resolve){var f=a.injector.get(d.resolve);e=Rx.Observable["return"](f)}else d.require&&(e=a.observableRequire(d.require));else e=Rx.Observable["return"](void 0);return e["do"](function(a){return c.components[b].instance=a})},b.prototype.initializeComponent=function(b,c){var d=this;return b.take(1).selectMany(function(b){return null==b?Rx.Observable["return"](void 0):b.viewModel?Rx.Observable.combineLatest(d.loadComponentTemplate(b.template,c),d.loadComponentViewModel(b.viewModel,c),function(d,e){return a.isFunction(e)&&(e=new e(c)),{template:d,viewModel:e,preBindingInit:b.preBindingInit,postBindingInit:b.postBindingInit}}):d.loadComponentTemplate(b.template,c).select(function(a){return{template:a,preBindingInit:b.preBindingInit,postBindingInit:b.postBindingInit}})}).take(1)},b.prototype.loadComponentTemplate=function(b,c){var e,f;if(a.isFunction(b))return e=b(c),"string"==typeof e&&(e=a.app.templateEngine.parse(b(c))),Rx.Observable["return"](e);if("string"==typeof b)return e=a.app.templateEngine.parse(b),Rx.Observable["return"](e);if(Array.isArray(b))return Rx.Observable["return"](b);if("object"==typeof b){var g=b;if(g.resolve)return e=a.injector.get(g.resolve),Rx.Observable["return"](e);if(g.promise){var h=g.promise;return Rx.Observable.fromPromise(h)}if(g.require)return a.observableRequire(g.require).select(function(b){return a.app.templateEngine.parse(b)});if(g.element)return"string"==typeof g.element?(f=document.getElementById(g.element)||document.querySelector(g.element),e=null!=f?a.app.templateEngine.parse(f.innerHTML):[],Rx.Observable["return"](e)):(f=g.element,e=null!=f?a.app.templateEngine.parse(f.innerHTML):[],Rx.Observable["return"](e))}d.throwError("invalid template descriptor")},b.prototype.loadComponentViewModel=function(b,c){var e;if(a.isFunction(b))return Rx.Observable["return"](b);if(Array.isArray(b))return e=a.injector.resolve(b,c),Rx.Observable["return"](e);if("object"==typeof b){var f=b;if(f.resolve)return e=a.injector.get(f.resolve,c),Rx.Observable["return"](e);if(f.promise){var g=f.promise;return Rx.Observable.fromPromise(g)}if(f.require)return a.observableRequire(f.require);if(f.instance)return Rx.Observable["return"](f.instance)}d.throwError("invalid view-model descriptor")},b}(),f=function(b){function c(){b.call(this,"app"),this.defaultExceptionHandler=Rx.Observer.create(function(b){a.isInUnitTest()||a.log.error("An onError occurred on an object (usually a computedProperty) that would break a binding or command. To prevent this, subscribe to the thrownExceptions property of your objects: {0}",b)}),this.title=a.property(),this.history=a.isInUnitTest()?createMockHistory():this.createHistory()}return __extends(c,b),Object.defineProperty(c.prototype,"mainThreadScheduler",{get:function(){return this._unitTestMainThreadScheduler||this._mainThreadScheduler||Rx.Scheduler.currentThread},set:function(b){a.isInUnitTest()?(this._unitTestMainThreadScheduler=b,this._mainThreadScheduler=this._mainThreadScheduler||b):this._mainThreadScheduler=b},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"templateEngine",{get:function(){return this._templateEngine||(this._templateEngine=a.injector.get(a.res.htmlTemplateEngine)),this._templateEngine},set:function(a){this._templateEngine=a},enumerable:!0,configurable:!0}),c.prototype.createHistory=function(){var a={back:window.history.back.bind(window.history),forward:window.history.forward.bind(window.history),pushState:window.history.pushState.bind(window.history),replaceState:window.history.replaceState.bind(window.history)};return Object.defineProperty(a,"length",{get:function(){return window.history.length},enumerable:!0,configurable:!0}),Object.defineProperty(a,"state",{get:function(){return window.history.state},enumerable:!0,configurable:!0}),Object.defineProperty(a,"location",{get:function(){return window.location},enumerable:!0,configurable:!0}),a.onPopState=Rx.Observable.fromEventPattern(function(a){return window.addEventListener("popstate",a)},function(a){return window.removeEventListener("popstate",a)}).publish().refCount(),a},c}(e);!function(a){a.moduleConstructor=e}(d=a.internal||(a.internal={})),a.app=new f;var g={app:{instance:a.app}};a.module=b,a.loadModule=c}(wx||(wx={}));var wx;!function(a){"use strict";function b(b,c){a.injector.get(a.res.domManager).applyBindings(b,c||window.document.documentElement)}function c(b){a.injector.get(a.res.domManager).cleanNode(b)}var d,e=function(){function b(b){this.expressionCache={},this.dataContextExtensions=a.createSet(),this.parserOptions={disallowFunctionCalls:!0},this.nodeState=a.createWeakMap(),this.compiler=b}return b.prototype.applyBindings=function(a,b){(void 0===b||1!==b.nodeType)&&d.throwError("first parameter should be your model, second parameter should be a DOM node!"),this.isNodeBound(b)&&d.throwError("an element must not be bound multiple times!");var c=this.getNodeState(b);c?c.model=a:(c=this.createNodeState(a),this.setNodeState(b,c));var e=this.getDataContext(b);this.applyBindingsRecursive(e,b)},b.prototype.applyBindingsToDescendants=function(a,b){if(b.hasChildNodes())for(var c=0;c<b.childNodes.length;c++){var d=b.childNodes[c];1===d.nodeType&&this.applyBindingsRecursive(a,d)}},b.prototype.cleanNode=function(a){1===a.nodeType&&this.cleanNodeRecursive(a)},b.prototype.cleanDescendants=function(a){if(a.hasChildNodes())for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];1===a.nodeType&&this.clearNodeState(c)}},b.prototype.getObjectLiteralTokens=function(b){return b=a.trimString(b),""!==b&&this.isObjectLiteralString(b)?this.compiler.parseObjectLiteral(b):[]},b.prototype.compileBindingOptions=function(b,c){if(b=a.trimString(b),""===b)return null;if(this.isObjectLiteralString(b)){for(var d,e={},f=this.compiler.parseObjectLiteral(b),g=0;g<f.length;g++)d=f[g],e[d.key]=this.compileBindingOptions(d.value,c);return e}var h=a.extend(this.parserOptions,{});return h.filters={},a.extend(a.app.filters(),h.filters),c&&a.extend(c.filters(),h.filters),this.compiler.compileExpression(b,h,this.expressionCache)},b.prototype.getModuleContext=function(b){for(var c;b;){if(c=this.getNodeState(b),null!=c&&null!=c.module)return c.module;b=b.parentNode}return a.app},b.prototype.registerDataContextExtension=function(a){this.dataContextExtensions.add(a)},b.prototype.getDataContext=function(a){for(var b=[],c=this.getNodeState(a),d=a;d;)c=null!=c?c:this.getNodeState(d),null!=c&&null!=c.model&&b.push(c.model),c=null,d=d.parentNode;var e;return e=b.length>0?{$data:b[0],$root:b[b.length-1],$parent:b.length>1?b[1]:null,$parents:b.slice(1)}:{$data:null,$root:null,$parent:null,$parents:[]},this.dataContextExtensions.forEach(function(b){return b(a,e)}),e},b.prototype.createNodeState=function(a,b){return{cleanup:new Rx.CompositeDisposable,model:a,module:b,isBound:!1}},b.prototype.isNodeBound=function(a){var b=this.nodeState.get(a);return b&&b.isBound},b.prototype.setNodeState=function(a,b){this.nodeState.set(a,b)},b.prototype.getNodeState=function(a){return this.nodeState.get(a)},b.prototype.clearNodeState=function(b){var c=this.nodeState.get(b);c&&(null!=c.cleanup&&(c.cleanup.dispose(),c.cleanup=void 0),null!=c.model&&(c.model=void 0),null!=c.module&&(c.module=void 0)),this.nodeState["delete"](b),a.env.cleanExternalData(b)},b.prototype.evaluateExpression=function(a,b){var c=this.createLocals(void 0,b),d=a(b.$data,c);return d},b.prototype.expressionToObservable=function(b,c,d){var e,f,g=this,h=a.createSet();try{e=this.createLocals(h,c),f=b(c.$data,e),d&&d.onNext(!0)}catch(i){return a.app.defaultExceptionHandler.onNext(i),Rx.Observable["return"](void 0)}if(0===h.size)return a.isRxObservable(f)?f:Rx.Observable["return"](f);var j=Rx.Observable.create(function(i){var j=Rx.Observable.defer(function(){return Rx.Observable.merge(a.setToArray(h)).take(1)}).repeat().subscribe(function(j){try{h.clear(),e=g.createLocals(h,c),f=b(c.$data,e),i.onNext(a.isRxObservable(f)?f:Rx.Observable["return"](f)),d&&d.onNext(!0)}catch(k){a.app.defaultExceptionHandler.onNext(k)}});return j}),k=a.isRxObservable(f)?f:Rx.Observable["return"](f);return j.startWith(k).concatAll().publish().refCount()},b.prototype.applyBindingsInternal=function(c,e,f){var g=!1,h=this.getNodeState(e);h?h.isBound&&d.throwError("an element must not be bound multiple times!"):(h=this.createNodeState(),this.setNodeState(e,h));var i,j,k=e.tagName.toLowerCase();if(f.hasComponent(k)||a.app.hasComponent(k)){var l,m=e.getAttribute(b.paramsAttributename);l=m?"{ name: '"+k+"', params: {"+e.getAttribute(b.paramsAttributename)+"} }":"{ name: '"+k+"' }",i=[{key:"component",value:l}]}else i=this.getBindingDefinitions(e);if(null!=i&&i.length>0){var n=i.map(function(b){var c=f.binding(b.key)||a.app.binding(b.key);return c||d.throwError("binding '{0}' has not been registered.",b.key),{handler:c,value:b.value}});n.sort(function(a,b){return(b.handler.priority||0)-(a.handler.priority||0)});var o=n.filter(function(a){return a.handler.controlsDescendants}).map(function(a){return"'"+a.value+"'"});for(o.length>1&&d.throwError("bindings {0} are competing for descendants of target element!",o.join(", ")),g=o.length>0,j=0;j<n.length;j++){var p=n[j],q=p.handler;q.applyBinding(e,p.value,c,h,f)}}return h.isBound=!0,g},b.prototype.isObjectLiteralString=function(a){return"{"===a[0]&&"}"===a[a.length-1]},b.prototype.getBindingDefinitions=function(c){var d=null;if(1===c.nodeType){var e=c.getAttribute(b.bindingAttributeName);e&&(d=e)}return d&&(d=a.trimString(d)),d?this.compiler.parseObjectLiteral(d):null},b.prototype.applyBindingsRecursive=function(a,b,c){if(c=c||this.getModuleContext(b),!this.applyBindingsInternal(a,b,c)&&b.hasChildNodes()){var d=this.getNodeState(b);d&&d.module&&(c=d.module);for(var e=0;e<b.childNodes.length;e++){var f=b.childNodes[e];1===f.nodeType&&this.applyBindingsRecursive(a,f,c)}}},b.prototype.cleanNodeRecursive=function(a){if(a.hasChildNodes())for(var b=a.childNodes.length,c=0;b>c;c++){var d=a.childNodes[c];1===a.nodeType&&this.cleanNodeRecursive(d)}this.clearNodeState(a)},b.prototype.createLocals=function(b,c){var d,e,f,g,h={},i={readFieldHook:function(c,d){var e=!1;if("@"===d[0]&&(e=!0,d=d.substring(1)),f=c[d],!e&&a.isProperty(f)){var g=f;b&&b.add(g.changed),f=g()}return f},writeFieldHook:function(c,d,e){if("@"===d[0]&&(d=d.substring(1)),g=c[d],a.isProperty(g)){var f=g;b&&b.add(f.changed),f(e)}else c[d]=e;return e},readIndexHook:function(c,e){if(a.queryInterface(c,a.IID.IObservableList)?(d=c,f=d.get(e),b&&b.add(d.listChanged)):f=c[e],a.queryInterface(f,a.IID.IObservableProperty)){var g=f;b&&b.add(g.changed),f=g()}return f},writeIndexHook:function(c,f,h){return a.queryInterface(c,a.IID.IObservableList)?(d=c,g=d.get(f),b&&b.add(d.listChanged),a.isProperty(g)?(e=g,b&&b.add(e.changed),e(h)):d.set(f,h)):a.isProperty(c[f])?(e=g[f],b&&b.add(e.changed),e(h)):c[f]=h,h}};this.compiler.setRuntimeHooks(h,i);for(var j=Object.keys(c),k=j.length,l=0;k>l;l++){var m=j[l];h[m]=c[m]}return h},b.bindingAttributeName="data-bind",b.paramsAttributename="params",b}();!function(a){a.domManagerConstructor=e}(d=a.internal||(a.internal={})),a.applyBindings=b,a.cleanNode=c}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=0,this.domManager=a}return c.prototype.applyBinding=function(c,d,e,f,g){function h(){p&&(p.dispose(),p=null)}function i(a){k.checked=a}var j=this;1!==c.nodeType&&b.throwError("checked-binding only operates on elements!"),null==d&&b.throwError("invalid binding-options!");var k=c,l=k.tagName.toLowerCase(),m="checkbox"===k.type,n="radio"===k.type;("input"!==l||!m&&!n)&&b.throwError("checked-binding only operates on checkboxes and radio-buttons");var o,p,q=this.domManager.compileBindingOptions(d,g);f.cleanup.add(this.domManager.expressionToObservable(q,e).subscribe(function(b){try{if(a.isProperty(b)){if(h(),p=new Rx.CompositeDisposable,o=b,p.add(o.changed.subscribe(function(a){i(a)})),i(o()),!o.source){var c=j.getCheckedEventObservables(k);p.add(Rx.Observable.merge(c).subscribe(function(a){o(k.checked)}))}}else i(b)}catch(d){a.app.defaultExceptionHandler.onNext(d)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,k=null,h()}))},c.prototype.configure=function(a){},c.prototype.getCheckedEventObservables=function(a){var b=[];return b.push(Rx.Observable.fromEvent(a,"click")),b.push(Rx.Observable.fromEvent(a,"change")),b},c}();!function(a){a.checkedBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=0,this.domManager=a}return c.prototype.applyBinding=function(c,d,e,f,g){function h(){l&&(l.dispose(),l=null)}1!==c.nodeType&&b.throwError("command-binding only operates on elements!"),null==d&&b.throwError("invalid binding-options!");var i,j,k,l,m=this.domManager.compileBindingOptions(d,g),n=c,o="a"===n.tagName.toLowerCase();if("function"==typeof m)i=m,j=this.domManager.expressionToObservable(i,e);else{var p=m;i=p.command,j=this.domManager.expressionToObservable(i,e),p.parameter&&(i=p.parameter,k=this.domManager.expressionToObservable(i,e))}null==k&&(k=Rx.Observable["return"](void 0)),f.cleanup.add(Rx.Observable.combineLatest(j,k,function(a,b){return{cmd:a,param:b}}).subscribe(function(c){try{h(),l=new Rx.CompositeDisposable,null!=c.cmd&&(a.isCommand(c.cmd)||b.throwError("Command-Binding only supports binding to a command!"),n.disabled=!c.cmd.canExecute(c.param),l.add(c.cmd.canExecuteObservable.subscribe(function(a){n.disabled=!a})),l.add(Rx.Observable.fromEvent(n,"click").subscribe(function(a){c.cmd.execute(c.param),o&&a.preventDefault()})))}catch(d){a.app.defaultExceptionHandler.onNext(d)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,n=null,h()}))},c.prototype.configure=function(a){},c}();!function(a){a.commandBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=100,this.controlsDescendants=!0,this.domManager=a}return c.prototype.applyBinding=function(c,d,e,f,g){function h(){i&&(i.dispose(),i=null)}1!==c.nodeType&&b.throwError("module-binding only operates on elements!"),null==d&&b.throwError("invalid binding-options!");var i,j=c,k=this,l=this.domManager.compileBindingOptions(d,g),m=this.domManager.expressionToObservable(l,e),n=!0,o=new Array;f.cleanup.add(m.subscribe(function(c){try{h(),i=new Rx.CompositeDisposable;var d,l=a.unwrapProperty(c),m=void 0;if(l&&(l=a.trimString(l),d=l.split(" ").filter(function(a){return a})),d.length>0){var p=d.map(function(b){return a.loadModule(b)});m=Rx.Observable.combineLatest(p,function(b){return a.args2Array(arguments)}).subscribe(function(c){var h=(g||a.app).name+"+"+d.join("+"),i=new b.moduleConstructor(h);i.merge(g||a.app),c.forEach(function(a){return i.merge(a)}),k.applyValue(j,i,o,e,f,n),n=!1}),null!=m&&i.add(m)}}catch(q){a.app.defaultExceptionHandler.onNext(q)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,m=null,k=null}))},c.prototype.configure=function(a){},c.prototype.applyValue=function(a,b,c,d,e,f){var g;if(f)for(g=0;g<a.childNodes.length;g++)c.push(a.childNodes[g].cloneNode(!0));for(e.module=b,this.domManager.cleanDescendants(a);a.firstChild;)a.removeChild(a.firstChild);for(g=0;g<c.length;g++){var h=c[g].cloneNode(!0);a.appendChild(h)}this.domManager.applyBindingsToDescendants(d,a)},c}();!function(a){a.moduleBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=30,this.controlsDescendants=!0,this.domManager=a}return c.prototype.applyBinding=function(c,d,e,f,g){function h(){l&&(l.dispose(),l=null)}var i=this;1!==c.nodeType&&b.throwError("component-binding only operates on elements!"),null==d&&b.throwError("invalid binding-options!");var j,k,l,m=c,n=this.domManager.compileBindingOptions(d,g),o=n,p={};"function"==typeof n?(j=n,k=this.domManager.expressionToObservable(j,e)):(k=this.domManager.expressionToObservable(o.name,e),o.params&&(a.isFunction(o.params)?p=this.domManager.evaluateExpression(o.params,e):"object"==typeof o.params?Object.keys(o.params).forEach(function(a){p[a]=i.domManager.evaluateExpression(o.params[a],e)}):b.throwError("invalid component-params")));for(var q=new Array;m.firstChild;)q.push(m.removeChild(m.firstChild));f.cleanup.add(k.subscribe(function(c){try{h(),l=new Rx.CompositeDisposable;var d=void 0,j=void 0;g&&g.hasComponent(c)&&(d=g.loadComponent(c,p)),null==d&&a.app.hasComponent(c)&&(d=a.app.loadComponent(c,p)),null==d&&b.throwError("component '{0}' is not registered with current module-context",c),j=d.subscribe(function(b){null!=j&&(j.dispose(),j=void 0),b.viewModel&&a.isDisposable(b.viewModel)&&l.add(b.viewModel),i.applyTemplate(b,m,e,f,b.template,b.viewModel)}),null!=j&&l.add(j)}catch(k){a.app.defaultExceptionHandler.onNext(k)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,q=null,n=null,h()}))},c.prototype.configure=function(a){},c.prototype.applyTemplate=function(a,b,c,d,e,f){for(;b.firstChild;)this.domManager.cleanNode(b.firstChild),b.removeChild(b.firstChild);for(var g=0;g<e.length;g++){var h=e[g].cloneNode(!0);b.appendChild(h)}f&&(d.model=f,c=this.domManager.getDataContext(b)),f&&a.preBindingInit&&f.hasOwnProperty(a.preBindingInit)&&f[a.preBindingInit].call(f,b),this.domManager.applyBindingsToDescendants(c,b),f&&a.postBindingInit&&f.hasOwnProperty(a.postBindingInit)&&f[a.postBindingInit].call(f,b)},c}();!function(a){a.componentBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=0,this.domManager=a}return c.prototype.applyBinding=function(c,d,e,f,g){var h=this;1!==c.nodeType&&b.throwError("event-binding only operates on elements!"),
null==d&&b.throwError("invalid binding-options!");for(var i=c,j=this.domManager.getObjectLiteralTokens(d),k={},l=j.map(function(a){var b=h.domManager.compileBindingOptions(a.value,g);return h.domManager.expressionToObservable(b,e)}),m=0;m<j.length;m++)!function(b){f.cleanup.add(l[b].subscribe(function(c){try{var d=j[b].key;if(k[d]&&k[d].dispose(),c=a.unwrapProperty(c),"function"==typeof c)k[d]=Rx.Observable.fromEvent(i,d).subscribe(function(a){c.apply(e.$data,[e,a])});else{var f=c;k[d]=Rx.Observable.fromEvent(i,d).subscribe(f)}}catch(g){a.app.defaultExceptionHandler.onNext(g)}}))}(m);f.cleanup.add(Rx.Disposable.create(function(){Object.keys(k).forEach(function(a){k[a]&&k[a].dispose()})})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,i=null,k=null,l=null}))},c.prototype.configure=function(a){},c}();!function(a){a.eventBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){var b;!function(a){"use strict";var b=function(){function a(a,b,c,d){if(this.childNodes=[],this.targetNode=a,this.insertCB=c,this.removeCB=d,b)for(var e=0;e<a.childNodes.length;e++)this.childNodes.push(a.childNodes[e])}return a.prototype.appendChilds=function(a,b){var c,d=a.length;for(a.length>1?Array.prototype.push.apply(this.childNodes,a):this.childNodes.push(a[0]),c=0;d>c;c++)this.targetNode.appendChild(a[c]);if(this.insertCB)for(c=0;d>c;c++)this.insertCB(a[c],b)},a.prototype.insertChilds=function(a,b,c){if(a===this.childNodes.length)this.appendChilds(b,c);else{var d,e=this.childNodes[a],f=b.length;for(Array.prototype.splice.apply(this.childNodes,[a,0].concat(b)),d=0;f>d;d++)this.targetNode.insertBefore(b[d],e);if(this.insertCB)for(d=0;f>d;d++)this.insertCB(b[d],c)}},a.prototype.removeChilds=function(a,b,c){var d;if(0===b)return[];var e=this.childNodes.slice(a,a+b);if(this.childNodes.splice(a,b),!c)for(var f=e.length,g=0;f>g;g++)d=e[g],this.removeCB&&this.removeCB(d),this.targetNode.removeChild(d);return e},a.prototype.clear=function(){for(var a,b=this.childNodes.length,c=0;b>c;c++)a=this.childNodes[c],this.removeCB&&this.removeCB(a),this.targetNode.removeChild(a);this.childNodes=[]},a}();a.VirtualChildNodes=b}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b=function(){function a(a,b){void 0===b&&(b=1),this.inner=a,this.refCount=b}return a.prototype.addRef=function(){this.refCount++},a.prototype.release=function(){return 0===--this.refCount&&(this.inner.dispose(),this.inner=null),this.refCount},a.prototype.dispose=function(){this.release()},a}();a.RefCountDisposeWrapper=b}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=40,this.controlsDescendants=!0,this.domManager=a,a.registerDataContextExtension(function(b,c){var d=a.getNodeState(b);c.$index=d.index})}return c.prototype.applyBinding=function(c,d,e,f,g){1!==c.nodeType&&b.throwError("forEach binding only operates on elements!"),null==d&&b.throwError("** invalid binding options!");var h,i,j,k=this.domManager.compileBindingOptions(d,g),l=c,m=this,n=!0,o=null,p={};if("object"==typeof k&&k.hasOwnProperty("data")){var q=k;i=q.data,q.itemEnter&&(p.itemEnter=this.domManager.evaluateExpression(q.itemEnter,e),"string"==typeof p.itemEnter&&(p.itemEnter=g.animation(p.itemEnter))),q.itemLeave&&(p.itemLeave=this.domManager.evaluateExpression(q.itemLeave,e),"string"==typeof p.itemLeave&&(p.itemLeave=g.animation(p.itemLeave))),q.hooks&&(h=this.domManager.evaluateExpression(q.hooks,e)),"string"==typeof h&&(h=a.injector.get(h)),q.debug&&q.debug.setProxyFunc&&(j=this.domManager.evaluateExpression(q.debug.setProxyFunc,e))}else i=k;var r=this.domManager.expressionToObservable(i,e);f.cleanup.add(Rx.Disposable.create(function(){o&&(o.dispose(),o=null)}));var s=new Array;f.cleanup.add(r.subscribe(function(b){try{o&&o.dispose(),o=new Rx.CompositeDisposable,m.applyValue(l,b,h,p,s,e,n,o,j),n=!1}catch(c){a.app.defaultExceptionHandler.onNext(c)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,r=null,l=null,m=null,s=null,h=null}))},c.prototype.configure=function(a){},c.prototype.createIndexPropertyForNode=function(a,b,c,d,e){return Rx.Observable.defer(function(){return Rx.Observable.create(function(c){return d.subscribe(function(d){var f=a.childNodes.indexOf(b);f/=e,c.onNext(f)})})}).toProperty(c)},c.prototype.appendAllRows=function(a,b,c,d,e,f,g,h){for(var i=b.length(),j=0;i>j;j++)this.appendRow(a,j,b.get(j),c,d,e,f,g,h)},c.prototype.appendRow=function(b,c,d,e,f,g,h,i,j){var k=a.cloneNodeArray(f),l=c,m=h.itemEnter,n={item:d};if(i&&(l=this.createIndexPropertyForNode(b,k[0],c,i,f.length),n.indexDisp=new a.RefCountDisposeWrapper(l,0)),n.index=l,null!=m&&m.prepare(k),b.appendChilds(k,n),g&&(g.afterRender&&g.afterRender(k,d),!j&&g.afterAdd&&g.afterAdd(k,d,c)),m)var o=m.run(k).continueWith(function(){return m.complete(k)}).subscribe(function(a){null!=o&&o.dispose()})},c.prototype.insertRow=function(b,c,d,e,f,g,h,i){var j=f.length,k=h.itemEnter,l=a.cloneNodeArray(f),m=this.createIndexPropertyForNode(b,l[0],c,i,f.length);if(null!=k&&k.prepare(l),b.insertChilds(c*j,l,{index:m,item:d,indexDisp:new a.RefCountDisposeWrapper(m,0)}),g&&(g.afterRender&&g.afterRender(l,d),g.afterAdd&&g.afterAdd(l,d,c)),k)var n=k.run(l).continueWith(function(){return k.complete(l)}).subscribe(function(a){null!=n&&n.dispose()})},c.prototype.removeRow=function(a,b,c,d,e,f){function g(){for(var a=0;h>a;a++)i.removeChild(j[a])}var h=d.length,i=a.targetNode,j=a.removeChilds(b*h,h,!0),k=f.itemLeave;if(e&&e.beforeRemove)e.beforeRemove(j,c,b);else if(null!=k){k.prepare(j);var l=k.run(j).continueWith(function(){return k.complete(j)}).continueWith(g).subscribe(function(a){null!=l&&l.dispose()})}else g()},c.prototype.moveRow=function(b,c,d,e,f,g,h,i){function j(){for(var a=0;m>a;a++)n.removeChild(o[a])}function k(){o=a.cloneNodeArray(f);var h=s.createIndexPropertyForNode(b,o[0],c,i,f.length);null!=q&&q.prepare(o),b.insertChilds(m*d,o,{index:h,item:e,indexDisp:new a.RefCountDisposeWrapper(h,0)}),g&&g.afterMove&&g.afterMove(o,e,c)}var l,m=f.length,n=b.targetNode,o=b.removeChilds(c*m,m,!0),p=h.itemLeave,q=h.itemEnter,r=[],s=this;g&&g.beforeMove&&g.beforeMove(o,e,c),p?(p.prepare(o),l=p.run(o).continueWith(function(){return p.complete(o)}).continueWith(j)):l=Rx.Observable.startDeferred(j),r.push(l),l=Rx.Observable.startDeferred(k),q&&(l=l.continueWith(q.run(o)).continueWith(function(){return q.complete(o)})),r.push(l),r.length>1?l=Rx.Observable.combineLatest(r,a.noop).take(1):1===r.length&&(l=r[0].take(1));var t=l.subscribe(function(a){null!=t&&t.dispose()})},c.prototype.rebindRow=function(b,c,d,e,f){for(var g=e.length,h=this.createIndexPropertyForNode(b,b.childNodes[c*g],c,f,e.length),i=new a.RefCountDisposeWrapper(h,0),j=0;j<e.length;j++){var k=b.childNodes[c*g+j];if(1===k.nodeType){this.domManager.cleanNode(k);var l=this.domManager.createNodeState(d);l.index=h,i.addRef(),l.cleanup.add(i),this.domManager.setNodeState(k,l),this.domManager.applyBindings(d,k)}}},c.prototype.observeList=function(a,b,c,d,e,f,g,h){var i,j,k=this;d.add(h),this.appendAllRows(a,e,b,c,f,g,h,!0),d.add(e.itemsAdded.subscribe(function(d){if(j=d.items.length,d.from===e.length())for(i=0;j>i;i++)k.appendRow(a,i+d.from,d.items[i],b,c,f,g,h,!1);else for(i=0;i<d.items.length;i++)k.insertRow(a,i+d.from,d.items[i],b,c,f,g,h);h.onNext(!0)})),d.add(e.itemsRemoved.subscribe(function(b){for(j=b.items.length,i=0;j>i;i++)k.removeRow(a,i+b.from,b.items[i],c,f,g);h.onNext(!0)})),d.add(e.itemsMoved.subscribe(function(b){k.moveRow(a,b.from,b.to,b.items[0],c,f,g,h),h.onNext(!0)})),d.add(e.itemReplaced.subscribe(function(b){k.rebindRow(a,b.from,b.items[0],c,h),h.onNext(!0)})),d.add(e.shouldReset.subscribe(function(d){a.clear(),k.appendAllRows(a,e,b,c,f,g,h,!1),h.onNext(!0)}))},c.prototype.applyValue=function(c,d,e,f,g,h,i,j,k){function l(a,b){var c=b.item,d=b.index,e=b.indexDisp;if(1===a.nodeType){var f=r.domManager.getNodeState(a)||r.domManager.createNodeState();f.model=c,f.index=d,r.domManager.setNodeState(a,f),null!=q&&null!=e&&(e.addRef(),f.cleanup.add(e)),r.domManager.applyBindings(c,a)}}function m(a){1===a.nodeType&&r.domManager.cleanNode(a)}var n,o;if(i)for(o=c.childNodes.length,n=0;o>n;n++)g.push(c.childNodes[n].cloneNode(!0));for(;c.firstChild;)c.removeChild(c.firstChild);if(0!==g.length){var p,q,r=this;if(p=new b.VirtualChildNodes(c,!1,l,m),k&&k(p),j.add(Rx.Disposable.create(function(){p=null})),Array.isArray(d)){var s=d;for(o=s.length,n=0;o>n;n++)this.appendRow(p,n,s[n],h,g,e,f,void 0,!0)}else if(a.isList(d)){var t=d;q=new Rx.Subject,this.observeList(p,h,g,j,t,e,f,q)}}},c}();!function(a){a.forEachBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=-1,this.domManager=a}return c.prototype.applyBinding=function(c,d,e,f,g){function h(){m&&(m.dispose(),m=null)}function i(a){var b=n.ownerDocument;if("activeElement"in b){var c;try{c=b.activeElement}catch(d){c=b.body}a=c===n}l(a)}function j(a){a?"none"!==n.style.display?n.focus():Rx.Scheduler.currentThread.schedule(function(){n.focus()}):n.blur()}var k=this;1!==c.nodeType&&b.throwError("hasFocus-binding only operates on elements!"),null==d&&b.throwError("invalid binding-options!");var l,m,n=c,o=this.domManager.compileBindingOptions(d,g);f.cleanup.add(this.domManager.expressionToObservable(o,e).subscribe(function(b){try{a.isProperty(b)?(h(),m=new Rx.CompositeDisposable,l=b,m.add(l.changed.subscribe(function(a){j(a)})),j(l()),l.source||m.add(Rx.Observable.merge(k.getFocusEventObservables(n)).subscribe(function(a){i(a)}))):j(b)}catch(c){a.app.defaultExceptionHandler.onNext(c)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,n=null,h()}))},c.prototype.configure=function(a){},c.prototype.getFocusEventObservables=function(a){var b=[];return b.push(Rx.Observable.fromEvent(a,"focus").select(function(a){return!0})),b.push(Rx.Observable.fromEvent(a,"focusin").select(function(a){return!0})),b.push(Rx.Observable.fromEvent(a,"blur").select(function(a){return!1})),b.push(Rx.Observable.fromEvent(a,"focusout").select(function(a){return!1})),b},c}();!function(a){a.hasFocusBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=50,this.controlsDescendants=!0,this.inverse=!1,this.domManager=a}return c.prototype.applyBinding=function(c,d,e,f,g){1!==c.nodeType&&b.throwError("if-binding only operates on elements!"),null==d&&b.throwError("invalid binding-options!");var h=c,i=this,j=!0,k=this.domManager.compileBindingOptions(d,g),l=this.domManager.expressionToObservable(k,e),m=new Array;f.cleanup.add(l.subscribe(function(b){try{i.applyValue(h,a.unwrapProperty(b),m,e,j),j=!1}catch(c){a.app.defaultExceptionHandler.onNext(c)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,l=null,h=null,i=null,m=null}))},c.prototype.configure=function(a){},c.prototype.applyValue=function(a,b,c,d,e){var f;if(e){for(f=0;f<a.childNodes.length;f++)c.push(a.childNodes[f].cloneNode(!0));for(;a.firstChild;)a.removeChild(a.firstChild)}if(b=this.inverse?!b:b){for(f=0;f<c.length;f++){var g=c[f].cloneNode(!0);a.appendChild(g)}this.domManager.applyBindingsToDescendants(d,a)}else for(this.domManager.cleanDescendants(a);a.firstChild;)a.removeChild(a.firstChild)},c}(),d=function(a){function b(b){a.call(this,b),this.inverse=!0}return __extends(b,a),b}(c);!function(a){a.ifBindingConstructor=c,a.notifBindingConstructor=d}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=0,this.domManager=a}return c.prototype.applyBinding=function(a,c,d,e,f){1!==a.nodeType&&b.throwError("binding only operates on elements!");var g=this.domManager.compileBindingOptions(c,f);(null==g||"object"!=typeof g)&&b.throwError("invalid binding-options!");var h,i,j,k,l=a,m=new Array,n=Object.keys(g);for(j=0;j<n.length;j++){k=n[j];var o=g[k];i=o,h=this.domManager.expressionToObservable(i,d),m.push([k,h])}for(j=0;j<m.length;j++)k=m[j][0],h=m[j][1],this.subscribe(l,h,k,e);e.cleanup.add(Rx.Disposable.create(function(){a=null,c=null,d=null,e=null,l=null,n=null,m=null}))},c.prototype.configure=function(a){},c.prototype.subscribe=function(b,c,d,e){var f=this;e.cleanup.add(c.subscribe(function(c){try{f.applyValue(b,a.unwrapProperty(c),d)}catch(e){a.app.defaultExceptionHandler.onNext(e)}}))},c.prototype.applyValue=function(a,c,d){b.throwError("you need to override this method!")},c}(),d=function(b){function c(a){b.call(this,a)}return __extends(c,b),c.prototype.applyValue=function(b,c,d){a.toggleCssClass(b,!!c,d)},c}(c),e=function(a){function b(b){a.call(this,b),this.priority=5}return __extends(b,a),b.prototype.applyValue=function(a,b,c){var d=b===!1||null===b||void 0===b;d?a.removeAttribute(c):a.setAttribute(c,b.toString())},b}(c),f=function(a){function b(b){a.call(this,b)}return __extends(b,a),b.prototype.applyValue=function(a,b,c){(null===b||void 0===b||b===!1)&&(b=""),a.style[c]=b},b}(c);!function(a){a.cssBindingConstructor=d,a.attrBindingConstructor=e,a.styleBindingConstructor=f}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=new Array,d=function(){function c(a){this.domManager=a}return c.prototype.supports=function(b,c){return"input"===b.tagName.toLowerCase()&&"radio"===b.getAttribute("type")&&!a.isList(c)},c.prototype.observeElement=function(a){return Rx.Observable.merge(Rx.Observable.fromEvent(a,"click"),Rx.Observable.fromEvent(a,"change"))},c.prototype.observeModel=function(b){if(a.isProperty(b)){var c=b;return c.changed}return Rx.Observable.never()},c.prototype.updateElement=function(c,d){var e=c;e.checked=b.getNodeValue(e,this.domManager)==a.unwrapProperty(d)},c.prototype.updateModel=function(a,c,d){var e=a;e.checked&&c(b.getNodeValue(e,this.domManager))},c}(),e=function(){function c(a){this.domManager=a}return c.prototype.supports=function(b,c){return"select"===b.tagName.toLowerCase()&&!a.isList(c)},c.prototype.observeElement=function(a){return Rx.Observable.fromEvent(a,"change")},c.prototype.observeModel=function(b){if(a.isProperty(b)){var c=b;return c.changed}return Rx.Observable.never()},c.prototype.updateElement=function(c,d){var e=c,f=a.unwrapProperty(d),g=e.options.length;if(null==f)e.selectedIndex=-1;else for(var h=0;g>h;h++){var i=e.options[h];if(b.getNodeValue(i,this.domManager)==f){e.selectedIndex=h;break}}},c.prototype.updateModel=function(a,c,d){var e=a,f=-1!==e.selectedIndex?b.getNodeValue(e.options[e.selectedIndex],this.domManager):void 0;c(f)},c}(),f=function(){function f(a){this.priority=0,this.domManager=a,c.push(new d(a)),c.push(new e(a))}return f.prototype.applyBinding=function(d,e,f,g,h){function i(){k&&(k.dispose(),k=null)}1!==d.nodeType&&b.throwError("selectedValue-binding only operates on elements!"),null==e&&b.throwError("invalid binding-options!");var j,k,l=d,m=this.domManager.compileBindingOptions(e,h);g.cleanup.add(this.domManager.expressionToObservable(m,f).subscribe(function(d){try{i(),j=void 0;for(var e=0;e<c.length;e++)if(c[e].supports(l,d)){j=c[e];break}j||b.throwError("selectedValue-binding does not support this combination of bound element and model!"),k=new Rx.CompositeDisposable,j.updateElement(l,d),k.add(j.observeModel(d).subscribe(function(b){try{j.updateElement(l,d)}catch(c){a.app.defaultExceptionHandler.onNext(c)}})),a.isProperty(d)&&k.add(j.observeElement(l).subscribe(function(b){try{j.updateModel(l,d,b)}catch(b){a.app.defaultExceptionHandler.onNext(b)}}))}catch(f){a.app.defaultExceptionHandler.onNext(f)}})),g.cleanup.add(Rx.Disposable.create(function(){d=null,e=null,f=null,g=null,l=null,i()}))},f.prototype.configure=function(a){},f}();!function(a){a.selectedValueBindingConstructor=f}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=0,this.domManager=a}return c.prototype.applyBinding=function(c,d,e,f,g){1!==c.nodeType&&b.throwError("binding only operates on elements!"),null==d&&b.throwError("invalid binding-options!");var h=c,i=this,j=this.domManager.compileBindingOptions(d,g),k=this.domManager.expressionToObservable(j,e);f.cleanup.add(k.subscribe(function(b){try{i.applyValue(h,a.unwrapProperty(b))}catch(c){a.app.defaultExceptionHandler.onNext(c)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,h=null,k=null,i=null}))},c.prototype.configure=function(a){},c.prototype.applyValue=function(a,c){b.throwError("you need to override this method!")},c}(),d=function(a){function b(b){a.call(this,b)}return __extends(b,a),b.prototype.applyValue=function(a,b){(null===b||void 0===b)&&(b=""),a.textContent=b},b}(c),e=function(b){function c(a){b.call(this,a),this.inverse=!1,this.inverse=!1,this.priority=10}return __extends(c,b),c.prototype.configure=function(a){var b=a;c.useCssClass=b.useCssClass,c.hiddenClass=b.hiddenClass},c.prototype.applyValue=function(b,d){d=this.inverse?!d:d,c.useCssClass?a.toggleCssClass(b,!d,c.hiddenClass):b.style.display=d?"":"none"},c}(c),f=function(a){function b(b){a.call(this,b),this.inverse=!0}return __extends(b,a),b}(e),g=function(a){function b(b){a.call(this,b)}return __extends(b,a),b.prototype.applyValue=function(a,b){(null===b||void 0===b)&&(b=""),a.innerHTML=b},b}(c),h=function(a){function b(b){a.call(this,b),this.inverse=!1,this.inverse=!1}return __extends(b,a),b.prototype.applyValue=function(a,b){b=this.inverse?!b:b,a.disabled=b},b}(c),i=function(a){function b(b){a.call(this,b),this.inverse=!0}return __extends(b,a),b}(h);!function(a){a.textBindingConstructor=d,a.htmlBindingConstructor=g,a.visibleBindingConstructor=e,a.hiddenBindingConstructor=f,a.disableBindingConstructor=h,a.enableBindingConstructor=i}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=0,this.domManager=a}return c.prototype.applyBinding=function(c,d,e,f,g){function h(a){(null===a||void 0===a)&&(a=""),k.value!==a&&(q=a,k.value=a)}function i(){o&&(o.dispose(),o=null),p&&(p.dispose(),p=null)}var j=this;1!==c.nodeType&&b.throwError("textInput-binding only operates on elements!"),null==d&&b.throwError("invalid binding-options!");var k=c,l=k.tagName.toLowerCase(),m="textarea"===l;"input"!==l&&"textarea"!==l&&b.throwError("textInput-binding can only be applied to input or textarea elements");var n,o,p,q,r=this.domManager.compileBindingOptions(d,g);f.cleanup.add(this.domManager.expressionToObservable(r,e).subscribe(function(b){try{if(a.isProperty(b)){if(i(),n=b,o=n.changed.subscribe(function(a){h(a)}),h(n()),!n.source){var c=j.getTextInputEventObservables(k,m);p=Rx.Observable.merge(c).subscribe(function(a){n(k.value)})}}else h(b)}catch(d){a.app.defaultExceptionHandler.onNext(d)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,k=null,i()}))},c.prototype.configure=function(a){},c.prototype.getTextInputEventObservables=function(b,c){var d=[];return a.env.ie&&a.env.ie.version<10?a.env.ie.version<=9&&(d.push(a.env.ie.getSelectionChangeObservable(b).where(function(a){return a.activeElement===b})),d.push(Rx.Observable.fromEvent(b,"dragend")),d.push(Rx.Observable.fromEvent(b,"input")),d.push(Rx.Observable.fromEvent(b,"propertychange").where(function(a){return"value"===a.propertyName}))):(d.push(Rx.Observable.fromEvent(b,"input")),a.env.safari&&a.env.safari.version<5&&c?(d.push(Rx.Observable.fromEvent(b,"keydown")),d.push(Rx.Observable.fromEvent(b,"paste")),d.push(Rx.Observable.fromEvent(b,"cut"))):a.env.opera&&a.env.opera.version<11?d.push(Rx.Observable.fromEvent(b,"keydown")):a.env.firefox&&a.env.firefox.version<4&&(d.push(Rx.Observable.fromEvent(b,"DOMAutoComplete")),d.push(Rx.Observable.fromEvent(b,"dragdrop")),d.push(Rx.Observable.fromEvent(b,"drop")))),d.push(Rx.Observable.fromEvent(b,"change")),d},c}();!function(a){a.textInputBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=5,this.domManager=a}return c.prototype.applyBinding=function(c,d,e,f,g){function h(){n&&(n.dispose(),n=null)}function i(a,c){o?b.setNodeValue(k,c,a):((null===c||void 0===c)&&(c=""),k.value=c)}var j=this;1!==c.nodeType&&b.throwError("value-binding only operates on elements!"),null==d&&b.throwError("invalid binding-options!");var k=c,l=k.tagName.toLowerCase();"input"!==l&&"option"!==l&&"select"!==l&&"textarea"!==l&&b.throwError("value-binding only operates on checkboxes and radio-buttons");var m,n,o="input"===l&&"radio"===k.type||"option"===l,p=this.domManager.compileBindingOptions(d,g);f.cleanup.add(this.domManager.expressionToObservable(p,e).subscribe(function(c){try{a.isProperty(c)?(h(),n=new Rx.CompositeDisposable,m=c,n.add(m.changed.subscribe(function(a){i(j.domManager,a)})),i(j.domManager,m()),m.source||n.add(Rx.Observable.fromEvent(k,"change").subscribe(function(a){m(o?b.getNodeValue(k,j.domManager):k.value)}))):i(j.domManager,c)}catch(d){a.app.defaultExceptionHandler.onNext(d)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,k=null,h()}))},c.prototype.configure=function(a){},c}();!function(b){function c(b,c){var d=c.getNodeState(b);return null!=d&&d[a.res.hasValueBindingValue]?d[a.res.valueBindingValue]:b.value}function d(b,c,d){(null===c||void 0===c)&&(c="");var e=d.getNodeState(b);"string"==typeof c?b.value!==c&&(b.value=c,null!=e&&e[a.res.hasValueBindingValue]&&(e[a.res.hasValueBindingValue]=!1,e[a.res.valueBindingValue]=void 0)):(null==e&&(e=this.createNodeState(),this.setNodeState(b,e)),e[a.res.valueBindingValue]=c,e[a.res.hasValueBindingValue]=!0)}b.getNodeValue=c,b.setNodeValue=d}(b=a.internal||(a.internal={}));var b;!function(a){a.valueBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a){this.priority=50,this.controlsDescendants=!0,this.domManager=a}return c.prototype.applyBinding=function(c,d,e,f,g){1!==c.nodeType&&b.throwError("with-binding only operates on elements!"),null==d&&b.throwError("invalid binding-options!");var h=c,i=this,j=this.domManager.compileBindingOptions(d,g),k=this.domManager.expressionToObservable(j,e);f.cleanup.add(k.subscribe(function(b){try{i.applyValue(h,a.unwrapProperty(b),f)}catch(c){a.app.defaultExceptionHandler.onNext(c)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,k=null,h=null,i=null}))},c.prototype.configure=function(a){},c.prototype.applyValue=function(a,b,c){c.model=b;var d=this.domManager.getDataContext(a);this.domManager.cleanDescendants(a),this.domManager.applyBindingsToDescendants(d,a)},c}();!function(a){a.withBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b=function(){function a(a){this.createValue=a}return Object.defineProperty(a.prototype,"value",{get:function(){return this.isValueCreated||(this.createdValue=this.createValue(),this.isValueCreated=!0),this.createdValue},enumerable:!0,configurable:!0}),a}();a.Lazy=b}(wx||(wx={}));var wx;!function(a){var b;!function(b){"use strict";function c(b,c,e){var f=new d(b,c,e),g=a.extend(f,new Rx.Subject,!0);return g}var d=function(){function b(a,b,c){this._observerRefCount=0,this._defaultObserverSub=Rx.Disposable.empty,this._scheduler=a,this._defaultObserver=b,this._subject=c||new Rx.Subject,null!=b&&(this._defaultObserverSub=this._subject.observeOn(this._scheduler).subscribe(this._defaultObserver))}return b.prototype.dispose=function(){a.isDisposable(this._subject)&&this._subject.dispose()},b.prototype.onCompleted=function(){this._subject.onCompleted()},b.prototype.onError=function(a){this._subject.onError(a)},b.prototype.onNext=function(a){this._subject.onNext(a)},b.prototype.subscribe=function(a){var b=this;return this._defaultObserverSub&&this._defaultObserverSub.dispose(),this._observerRefCount++,new Rx.CompositeDisposable(this._subject.observeOn(this._scheduler).subscribe(a),Rx.Disposable.create(function(){--b._observerRefCount<=0&&null!=b._defaultObserver&&(b._defaultObserverSub=b._subject.observeOn(b._scheduler).subscribe(b._defaultObserver))}))},b}();b.createScheduledSubject=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b=Rx.Observable;b.prototype.toProperty=function(b,c){c=c||Rx.Scheduler.currentThread;var d=function(b){return arguments.length>0&&a.internal.throwError("attempt to write to a read-only observable property"),null==d.sub&&(d.sub=d._source.connect()),d.value};d.queryInterface=function(b){return b===a.IID.IUnknown||b===a.IID.IObservableProperty||b===a.IID.IDisposable?!0:!1},d.dispose=function(){d.sub&&(d.sub.dispose(),d.sub=null)},d.value=b,d.changedSubject=new Rx.Subject,d.changed=d.changedSubject.publish().refCount(),d.changingSubject=new Rx.Subject,d.changing=d.changingSubject.publish().refCount(),d.source=this,d.thrownExceptions=a.internal.createScheduledSubject(c,a.app.defaultExceptionHandler);var e=!1;return d.sub=this.distinctUntilChanged().subscribe(function(a){e&&a===d.value||(e=!0,d.changingSubject.onNext(a),d.value=a,d.changedSubject.onNext(a))},function(a){return d.thrownExceptions.onNext(a)}),d},b.prototype.continueWith=function(){var b=a.args2Array(arguments),c=b.shift(),d=void 0;if(a.isRxObservable(c))d=c;else if(a.isFunction(c)){var e=c;d=Rx.Observable.startDeferred(e)}return this.selectMany(function(a){return d})},b.startDeferred=function(a){return Rx.Observable.defer(function(){return Rx.Observable.create(function(b){var c=!1;return c||a(),b.onNext(void 0),b.onCompleted(),Rx.Disposable.create(function(){return c=!0})})})}}(wx||(wx={}));var wx;!function(a){"use strict";function b(a,b,c){return void 0===b&&(b=.3),void 0===c&&(c=null),new d(a,b,c)}var c,d=function(){function b(a,b,c){void 0===b&&(b=.3),void 0===c&&(c=null),this.push=this.add,this.changeNotificationsSuppressed=0,this.propertyChangeWatchers=null,this.resetChangeThreshold=0,this.resetSubCount=0,this.hasWhinedAboutNoResetSub=!1,this.setupRx(a,b,c)}return b.prototype.queryInterface=function(b){return b===a.IID.IUnknown||b===a.IID.IDisposable||b===a.IID.IObservableList||b===a.IID.IReadOnlyList||b===a.IID.IList?!0:!1},b.prototype.dispose=function(){this.clearAllPropertyChangeWatchers()},Object.defineProperty(b.prototype,"isReadOnly",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"itemsAdded",{get:function(){return this._itemsAdded||(this._itemsAdded=this.itemsAddedSubject.value.asObservable()),this._itemsAdded},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"beforeItemsAdded",{get:function(){return this._beforeItemsAdded||(this._beforeItemsAdded=this.beforeItemsAddedSubject.value.asObservable()),this._beforeItemsAdded},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"itemsRemoved",{get:function(){return this._itemsRemoved||(this._itemsRemoved=this.itemsRemovedSubject.value.asObservable()),this._itemsRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"beforeItemsRemoved",{get:function(){return this._beforeItemsRemoved||(this._beforeItemsRemoved=this.beforeItemsRemovedSubject.value.asObservable()),this._beforeItemsRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"itemReplaced",{get:function(){return this._itemReplaced||(this._itemReplaced=this.itemReplacedSubject.value.asObservable()),this._itemReplaced},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"beforeItemReplaced",{get:function(){return this._beforeItemReplaced||(this._beforeItemReplaced=this.beforeItemReplacedSubject.value.asObservable()),this._beforeItemReplaced},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"beforeItemsMoved",{get:function(){return this._beforeItemsMoved||(this._beforeItemsMoved=this.beforeItemsMovedSubject.value.asObservable()),this._beforeItemsMoved},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"itemsMoved",{get:function(){return this._itemsMoved||(this._itemsMoved=this.itemsMovedSubject.value.asObservable()),this._itemsMoved},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"lengthChanging",{get:function(){var a=this;return this._lengthChanging||(this._lengthChanging=this.listChanging.select(function(b){return a.inner.length}).distinctUntilChanged()),this._lengthChanging},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"lengthChanged",{get:function(){var a=this;return this._lengthChanged||(this._lengthChanged=this.listChanged.select(function(b){return a.inner.length}).distinctUntilChanged()),this._lengthChanged},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"itemChanging",{get:function(){return this._itemChanging||(this._itemChanging=this.itemChangingSubject.value.asObservable()),this._itemChanging},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"itemChanged",{get:function(){return this._itemChanged||(this._itemChanged=this.itemChangedSubject.value.asObservable()),this._itemChanged},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"shouldReset",{get:function(){var a=this;return this.refcountSubscribers(this.listChanged.selectMany(function(a){return a?Rx.Observable["return"](null):Rx.Observable.empty()}),function(b){return a.resetSubCount+=b})},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"changeTrackingEnabled",{get:function(){return null!=this.propertyChangeWatchers},set:function(a){var b=this;null!=this.propertyChangeWatchers&&a||(null!=this.propertyChangeWatchers||a)&&(a?(this.propertyChangeWatchers={},this.inner.forEach(function(a){return b.addItemToPropertyTracking(a)})):(this.clearAllPropertyChangeWatchers(),this.propertyChangeWatchers=null))},enumerable:!0,configurable:!0}),b.prototype.addRange=function(b){var d=this;null==b&&c.throwError("items");var e=this.isLengthAboveResetThreshold(b.length)?this.suppressChangeNotifications():Rx.Disposable.empty;a.using(e,function(){d.areChangeNotificationsEnabled()?(d.beforeItemsAddedSubject.isValueCreated&&d.beforeItemsAddedSubject.value.onNext({items:b,from:d.inner.length}),Array.prototype.push.apply(d.inner,b),d.itemsAddedSubject.isValueCreated&&d.itemsAddedSubject.value.onNext({items:b,from:d.inner.length}),d.changeTrackingEnabled&&b.forEach(function(a){d.addItemToPropertyTracking(a)})):(Array.prototype.push.apply(d.inner,b),d.changeTrackingEnabled&&b.forEach(function(a){d.addItemToPropertyTracking(a)}))})},b.prototype.insertRange=function(b,d){var e=this;null==d&&c.throwError("collection"),b>this.inner.length&&c.throwError("index");var f=this.isLengthAboveResetThreshold(d.length)?this.suppressChangeNotifications():Rx.Disposable.empty;a.using(f,function(){e.areChangeNotificationsEnabled()?(e.beforeItemsAddedSubject.isValueCreated&&d.forEach(function(a){e.beforeItemsAddedSubject.value.onNext({items:d,from:b})}),Array.prototype.splice.apply(e.inner,[b,0].concat(d)),e.itemsAddedSubject.isValueCreated&&d.forEach(function(a){e.itemsAddedSubject.value.onNext({items:d,from:b})}),e.changeTrackingEnabled&&d.forEach(function(a){e.addItemToPropertyTracking(a)})):(Array.prototype.splice.apply(e.inner,[b,0].concat(d)),e.changeTrackingEnabled&&d.forEach(function(a){e.addItemToPropertyTracking(a)}))})},b.prototype.removeAll=function(b){var d=this;null==b&&c.throwError("items");var e=this.isLengthAboveResetThreshold(b.length)?this.suppressChangeNotifications():Rx.Disposable.empty;a.using(e,function(){b.forEach(function(a){return d.remove(a)})})},b.prototype.removeRange=function(b,c){var d=this,e=this.isLengthAboveResetThreshold(c)?this.suppressChangeNotifications():Rx.Disposable.empty;a.using(e,function(){var a=d.inner.slice(b,b+c);d.areChangeNotificationsEnabled()?(d.beforeItemsRemovedSubject.isValueCreated&&a.forEach(function(c){d.beforeItemsRemovedSubject.value.onNext({items:a,from:b})}),d.inner.splice(b,c),d.changeTrackingEnabled&&a.forEach(function(a){d.removeItemFromPropertyTracking(a);

}),d.itemsRemovedSubject.isValueCreated&&a.forEach(function(c){d.itemsRemovedSubject.value.onNext({items:a,from:b})})):(d.inner.splice(b,c),d.changeTrackingEnabled&&a.forEach(function(a){d.removeItemFromPropertyTracking(a)}))})},b.prototype.toArray=function(){return this.inner},b.prototype.reset=function(){this.publishResetNotification()},b.prototype.add=function(a){this.insertItem(this.inner.length,a)},b.prototype.clear=function(){this.clearItems()},b.prototype.contains=function(a){return-1!==this.inner.indexOf(a)},b.prototype.remove=function(a){var b=this.inner.indexOf(a);return-1===b?!1:(this.removeItem(b),!0)},b.prototype.indexOf=function(a){return this.inner.indexOf(a)},b.prototype.insert=function(a,b){this.insertItem(a,b)},b.prototype.removeAt=function(a){this.removeItem(a)},b.prototype.move=function(a,b){this.moveItem(a,b)},b.prototype.suppressChangeNotifications=function(){var b=this;return this.changeNotificationsSuppressed++,this.hasWhinedAboutNoResetSub||0!==this.resetSubCount||a.isInUnitTest()||(a.log.info("suppressChangeNotifications was called (perhaps via addRange), yet you do not have a subscription to shouldReset. This probably isn't what you want, as itemsAdded and friends will appear to 'miss' items"),this.hasWhinedAboutNoResetSub=!0),Rx.Disposable.create(function(){b.changeNotificationsSuppressed--,0===b.changeNotificationsSuppressed&&(b.publishBeforeResetNotification(),b.publishResetNotification())})},b.prototype.get=function(a){return this.inner[a]},b.prototype.sort=function(a){this.publishBeforeResetNotification(),this.inner.sort(a),this.publishResetNotification()},b.prototype.forEach=function(a,b){this.inner.forEach(a,b)},b.prototype.map=function(a,b){return this.inner.map(a,b)},b.prototype.filter=function(a,b){return this.inner.filter(a,b)},b.prototype.some=function(a,b){return this.inner.some(a,b)},b.prototype.every=function(a,b){return this.inner.every(a,b)},b.prototype.setupRx=function(b,d,e){void 0===d&&(d=.3),void 0===e&&(e=null),e=e||a.app.mainThreadScheduler,this.resetChangeThreshold=d,void 0===this.inner&&(this.inner=new Array),this.beforeItemsAddedSubject=new a.Lazy(function(){return new Rx.Subject}),this.itemsAddedSubject=new a.Lazy(function(){return new Rx.Subject}),this.beforeItemsRemovedSubject=new a.Lazy(function(){return new Rx.Subject}),this.itemsRemovedSubject=new a.Lazy(function(){return new Rx.Subject}),this.beforeItemReplacedSubject=new a.Lazy(function(){return new Rx.Subject}),this.itemReplacedSubject=new a.Lazy(function(){return new Rx.Subject}),this.resetSubject=new Rx.Subject,this.beforeResetSubject=new Rx.Subject,this.itemChangingSubject=new a.Lazy(function(){return c.createScheduledSubject(e)}),this.itemChangedSubject=new a.Lazy(function(){return c.createScheduledSubject(e)}),this.beforeItemsMovedSubject=new a.Lazy(function(){return new Rx.Subject}),this.itemsMovedSubject=new a.Lazy(function(){return new Rx.Subject}),this.listChanged=Rx.Observable.merge(this.itemsAdded.select(function(a){return!1}),this.itemsRemoved.select(function(a){return!1}),this.itemReplaced.select(function(a){return!1}),this.itemsMoved.select(function(a){return!1}),this.resetSubject.select(function(a){return!0})),this.listChanging=Rx.Observable.merge(this.beforeItemsAdded.select(function(a){return!1}),this.beforeItemsRemoved.select(function(a){return!1}),this.beforeItemReplaced.select(function(a){return!1}),this.beforeItemsMoved.select(function(a){return!1}),this.beforeResetSubject.select(function(a){return!0})),b&&Array.prototype.splice.apply(this.inner,[0,0].concat(b)),this.length=this.lengthChanged.toProperty(this.inner.length),this.isEmpty=this.lengthChanged.select(function(a){return 0===a}).toProperty(0===this.inner.length)},b.prototype.areChangeNotificationsEnabled=function(){return 0===this.changeNotificationsSuppressed},b.prototype.insertItem=function(a,b){return this.areChangeNotificationsEnabled()?(this.beforeItemsAddedSubject.isValueCreated&&this.beforeItemsAddedSubject.value.onNext({items:[b],from:a}),this.inner.splice(a,0,b),this.itemsAddedSubject.isValueCreated&&this.itemsAddedSubject.value.onNext({items:[b],from:a}),void(this.changeTrackingEnabled&&this.addItemToPropertyTracking(b))):(this.inner.splice(a,0,b),void(this.changeTrackingEnabled&&this.addItemToPropertyTracking(b)))},b.prototype.removeItem=function(a){var b=this.inner[a];return this.areChangeNotificationsEnabled()?(this.beforeItemsRemovedSubject.isValueCreated&&this.beforeItemsRemovedSubject.value.onNext({items:[b],from:a}),this.inner.splice(a,1),this.itemsRemovedSubject.isValueCreated&&this.itemsRemovedSubject.value.onNext({items:[b],from:a}),void(this.changeTrackingEnabled&&this.removeItemFromPropertyTracking(b))):(this.inner.splice(a,1),void(this.changeTrackingEnabled&&this.removeItemFromPropertyTracking(b)))},b.prototype.moveItem=function(a,b){var c=this.inner[a];if(!this.areChangeNotificationsEnabled())return this.inner.splice(a,1),void this.inner.splice(b,0,c);var d={items:[c],from:a,to:b};this.beforeItemsMovedSubject.isValueCreated&&this.beforeItemsMovedSubject.value.onNext(d),this.inner.splice(a,1),this.inner.splice(b,0,c),this.itemsMovedSubject.isValueCreated&&this.itemsMovedSubject.value.onNext(d)},b.prototype.set=function(a,b){return this.areChangeNotificationsEnabled()?(this.beforeItemReplacedSubject.isValueCreated&&this.beforeItemReplacedSubject.value.onNext({from:a,items:[b]}),this.changeTrackingEnabled&&(this.removeItemFromPropertyTracking(this.inner[a]),this.addItemToPropertyTracking(b)),this.inner[a]=b,void(this.itemReplacedSubject.isValueCreated&&this.itemReplacedSubject.value.onNext({from:a,items:[b]}))):(this.changeTrackingEnabled&&(this.removeItemFromPropertyTracking(this.inner[a]),this.addItemToPropertyTracking(b)),void(this.inner[a]=b))},b.prototype.clearItems=function(){return this.areChangeNotificationsEnabled()?(this.publishBeforeResetNotification(),this.inner.length=0,this.publishResetNotification(),void(this.changeTrackingEnabled&&this.clearAllPropertyChangeWatchers())):(this.inner.length=0,void(this.changeTrackingEnabled&&this.clearAllPropertyChangeWatchers()))},b.prototype.addItemToPropertyTracking=function(b){var d=this.propertyChangeWatchers[a.getOid(b)],e=this;if(d)return void d.addRef();var f=a.observeObject(b,!0).select(function(a){return new c.PropertyChangedEventArgs(b,a.propertyName)}),g=a.observeObject(b,!1).select(function(a){return new c.PropertyChangedEventArgs(b,a.propertyName)}),h=new Rx.CompositeDisposable(f.where(function(a){return e.areChangeNotificationsEnabled()}).subscribe(function(a){return e.itemChangingSubject.value.onNext(a)}),g.where(function(a){return e.areChangeNotificationsEnabled()}).subscribe(function(a){return e.itemChangedSubject.value.onNext(a)}));this.propertyChangeWatchers[a.getOid(b)]=new a.RefCountDisposeWrapper(Rx.Disposable.create(function(){h.dispose(),delete e.propertyChangeWatchers[a.getOid(b)]}))},b.prototype.removeItemFromPropertyTracking=function(b){var c=this.propertyChangeWatchers[a.getOid(b)];c&&c.release()},b.prototype.clearAllPropertyChangeWatchers=function(){var a=this;Object.keys(this.propertyChangeWatchers).forEach(function(b){a.propertyChangeWatchers[b].release()})},b.prototype.refcountSubscribers=function(a,b){return Rx.Observable.create(function(c){return b(1),new Rx.CompositeDisposable(a.subscribe(c),Rx.Disposable.create(function(){return b(-1)}))})},b.prototype.publishResetNotification=function(){this.resetSubject.onNext(!0)},b.prototype.publishBeforeResetNotification=function(){this.beforeResetSubject.onNext(!0)},b.prototype.isLengthAboveResetThreshold=function(a){return a/this.inner.length>this.resetChangeThreshold&&a>10},b}();!function(a){a.listConstructor=d}(c=a.internal||(a.internal={})),a.list=b}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=0,d={},e=function(){function b(b){var d=this;this.template=function(a){return d.buildTemplate(a)},this.viewModel=function(b){var d=b,e=null!=d.groupName?d.groupName:a.formatString("wx-radiogroup-{0}",c++);return{items:b.items,selectedValue:b.selectedValue,groupName:e,hooks:{afterRender:b.afterRender}}},this.htmlTemplateEngine=b}return b.prototype.buildTemplate=function(b){var c,e,f=void 0;if(!b.noCache&&(f=(null!=b.itemText?b.itemText:"")+"-"+(null!=b.itemValue?b.itemValue:"")+"-"+(null!=b.itemClass?b.itemClass:"")+"-"+(null!=b.selectedValue?"true":"false"),e=d[f],null!=e))return e;c='<div class="wx-radiogroup" data-bind="{0}"><input type="radio" data-bind="{1}"/>{2}</div>';var g=[],h=[],i=[],j=[],k="";g.push({key:"foreach",value:"{ data: items, hooks: hooks }"}),h.length&&g.push({key:"attr",value:"{ "+h.map(function(a){return a.key+": "+a.value}).join(", ")+" }"}),i.push({key:"value",value:b.itemValue||"$data"}),j.push({key:"name",value:"$parent.groupName"}),b.selectedValue&&i.push({key:"selectedValue",value:"$parent.@selectedValue"}),b.itemText&&(k+=a.formatString('<label data-bind="text: {0}, attr: { for: {1} }"></label>',b.itemText,"$parent.groupName + '-' + $index"),j.push({key:"id",value:"$parent.groupName + '-' + $index"})),b.itemClass&&j.push({key:"class",value:"'"+b.itemClass+"'"}),j.length&&i.push({key:"attr",value:"{ "+j.map(function(a){return a.key+": "+a.value}).join(", ")+" }"});var l=g.map(function(a){return a.key+": "+a.value}).join(", "),m=i.map(function(a){return a.key+": "+a.value}).join(", ");return c=a.formatString(c,l,m,k),b.noCache||(d[f]=c),e=this.htmlTemplateEngine.parse(c)},b}();!function(a){a.radioGroupComponentConstructor=e}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c={},d=function(){function b(a){var b=this;this.template=function(a){return b.buildTemplate(a)},this.viewModel=function(a){var b=a;return{items:a.items,selectedValue:a.selectedValue,hooks:{afterRender:b.afterRender}}},this.htmlTemplateEngine=a}return b.prototype.buildTemplate=function(b){var d,e,f=void 0;if(!b.noCache&&(f=(null!=b.name?b.name:"")+"-"+(null!=b.itemText?b.itemText:"")+"-"+(null!=b.itemValue?b.itemValue:"")+"-"+(null!=b.itemClass?b.itemClass:"")+"-"+(null!=b.selectedValue?"true":"false")+"-"+(b.multiple?"true":"false")+"-"+(b.required?"true":"false")+"-"+(b.autofocus?"true":"false")+"-"+(b.size?b.size.toString():"0"),e=c[f],null!=e))return e;d='<select class="wx-select" data-bind="{0}"><option data-bind="{1}"></option></select>';var g=[],h=[],i=[],j=[];g.push({key:"foreach",value:"{ data: items, hooks: hooks }"}),b.selectedValue&&g.push({key:"selectedValue",value:"@selectedValue"}),b.name&&h.push({key:"name",value:b.name}),b.multiple&&h.push({key:"multiple",value:"true"}),void 0!==b.size&&h.push({key:"size",value:b.size.toString()}),b.required&&h.push({key:"required",value:"true"}),b.autofocus&&h.push({key:"autofocus",value:"true"}),h.length&&g.push({key:"attr",value:"{ "+h.map(function(a){return a.key+": "+a.value}).join(", ")+" }"}),i.push({key:"value",value:b.itemValue||"$data"}),i.push({key:"text",value:b.itemText||"$data"}),b.itemClass&&j.push({key:"class",value:"'"+b.itemClass+"'"}),j.length&&i.push({key:"attr",value:"{ "+j.map(function(a){return a.key+": "+a.value}).join(", ")+" }"});var k=g.map(function(a){return a.key+": "+a.value}).join(", "),l=i.map(function(a){return a.key+": "+a.value}).join(", ");return d=a.formatString(d,k,l),b.noCache||(c[f]=d),e=this.htmlTemplateEngine.parse(d)},b}();!function(a){a.selectComponentConstructor=d}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";function b(b){var c;b instanceof Node||b instanceof HTMLElement?c=[b]:Array.isArray(b)?c=b:b instanceof NodeList?c=a.nodeListToArray(b):a.internal.throwError("invalid argument: element");var d=c.filter(function(a){return 1===a.nodeType});return d}function c(a){"s"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));var b=parseFloat(a)||0;return b}function d(a){var b=getComputedStyle(a).transitionDuration,d=0,e=b.split(/\s*,\s*/);return e.forEach(function(a){var b=c(a);d=d?Math.max(b,d):b}),1e3*d}function e(a){var b=getComputedStyle(a).transitionDelay,d=0,e=b.split(/\s*,\s*/);return e.forEach(function(a){var b=Math.max(0,c(a));d=d?Math.max(b,d):b}),1e3*d}function f(a){var b=getComputedStyle(a).animationDuration||getComputedStyle(a).webkitAnimationDuration||"0s",d=getComputedStyle(a).animationDelay||getComputedStyle(a).webkitAnimationDelay||"0s",e=c(b),f=c(d);return 1e3*(e+f)}function g(c,d,e){var f={};return f.prepare=d?function(a,c){var e=b(a);e.forEach(function(a){return d(a,c)})}:a.noop,f.run=function(d,e){return Rx.Observable.defer(function(){var f=b(d);return Rx.Observable.combineLatest(f.map(function(a){return c(a,e)}),a.noop)})},f.complete=e?function(a,c){var d=b(a);d.forEach(function(a){return e(a,c)})}:a.noop,f}function h(c,g,h){var i,j,k,l,m,n,o={};if(c){var p;"string"==typeof c&&(c=c.split(/\s+/).map(function(b){return a.trimString(b)}).filter(function(a){return a})),p="string"==typeof c[0]?c.map(function(a){return{css:a,add:!0}}):c,i=p.filter(function(a){return a.add}).map(function(a){return a.css}),j=p.filter(function(a){return!a.add||a.remove}).map(function(a){return a.css}),o.prepare=function(c,d){var e=b(c);i&&i.length&&e.forEach(function(b){return a.toggleCssClass.apply(null,[b,!0].concat(i))}),j&&j.length&&e.forEach(function(b){return a.toggleCssClass.apply(null,[b,!1].concat(j))})}}var q;"string"==typeof g&&(g=g.split(/\s+/).map(function(b){return a.trimString(b)}).filter(function(a){return a})),q="string"==typeof g[0]?g.map(function(a){return{css:a,add:!0}}):g,k=q.filter(function(a){return a.add}).map(function(a){return a.css}),l=q.filter(function(a){return!a.add||a.remove}).map(function(a){return a.css}),o.run=function(c,g){return Rx.Observable.defer(function(){var g=b(c),h=Rx.Observable.combineLatest(g.map(function(a){var b=Math.max(d(a)+e(a),f(a));return Rx.Observable.timer(b)}),a.noop);return Rx.Observable.timer(1).subscribe(function(){k&&k.length&&g.forEach(function(b){return a.toggleCssClass.apply(null,[b,!0].concat(k))}),l&&l.length&&g.forEach(function(b){return a.toggleCssClass.apply(null,[b,!1].concat(l))})}),h})};var r;return h?("string"==typeof h&&(h=h.split(/\s+/).map(function(b){return a.trimString(b)}).filter(function(a){return a})),r="string"==typeof h[0]?h.map(function(a){return{css:a,add:!0}}):h,m=r.filter(function(a){return a.add}).map(function(a){return a.css}),n=r.filter(function(a){return!a.add||a.remove}).map(function(a){return a.css})):(n=[],i&&i.length&&(n=n.concat(i)),k&&k.length&&(n=n.concat(k))),o.complete=function(c,d){var e=b(c);m&&m.length&&e.forEach(function(b){return a.toggleCssClass.apply(null,[b,!0].concat(m))}),n&&n.length&&e.forEach(function(b){return a.toggleCssClass.apply(null,[b,!1].concat(n))})},o}function i(){var b=a.args2Array(arguments),c=b.shift();return"function"==typeof c?g(c,b.shift(),b.shift()):h(c,b.shift(),b.shift())}a.animation=i}(wx||(wx={}));var wx;!function(a){"use strict";function b(){var b,d,e,g,h=a.args2Array(arguments);return a.isFunction(h[0])?(d=h.shift(),b=a.isRxObservable(h[0])?h.shift():Rx.Observable["return"](!0),e=a.isRxScheduler(h[0])?h.shift():void 0,g=h.shift(),null!=g&&(d=d.bind(g)),c(b,function(a){return Rx.Observable.create(function(b){try{d(a),b.onNext(null),b.onCompleted()}catch(c){b.onError(c)}return Rx.Disposable.empty})},e)):(b=h.shift()||Rx.Observable["return"](!0),e=a.isRxScheduler(h[0])?h.shift():void 0,new f(b,function(a){return Rx.Observable["return"](a)},e))}function c(){var b,c,d,e,g=a.args2Array(arguments);return a.isFunction(g[0])?(c=g.shift(),d=a.isRxScheduler(g[0])?g.shift():void 0,e=g.shift(),null!=e&&(c=c.bind(e)),new f(Rx.Observable["return"](!0),c,d)):(b=g.shift(),c=g.shift(),d=a.isRxScheduler(g[0])?g.shift():void 0,new f(b,c,d))}function d(){var c=a.args2Array(arguments),d=c.filter(function(b){return a.isCommand(b)}),e=c.filter(function(b){return a.isRxObservable(b)}).pop();e||(e=Rx.Observable["return"](!0));var f=Rx.Observable.combineLatest(d.map(function(a){return a.canExecuteObservable}),function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return a.every(function(a){return a})}),g=Rx.Observable.combineLatest(e.startWith(!0),f,function(a,b){return a&&b}),h=b(g);return h.results.subscribe(function(a){return d.forEach(function(b){b.execute(a)})}),h}var e,f=function(){function b(b,c,d){var e=this;this.resultsSubject=new Rx.Subject,this.isExecutingSubject=new Rx.Subject,this.inflightCount=0,this.canExecuteLatest=!1,this.canExecuteDisp=null,this.scheduler=d||a.app.mainThreadScheduler,this.func=c,this.canExecuteObs=b.combineLatest(this.isExecutingSubject.startWith(!1),function(a,b){return a&&!b})["catch"](function(a){return e.exceptionsSubject.onNext(a),Rx.Observable["return"](!1)})["do"](function(a){e.canExecuteLatest=a}).publish(),a.isInUnitTest()&&this.canExecuteObs.connect(),this.exceptionsSubject=new Rx.Subject,this.thrownExceptions=this.exceptionsSubject.asObservable(),this.exceptionsSubject.observeOn(this.scheduler).subscribe(a.app.defaultExceptionHandler)}return b.prototype.queryInterface=function(b){return b===a.IID.IUnknown||b===a.IID.ICommand||b===a.IID.IHandleObservableErrors||b===a.IID.IDisposable?!0:!1},b.prototype.dispose=function(){var a=this.canExecuteDisp;null!=a&&a.dispose()},Object.defineProperty(b.prototype,"canExecuteObservable",{get:function(){var a=this,b=this.canExecuteObs.startWith(this.canExecuteLatest).distinctUntilChanged();return null!=this.canExecuteDisp?b:Rx.Observable.create(function(c){var d=b.subscribe(c);return a.canExecuteDisp=a.canExecuteObs.connect(),d})},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isExecuting",{get:function(){return this.isExecutingSubject.startWith(this.inflightCount>0)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"results",{get:function(){return this.resultsSubject.asObservable()},enumerable:!0,configurable:!0}),b.prototype.canExecute=function(a){return null==this.canExecuteDisp&&(this.canExecuteDisp=this.canExecuteObs.connect()),this.canExecuteLatest},b.prototype.execute=function(a){this.executeAsync(a)["catch"](Rx.Observable.empty()).subscribe()},b.prototype.executeAsync=function(a){var b=this,c=Rx.Observable.create(function(c){1===++b.inflightCount&&b.isExecutingSubject.onNext(!0);var d=new Rx.SerialDisposable;d.setDisposable(Rx.Disposable.create(function(){0===--b.inflightCount&&b.isExecutingSubject.onNext(!1)}));var e=b.func(a).observeOn(b.scheduler)["do"](function(a){},function(a){return d.setDisposable(Rx.Disposable.empty)},function(){return d.setDisposable(Rx.Disposable.empty)})["do"](function(a){return b.resultsSubject.onNext(a)},function(a){return b.exceptionsSubject.onNext(a)}).subscribe(c);return new Rx.CompositeDisposable(e,d)});return c.publish().refCount()},b}();!function(a){a.commandConstructor=f}(e=a.internal||(a.internal={})),a.command=b,a.asyncCommand=c,a.combinedCommand=d}(wx||(wx={}));var wx;!function(a){"use strict";var b;!function(b){function c(b){var c=a.trimString(b);123===c.charCodeAt(0)&&(c=c.slice(1,-1));var d,e,f=new Array,g=c.match(z),h=0;if(g){g.push(",");for(var i,j=0;i=g[j];++j){var k=i.charCodeAt(0);if(44===k){if(0>=h){d&&f.push(e?{key:d,value:e.join("")}:{unknown:d,value:void 0}),d=e=h=0;continue}}else if(58===k){if(!e)continue}else if(47===k&&j&&i.length>1){var l=g[j-1].match(A);l&&!B[l[0]]&&(c=c.substr(c.indexOf(i)+1),g=c.match(z),g.push(","),j=-1,i="/")}else if(40===k||123===k||91===k)++h;else if(41===k||125===k||93===k)--h;else if(!d&&!e){d=34===k||39===k?i.slice(1,-1):i;continue}e?e.push(i):e=[i]}}return f}function d(){}function e(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function f(a){return"undefined"!=typeof a}function g(a,b,c,d,e,f,g){var h=arguments;throw b=b.replace(/{(\d)}/g,function(a){return h[2+parseInt(a[1])]}),new SyntaxError(b)}function h(a){return"string"==typeof a?a.toLowerCase():a}function i(a,b){if("constructor"===a)throw g("isecfld",'Referencing "constructor" field in WebRx expressions is disallowed! Expression: {0}',b);return a}function j(a,b){if(a){if(a.constructor===a)throw g("isecfn","Referencing Function in WebRx expressions is disallowed! Expression: {0}",b);if(a.document&&a.location&&a.alert&&a.setInterval)throw g("isecwindow","Referencing the Window in WebRx expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw g("isecdom","Referencing DOM nodes in WebRx expressions is disallowed! Expression: {0}",b)}return a}function k(){return 0}function l(a,b,c,d,e,f){var g,h,j,k=b.split("."),l=q(f);if(l)for(h=0;k.length>1;h++)g=i(k.shift(),d),j=l.readFieldHook?l.readFieldHook(a,g):a[g],j||(j={},l.writeFieldHook?l.writeFieldHook(a,g,j):a[g]=j),a=j;else for(h=0;k.length>1;h++)g=i(k.shift(),d),j=a[g],j||(j={},a[g]=j),a=j;return g=i(k.shift(),d),l&&l.writeFieldHook?l.writeFieldHook(a,g,c):a[g]=c,c}function m(a,b,c,d,e,f,g){return i(a,f),i(b,f),i(c,f),i(d,f),i(e,f),function(f,g){var h=g&&g.hasOwnProperty(a)?g:f,i=q(g);return i&&i.readFieldHook?null==h?h:(h=i.readFieldHook(h,a),b?null==h?void 0:(h=i.readFieldHook(h,b),c?null==h?void 0:(h=i.readFieldHook(h,c),d?null==h?void 0:(h=i.readFieldHook(h,d),e?null==h?void 0:h=i.readFieldHook(h,e):h):h):h):h):null==h?h:(h=h[a],b?null==h?void 0:(h=h[b],c?null==h?void 0:(h=h[c],d?null==h?void 0:(h=h[d],e?null==h?void 0:h=h[e]:h):h):h):h)}}function n(a,b){return i(a,b),function(b,c){if(b=c&&c.hasOwnProperty(a)?c:b,null==b)return void 0;var d=q(c);return d&&d.readFieldHook?d.readFieldHook(b,a):b[a]}}function o(a,b,c){return i(a,c),i(b,c),function(c,d){var e=q(d);return e&&e.readFieldHook?(c=d&&d.hasOwnProperty(a)?d:c,null==c?void 0:(c=e.readFieldHook(c,a),null==c?void 0:e.readFieldHook(c,b))):(c=(d&&d.hasOwnProperty(a)?d:c)[a],null==c?void 0:c[b])}}function p(a,b,c){if(H.hasOwnProperty(a))return H[a];var d,e=a.split("."),f=e.length;return d=1===f?n(e[0],c):2===f?o(e[0],e[1],c):6>f?m(e[0],e[1],e[2],e[3],e[4],c,b):function(a,d){var g={};Object.keys(d).forEach(function(a){return g[a]=d[a]});var h,i=0;do h=m(e[i++],e[i++],e[i++],e[i++],e[i++],c,b)(a,d),a=h,d={},Object.keys(g).forEach(function(a){return d[a]=g[a]});while(f>i);return h},"hasOwnProperty"!==a&&(H[a]=d),d}function q(a){return void 0!==a?a[C]:void 0}function r(a,b){a[C]=b}function s(a,b,c){if("string"!=typeof a)throw new TypeError("src must be a string, instead saw '"+typeof a+"'");var d=new F({}),e=new G(d,b);if(!c)return e.parse(a);var f=c[a];return f||(f=c[a]=e.parse(a)),f}var t='"(?:[^"\\\\]|\\\\.)*"',u="'(?:[^'\\\\]|\\\\.)*'",v="/(?:[^/\\\\]|\\\\.)*/w*",w=",\"'{}()/:[\\]",x="[^\\s:,/][^"+w+"]*[^\\s"+w+"]",y="[^\\s]",z=RegExp(t+"|"+u+"|"+v+"|"+x+"|"+y,"g"),A=/[\])"'A-Za-z0-9_$]+$/,B={"in":1,"return":1,"typeof":1};b.parseObjectLiteral=c;var C="___runtimeHooks",D={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:d,"+":function(a,b,c,d){return c=c(a,b),d=d(a,b),f(c)?f(d)?c+d:c:f(d)?d:void 0},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(f(c)?c:0)-(f(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"^":function(a,b,c,d){return c(a,b)^d(a,b)},"=":d,"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)===d(a,b)},"!=":function(a,b,c,d){return c(a,b)!==d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"&":function(a,b,c,d){return c(a,b)&d(a,b)},"|":function(a,b,c,d){return d(a,b)(a,b,c(a,b))},"!":function(a,b,c){return!c(a,b)}},E={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},F=function(){function a(a){this.options=a}return a.prototype.lex=function(a){this.text=a,this.index=0,this.ch=void 0,this.lastCh=":",this.tokens=[];for(var b,c=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent(),this.was("{,")&&"{"===c[0]&&(b=this.tokens[this.tokens.length-1])&&(b.json=-1===b.text.indexOf("."));else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch,json:this.was(":[,")&&this.is("{[")||this.is("}]:,")}),this.is("{[")&&c.unshift(this.ch),this.is("}]")&&c.shift(),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var d=this.ch+this.peek(),e=d+this.peek(2),f=D[this.ch],g=D[d],h=D[e];h?(this.tokens.push({index:this.index,text:e,fn:h}),this.index+=3):g?(this.tokens.push({index:this.index,text:d,fn:g}),this.index+=2):f?(this.tokens.push({index:this.index,text:this.ch,fn:f,json:this.was("[,:")&&this.is(" + -")}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},a.prototype.is=function(a){return-1!==a.indexOf(this.ch)},a.prototype.was=function(a){return-1!==a.indexOf(this.lastCh)},a.prototype.peek=function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},a.prototype.isNumber=function(a){return a>="0"&&"9">=a},a.prototype.isWhitespace=function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},a.prototype.isIdent=function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a||"@"===a},a.prototype.isExpOperator=function(a){return"-"===a||"+"===a||this.isNumber(a)},a.prototype.throwError=function(a,b,c){c=c||this.index;var d=f(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw g("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},a.prototype.readNumber=function(){for(var a="",b=this.index;this.index<this.text.length;){var c=h(this.text.charAt(this.index));if("."===c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"===c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"===a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!==a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}a=1*a,this.tokens.push({index:b,text:a,json:!0,fn:function(){return a}})},a.prototype.readIdent=function(){for(var a,b,c,d,f=this,g="",h=this.index;this.index<this.text.length&&(d=this.text.charAt(this.index),"."===d||this.isIdent(d)||this.isNumber(d));)"."===d&&(a=this.index),g+=d,this.index++;if(a)for(b=this.index;b<this.text.length;){if(d=this.text.charAt(b),"("===d){c=g.substr(a-h+1),g=g.substr(0,a-h),this.index=b;break}if(!this.isWhitespace(d))break;b++}var i={index:h,text:g};if(D.hasOwnProperty(g))i.fn=D[g],i.json=D[g];else{var j=p(g,this.options,this.text);i.fn=e(function(a,b){return j(a,b)},{assign:function(a,b,c){return l(a,g,b,f.text,f.options,c)}})}this.tokens.push(i),c&&(this.tokens.push({index:a,text:".",json:!1}),this.tokens.push({index:a+1,text:c,json:!1}))},a.prototype.readString=function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=E[f];c+=h?h:f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,string:c,json:!0,fn:function(){return c}});c+=f}this.index++}this.throwError("Unterminated quote",b)},a}(),G=function(){function a(a,b){this.lexer=a,this.options=b||{filters:{}}}return a.prototype.parse=function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b.literal=!!b.literal,b.constant=!!b.constant,b},a.prototype.primary=function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var b=this.expect();a=b.fn,a||this.throwError("not a primary expression",b),b.json&&(a.constant=!0,a.literal=!0)}for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},a.prototype.throwError=function(a,b){throw g("syntax","WebRx Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},a.prototype.peekToken=function(){if(0===this.tokens.length)throw g("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},a.prototype.peek=function(a,b,c,d){if(this.tokens.length>0){var e=this.tokens[0],f=e.text;if(f===a||f===b||f===c||f===d||!a&&!b&&!c&&!d)return e}return!1},a.prototype.expect=function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},a.prototype.consume=function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},a.prototype.unaryFn=function(a,b){return e(function(c,d){return a(c,d,b)},{constant:b.constant})},a.prototype.ternaryFn=function(a,b,c){return e(function(d,e){return a(d,e)?b(d,e):c(d,e)},{constant:a.constant&&b.constant&&c.constant})},a.prototype.binaryFn=function(a,b,c){return e(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant})},a.prototype.statements=function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}},a.prototype.filterChain=function(){for(var a,b=this.expression();;){if(!(a=this.expect("|")))return b;b=this.binaryFn(b,a.fn,this.filter())}},a.prototype.filter=function(){for(var a=this.expect(),b=this.options.filters[a.text],c=[];;){if(!(a=this.expect(":"))){var d=function(a,d,e){for(var f=[e],g=0;g<c.length;g++)f.push(c[g](a,d));return b.apply(a,f)};return function(){return d}}c.push(this.expression())}},a.prototype.expression=function(){return this.assignment()},a.prototype.assignment=function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),function(b,d){return c.assign(b,a(b,d),d)}):c},a.prototype.ternary=function(){var a,b,c=this.logicalOR();if(b=this.expect("?")){if(a=this.ternary(),b=this.expect(":"))return this.ternaryFn(c,a,this.ternary());this.throwError("expected :",b)}return c},a.prototype.logicalOR=function(){for(var a,b=this.logicalAND();;){if(!(a=this.expect("||")))return b;b=this.binaryFn(b,a.fn,this.logicalAND())}},a.prototype.logicalAND=function(){var a,b=this.equality();return(a=this.expect("&&"))&&(b=this.binaryFn(b,a.fn,this.logicalAND())),b},a.prototype.equality=function(){var a,b=this.relational();return(a=this.expect("==","!=","===","!=="))&&(b=this.binaryFn(b,a.fn,this.equality())),b},a.prototype.relational=function(){var a,b=this.additive();return(a=this.expect("<",">","<=",">="))&&(b=this.binaryFn(b,a.fn,this.relational())),b},a.prototype.additive=function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.fn,this.multiplicative());return b},a.prototype.multiplicative=function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.fn,this.unary());return b},a.prototype.unary=function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(k,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},a.prototype.fieldAccess=function(a){var b=this,c=this.expect().text,d=p(c,this.options,this.text);return e(function(b,c,e){return d(e||a(b,c))},{assign:function(d,e,f){return l(a(d,f),c,e,b.text,b.options,f)}})},a.prototype.objectIndex=function(a){var b=this,c=this.expression();return this.consume("]"),e(function(d,e){var f,g=a(d,e),h=c(d,e);

if(!g)return void 0;var i=q(e);return f=i&&i.readIndexHook?i.readIndexHook(g,h):g[h],f=j(f,b.text)},{assign:function(d,e,f){var g=c(d,f),h=j(a(d,f),b.text),i=q(f);return i&&i.writeIndexHook?i.writeIndexHook(h,g,e):h[g]=e}})},a.prototype.functionCall=function(a,b){this.options.disallowFunctionCalls&&this.throwError("Function calls are not allowed");var c=[];if(")"!==this.peekToken().text)do c.push(this.expression());while(this.expect(","));this.consume(")");var e=this;return function(f,g){for(var h=[],i=b?b(f,g):f,k=0;k<c.length;k++)h.push(c[k](f,g));var l=a(f,g,i)||d;j(i,e.text),j(l,e.text);var m=l.apply?l.apply(i,h):l(h[0],h[1],h[2],h[3],h[4]);return j(m,e.text)}},a.prototype.arrayDeclaration=function(){var a=[],b=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var c=this.expression();a.push(c),c.constant||(b=!1)}while(this.expect(","));return this.consume("]"),e(function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d},{literal:!0,constant:b})},a.prototype.object=function(){var a=[],b=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.expect(),d=c.string||c.text;this.consume(":");var f=this.expression();a.push({key:d,value:f}),f.constant||(b=!1)}while(this.expect(","));return this.consume("}"),e(function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d},{literal:!0,constant:b})},a}(),H={};b.getRuntimeHooks=q,b.setRuntimeHooks=r,b.compileExpression=s}(b||(b={}));var c;!function(a){var c=b;a.expressionCompilerConstructor=c}(c=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";function b(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a}function c(a,c){for(var d,j,k,l,m,n=c.createDocumentFragment(),o=[],p=0,q=a.length;q>p;p++)if(d=a[p],d||0===d)if("object"==typeof d)b(o,d.nodeType?[d]:d);else if(g.test(d)){for(j=j||n.appendChild(c.createElement("div")),k=(f.exec(d)||["",""])[1].toLowerCase(),l=i[k]||i._default,j.innerHTML=l[1]+d.replace(e,"<$1></$2>")+l[2],m=l[0];m--;)j=j.lastChild;b(o,j.childNodes),j=n.firstChild,j.textContent=""}else o.push(c.createTextNode(d));for(n.textContent="",p=0;d=o[p++];)1===d.nodeType&&"script"===d.tagName.toLowerCase()&&h.test(d.type||"")||n.appendChild(d);return n}var d=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,f=/<([\w:-]+)/,g=/<|&#?\w+;/,h=/^$|\/(?:java|ecma)script/i,i={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table>","</table>"],td:[3,"<table>","</table>"],_default:[0,"",""]};i.optgroup=i.option,i.tbody=i.tfoot=i.colgroup=i.caption=i.thead,i.th=i.td;var j,k=function(){var a=document.implementation.createHTMLDocument("");return a.body?(a.body.innerHTML="<form></form><form></form>",2===a.body.childNodes.length):!1}(),l=function(){function a(){}return a.prototype.parse=function(a){var e=k?document.implementation.createHTMLDocument(""):document,f=d.exec(a);if(f)return[e.createElement(f[1])];f=c([a],e);var g=b([],f.childNodes);return g},a}();!function(a){a.htmlTemplateEngineConstructor=l}(j=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){var b;!function(b){"use strict";function c(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];try{console.log.apply(console,arguments)}catch(c){try{window.opera.postError.apply(window.opera,arguments)}catch(c){alert(Array.prototype.join.call(arguments," "))}}}function d(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];d.length&&(b=a.formatString.apply(null,[b].concat(d))),c("**** WebRx Critical: "+b)}function e(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];d.length&&(b=a.formatString.apply(null,[b].concat(d))),c("*** WebRx Error: "+b)}function f(b){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];d.length&&(b=a.formatString.apply(null,[b].concat(d))),c("* WebRx Info: "+b)}b.critical=d,b.error=e,b.info=f}(b=a.log||(a.log={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b=function(){function a(){this.messageBus={},this.schedulerMappings={}}return a.prototype.listen=function(a){return this.setupSubjectIfNecessary(a).skip(1)},a.prototype.isRegistered=function(a){return this.messageBus.hasOwnProperty(a)},a.prototype.registerMessageSource=function(a,b){return a.subscribe(this.setupSubjectIfNecessary(b))},a.prototype.sendMessage=function(a,b){this.setupSubjectIfNecessary(b).onNext(a)},a.prototype.registerScheduler=function(a,b){this.schedulerMappings[b]=a},a.prototype.setupSubjectIfNecessary=function(a){var b=this.messageBus[a];return null==b&&(b=c.createScheduledSubject(this.getScheduler(a),null,new Rx.BehaviorSubject(void 0)),this.messageBus[a]=b),b},a.prototype.getScheduler=function(a){var b=this.schedulerMappings[a];return b||Rx.Scheduler.currentThread},a}();a.messageBus,Object.defineProperty(a,"messageBus",{get:function(){return a.injector.get(a.res.messageBus)}});var c;!function(a){a.messageBusConstructor=b}(c=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a,b){this.priority=5,this.domManager=a,this.router=b}return c.prototype.applyBinding=function(c,d,e,f,g){var h=this;1!==c.nodeType&&b.throwError("stateActive-binding only operates on elements!"),null==d&&b.throwError("invalid binding-options!");var i,j,k,l=c,m=this.domManager.compileBindingOptions(d,g),n=[],o=m,p=[];n.push(a.router.current.changed.startWith(a.router.current())),"function"==typeof m?(i=m,n.push(this.domManager.expressionToObservable(i,e))):(n.push(this.domManager.expressionToObservable(o.name,e)),o.params&&Object.keys(o.params).forEach(function(a){p.push(a),n.push(h.domManager.expressionToObservable(o.params[a],e))})),f.cleanup.add(Rx.Observable.combineLatest(n,function(b){return a.args2Array(arguments)}).subscribe(function(b){try{{b.shift()}j=a.unwrapProperty(b.shift()),k={};for(var c=0;c<p.length;c++)k[p[c]]=a.unwrapProperty(b[c]);a.toggleCssClass(l,h.router.includes(j,k),"active")}catch(d){a.app.defaultExceptionHandler.onNext(d)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,n=null,m=null,j=null,k=null,o=null,p=null}))},c.prototype.configure=function(a){},c}();!function(a){a.stateActiveBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a,b){this.priority=5,this.domManager=a,this.router=b}return c.prototype.applyBinding=function(c,d,e,f,g){var h=this;(1!==c.nodeType||"a"!==c.tagName.toLowerCase())&&b.throwError("stateRef-binding only operates on anchor-elements!"),null==d&&b.throwError("invalid binding-options!");var i,j,k,l=c,m=this.domManager.compileBindingOptions(d,g),n=[],o=m,p=[];"function"==typeof m?(i=m,n.push(this.domManager.expressionToObservable(i,e))):(n.push(this.domManager.expressionToObservable(o.name,e)),o.params&&Object.keys(o.params).forEach(function(a){p.push(a),n.push(h.domManager.expressionToObservable(o.params[a],e))})),f.cleanup.add(Rx.Observable.combineLatest(n,function(b){return a.args2Array(arguments)}).subscribe(function(b){try{j=a.unwrapProperty(b.shift()),k={};for(var c=0;c<p.length;c++)k[p[c]]=a.unwrapProperty(b[c]);l.href=h.router.uri(j,k)}catch(d){a.app.defaultExceptionHandler.onNext(d)}})),f.cleanup.add(Rx.Observable.fromEvent(l,"click").subscribe(function(a){a.preventDefault(),h.router.go(j,k,{location:!0})})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null,n=null,m=null,j=null,k=null,o=null,p=null}))},c.prototype.configure=function(a){},c}();!function(a){a.stateRefBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";var b,c=function(){function c(a,b){this.priority=1e3,this.controlsDescendants=!0,this.domManager=a,this.router=b}return c.prototype.applyBinding=function(c,d,e,f,g){function h(){k&&(k.dispose(),k=null)}var i=this;1!==c.nodeType&&b.throwError("view-binding only operates on elements!"),null==d&&b.throwError("invalid binding-options!");var j,k,l=c,m=this.domManager.compileBindingOptions(d,g),n=this.domManager.evaluateExpression(m,e);(null==n||"string"!=typeof n)&&b.throwError("views must be named!"),f.cleanup.add(this.router.current.changed.startWith(this.router.current()).subscribe(function(b){try{h(),k=new Rx.CompositeDisposable;var c=i.router.getViewComponent(n);null!=c?a.isEqual(j,c)||(k.add(i.applyTemplate(c.component,c.params,c.animations,l,e,g||a.app).subscribe()),j=c):(k.add(i.applyTemplate(null,null,j?j.animations:{},l,e,g||a.app).subscribe()),j={})}catch(d){a.app.defaultExceptionHandler.onNext(d)}})),f.cleanup.add(Rx.Disposable.create(function(){c=null,d=null,e=null,f=null}))},c.prototype.configure=function(a){},c.prototype.applyTemplate=function(b,c,d,e,f,g){function h(){l.forEach(function(a){k.domManager.cleanNode(a),e.removeChild(a)})}function i(d){f.$componentParams=c;var g=document.createElement("div"),h=a.formatString("component: { name: '{0}', params: $componentParams }",b);g.setAttribute("data-bind",h),null!=d&&d.prepare(g),e.appendChild(g),k.domManager.applyBindings(f,g)}var j,k=this,l=a.nodeChildrenToArray(e),m=[];if(l.length>0){var n;d&&d.leave&&(n="string"==typeof d.leave?g.animation(d.leave):d.leave),n?(n.prepare(l),j=n.run(l).continueWith(function(){return n.complete(l)}).continueWith(h)):j=Rx.Observable.startDeferred(h),m.push(j)}if(null!=b){var o;d&&d.enter&&(o="string"==typeof d.enter?g.animation(d.enter):d.enter),j=Rx.Observable.startDeferred(function(){return i(o)}),o&&(j=j.continueWith(o.run(e.childNodes)).continueWith(function(){return o.complete(e.childNodes)})),m.push(j)}return m.length>1?Rx.Observable.combineLatest(m,a.noop).take(1):1===m.length?m[0].take(1):Rx.Observable["return"](!0)},c}();!function(a){a.viewBindingConstructor=c}(b=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";function b(a,b){return new e(a,b)}var c=/[\-\[\]{}()+?.,\\\^$|#\s]/g,d=/([:*])(\w+)/g,e=function(){function b(a,b){var e=this;this.route=a,this.rules=b,this.params=[];var f=a;"string"==typeof a?(f=f.replace(c,"\\$&"),f=f.replace(d,function(a,b,c){return e.params.push(c),":"===b?"([^/]*)":"(.*)"}),f=new RegExp("^"+f+"$"),this.parse=function(a){var c,d,g=0,h={},i=a.match(f);if(!i)return null;for(;g<e.params.length;){if(c=e.params[g++],d=i[g],b&&c in b&&!e.validateRule(b[c],d))return null;h[c]=d}return h},this.stringify=function(b){b=b||{};var c,e,f=a;for(c in b)e=new RegExp("[:*]"+c+"\\b"),f=f.replace(e,b[c]);return f.replace(d,"")}):(this.parse=function(a){var b=a.match(f);return b&&{captures:b.slice(1)}},this.stringify=function(){return""})}return b.prototype.stripTrailingSlash=function(a){return 0===a.length||"/"===a||a.lastIndexOf("/")!==a.length-1?a:a.substr(0,a.length-1)},Object.defineProperty(b.prototype,"isAbsolute",{get:function(){return 0===this.route.indexOf("/")},enumerable:!0,configurable:!0}),b.prototype.concat=function(b){var c=b,d=this.stripTrailingSlash(this.route),e=this.stripTrailingSlash(c.route),f=null;return c.rules?this.rules?(Object.keys(this.rules).forEach(function(b){c.rules.hasOwnProperty(b)&&a.internal.throwError("route '{0}' and '{1}' have conflicting rule '{2}",d,e,b)}),f=a.extend(this.rules,a.extend(c.rules,{}))):f=a.extend(c.rules,{}):this.rules&&(f=a.extend(this.rules,{})),"/"===d&&(d=""),a.route(d+"/"+e,f)},b.prototype.validateRule=function(a,b){var c=this.toString.call(a).charAt(8);return"R"===c?a.test(b):"F"===c?a(b):a==b},b}();a.route=b}(wx||(wx={}));var wx;!function(a){"use strict";var b=function(){function b(b){var c=this;this.current=a.property(),this.states={},this.pathSeparator=".",this.parentPathDirective="^",this.rootStateName="$",this.validPathRegExp=/^[a-zA-Z]([\w-_]*$)/,this.domManager=b,this.reset(),a.app.history.onPopState.subscribe(function(b){var d=b.state,e=d.stateName;null!=e&&(c.go(e,d.params,{location:!1}),a.app.title(d.title))}),a.app.title.changed.subscribe(function(a){document.title=a,c.replaceHistoryState(c.current(),a)})}return b.prototype.state=function(a){return this.registerStateInternal(a),this},b.prototype.updateCurrentStateParams=function(b){var c=this.current();b(c.params),this.replaceHistoryState(c,a.app.title())},b.prototype.go=function(a,b,d){a=this.mapPath(a),null==this.states[a]&&c.throwError("state '{0}' is not registered",a),this.activateState(a,b,d)},b.prototype.get=function(a){return this.states[a]},b.prototype.is=function(a,b,c){var d=this.current(),e=d.name===a;if(b=b||{},e){var f=Object.keys(d.params),g=Object.keys(b);if(f.length===g.length){for(var h=0;h<g.length;h++)if(d.params[g[h]]!=b[g[h]]){e=!1;break}}else e=!1}return e},b.prototype.includes=function(a,b,c){var d=this.current(),e=0===d.name.indexOf(a);if(b=b||{},e){var f=Object.keys(d.params),g=Object.keys(b);g=g.length<=f.length?g:f;for(var h=0;h<g.length;h++)if(d.params[g[h]]!=b[g[h]]){e=!1;break}}return e},b.prototype.uri=function(a,b){a=this.mapPath(a);var c=this.getAbsoluteRouteForState(a);return null!=c?c.stringify(b):null},b.prototype.reset=function(){this.states={},this.root=this.registerStateInternal({name:this.rootStateName,route:a.route("/")}),this.go(this.rootStateName)},b.prototype.reload=function(){this.go(this.current().name,this.current().params,{force:!0,location:!1})},b.prototype.getViewComponent=function(b){var c=this.current(),d=void 0;if(null!=c.views){var e=c.views[b],f={};if(null!=e){d={},"object"==typeof e?(d.component=e.component,d.params=e.params||{},d.animations=e.animations):(d.component=e,d.params={},d.animations=void 0);var g=this.getViewParameterNamesFromStateConfig(b,d.component);g.forEach(function(a){c.params.hasOwnProperty(a)&&(f[a]=c.params[a])}),d.params=a.extend(f,d.params)}}return d},b.prototype.registerStateInternal=function(b){var d=this,e=b.name.split(this.pathSeparator);return b.name!==this.rootStateName&&e.forEach(function(a){d.validPathRegExp.test(a)||c.throwError("invalid state-path '{0}' (a state-path must start with a character, optionally followed by one or more alphanumeric characters, dashes or underscores)")}),b=a.extend(b,{}),this.states[b.name]=b,null!=b.route?"string"==typeof b.route&&(b.route=a.route(b.route)):b.route=a.route(e[e.length-1]),b.name===this.rootStateName&&(this.root=b),b},b.prototype.pushHistoryState=function(b,c){var d={stateName:b.name,params:b.params,title:null!=c?c:document.title};a.app.history.pushState(d,"",b.uri)},b.prototype.replaceHistoryState=function(b,c){var d={stateName:b.name,params:b.params,title:null!=c?c:document.title};a.app.history.replaceState(d,"",b.uri)},b.prototype.mapPath=function(a){if(0===a.indexOf(this.pathSeparator))return this.current().name+a;if(0===a.indexOf(this.parentPathDirective)){var b=this.current().name;if(b===this.rootStateName)return b;for(var c=b.split(this.pathSeparator),d=c.length-1;d>0;d--){var e=c.slice(0,d).join(this.pathSeparator);if(this.get(e)||this.get(e+a.substr(1)))return a=e+a.substr(1)}return a=this.rootStateName+a.substr(1)}return a},b.prototype.getStateHierarchy=function(b){var c,d=b.split(this.pathSeparator),e="",f=[];b!==this.rootStateName&&f.push(this.root);for(var g=0;g<d.length;g++)g>0?e+=this.pathSeparator+d[g]:e=d[g],c=this.states[e],null==c&&(c={name:e,route:a.route(e)}),f.push(c);return f},b.prototype.getAbsoluteRouteForState=function(a,b){b=null!=b?b:this.getStateHierarchy(a);var c=null;return b.forEach(function(a){if(null!=c){var b=a.route;c=b.isAbsolute?b:c.concat(a.route)}else c=a.route}),c},b.prototype.activateState=function(b,c,d){var e=this.getStateHierarchy(b),f={},g={};e.forEach(function(b){null!=b.views&&a.extend(b.views,f),null!=b.params&&a.extend(b.params,g)}),c&&a.extend(c,g);var h=this.getAbsoluteRouteForState(b,e),i=a.extend(this.states[b],{});i.uri=h.stringify(c),i.views=f,i.params=g;var j=this.current();(d&&d.force||null==j||j.name!==b||!a.isEqual(j.params,i.params))&&(null!=j&&null!=j.views&&null!=i.views&&Object.keys(j.views).forEach(function(a){i.views.hasOwnProperty(a)||(i.views[a]=null)}),d&&d.location&&(2===d.location?this.replaceHistoryState(i,a.app.title()):this.pushHistoryState(i,a.app.title())),null!=j&&j.onLeave&&j.onLeave(this.get(j.name),j.params),this.current(i),i.onEnter&&i.onEnter(this.get(i.name),c))},b.prototype.getViewParameterNamesFromStateConfig=function(b,c){for(var d,e=this.getStateHierarchy(this.current().name),f={},g=[],h=-1,i=e.length;i--;i>=0)if(d=e[i],d.views&&d.views[b]){var j=d.views[b];"object"==typeof j&&(j=j.component),j===c&&(h=i)}return-1!==h&&(d=e[h],e=e.slice(0,h+1),e.forEach(function(b){null!=b.params&&a.extend(b.params,f)}),g=Object.keys(f),g=g.concat(d.route.params)),g},b}();a.router,Object.defineProperty(a,"router",{get:function(){return a.injector.get(a.res.router)}});var c;!function(a){a.routerConstructor=b}(c=a.internal||(a.internal={}))}(wx||(wx={}));var wx;!function(a){"use strict";a.injector.register(a.res.expressionCompiler,a.internal.expressionCompilerConstructor).register(a.res.htmlTemplateEngine,[a.internal.htmlTemplateEngineConstructor],!0).register(a.res.domManager,[a.res.expressionCompiler,a.internal.domManagerConstructor],!0).register(a.res.router,[a.res.domManager,a.internal.routerConstructor],!0).register(a.res.messageBus,[a.internal.messageBusConstructor],!0),a.injector.register("wx.bindings.module",[a.res.domManager,a.internal.moduleBindingConstructor],!0).register("wx.bindings.command",[a.res.domManager,a.internal.commandBindingConstructor],!0).register("wx.bindings.if",[a.res.domManager,a.internal.ifBindingConstructor],!0).register("wx.bindings.with",[a.res.domManager,a.internal.withBindingConstructor],!0).register("wx.bindings.notif",[a.res.domManager,a.internal.notifBindingConstructor],!0).register("wx.bindings.css",[a.res.domManager,a.internal.cssBindingConstructor],!0).register("wx.bindings.attr",[a.res.domManager,a.internal.attrBindingConstructor],!0).register("wx.bindings.style",[a.res.domManager,a.internal.styleBindingConstructor],!0).register("wx.bindings.text",[a.res.domManager,a.internal.textBindingConstructor],!0).register("wx.bindings.html",[a.res.domManager,a.internal.htmlBindingConstructor],!0).register("wx.bindings.visible",[a.res.domManager,a.internal.visibleBindingConstructor],!0).register("wx.bindings.hidden",[a.res.domManager,a.internal.hiddenBindingConstructor],!0).register("wx.bindings.enabled",[a.res.domManager,a.internal.enableBindingConstructor],!0).register("wx.bindings.disabled",[a.res.domManager,a.internal.disableBindingConstructor],!0).register("wx.bindings.foreach",[a.res.domManager,a.internal.forEachBindingConstructor],!0).register("wx.bindings.event",[a.res.domManager,a.internal.eventBindingConstructor],!0).register("wx.bindings.textInput",[a.res.domManager,a.internal.textInputBindingConstructor],!0).register("wx.bindings.checked",[a.res.domManager,a.internal.checkedBindingConstructor],!0).register("wx.bindings.selectedValue",[a.res.domManager,a.internal.selectedValueBindingConstructor],!0).register("wx.bindings.component",[a.res.domManager,a.internal.componentBindingConstructor],!0).register("wx.bindings.value",[a.res.domManager,a.internal.valueBindingConstructor],!0).register("wx.bindings.hasFocus",[a.res.domManager,a.internal.hasFocusBindingConstructor],!0).register("wx.bindings.view",[a.res.domManager,a.res.router,a.internal.viewBindingConstructor],!0).register("wx.bindings.sref",[a.res.domManager,a.res.router,a.internal.stateRefBindingConstructor],!0).register("wx.bindings.sactive",[a.res.domManager,a.res.router,a.internal.stateActiveBindingConstructor],!0),a.injector.register("wx.components.radiogroup",[a.res.htmlTemplateEngine,a.internal.radioGroupComponentConstructor]).register("wx.components.select",[a.res.htmlTemplateEngine,a.internal.selectComponentConstructor]),a.app.binding("module","wx.bindings.module").binding("css","wx.bindings.css").binding("attr","wx.bindings.attr").binding("style","wx.bindings.style").binding("command","wx.bindings.command").binding("if","wx.bindings.if").binding("with","wx.bindings.with").binding("ifnot","wx.bindings.notif").binding("text","wx.bindings.text").binding("html","wx.bindings.html").binding("visible","wx.bindings.visible").binding("hidden","wx.bindings.hidden").binding("disabled","wx.bindings.disabled").binding("enabled","wx.bindings.enabled").binding("foreach","wx.bindings.foreach").binding("event","wx.bindings.event").binding(["textInput","textinput"],"wx.bindings.textInput").binding("checked","wx.bindings.checked").binding("selectedValue","wx.bindings.selectedValue").binding("component","wx.bindings.component").binding("value","wx.bindings.value").binding(["hasFocus","hasfocus"],"wx.bindings.hasFocus").binding("view","wx.bindings.view").binding("sref","wx.bindings.sref").binding(["sactive","state-active"],"wx.bindings.sactive"),a.app.component("wx-radiogroup",{resolve:"wx.components.radiogroup"}).component("wx-select",{resolve:"wx.components.select"})}(wx||(wx={}));var wx;!function(a){a.version="0.9.63"}(wx||(wx={}));