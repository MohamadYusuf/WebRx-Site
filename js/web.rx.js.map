{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 3ce3b56879e4af6f8897","webpack:///./build/src/es5/WebRx.js","webpack:///./build/src/es5/App.js","webpack:///./build/src/es5/Core/Injector.js","webpack:///./build/src/es5/Core/Utils.js","webpack:///./build/src/es5/Core/Reflect.js","webpack:///./build/src/es5/Collections/WeakMap.js","webpack:///./build/src/es5/Core/Oid.js","webpack:///./build/src/es5/Collections/Set.js","webpack:///./build/src/es5/Collections/Map.js","webpack:///./build/src/es5/Core/Events.js","webpack:///./build/src/es5/IID.js","webpack:///./build/src/es5/Core/Resources.js","webpack:///./build/src/es5/Core/Log.js","webpack:///./build/src/es5/Core/Property.js","webpack:///./build/src/es5/Core/Module.js","webpack:///./build/src/es5/Core/ExpressionCompiler.js","webpack:///./build/src/es5/Core/DomManager.js","webpack:///./build/src/es5/Core/Environment.js","webpack:///./build/src/es5/Core/HtmlTemplateEngine.js","webpack:///./build/src/es5/Bindings/Command.js","webpack:///./build/src/es5/Core/Command.js","webpack:///./build/src/es5/Bindings/Module.js","webpack:///./build/src/es5/Bindings/If.js","webpack:///./build/src/es5/Bindings/MultiOneWay.js","webpack:///./build/src/es5/Bindings/BindingBase.js","webpack:///./build/src/es5/Bindings/SingleOneWay.js","webpack:///./build/src/es5/Bindings/ForEach.js","webpack:///./build/src/es5/Core/VirtualChildNodes.js","webpack:///./build/src/es5/Core/RefCountDisposeWrapper.js","webpack:///./build/src/es5/Collections/List.js","webpack:///./build/src/es5/Core/Lazy.js","webpack:///./build/src/es5/Core/ScheduledSubject.js","webpack:///./build/src/es5/Bindings/Event.js","webpack:///./build/src/es5/Bindings/Value.js","webpack:///./build/src/es5/Bindings/HasFocus.js","webpack:///./build/src/es5/Bindings/With.js","webpack:///./build/src/es5/Bindings/Checked.js","webpack:///./build/src/es5/Bindings/KeyPress.js","webpack:///./build/src/es5/Bindings/TextInput.js","webpack:///./build/src/es5/Bindings/SelectedValue.js","webpack:///./build/src/es5/Bindings/Component.js","webpack:///./build/src/es5/Routing/Bindings/StateActive.js","webpack:///./build/src/es5/Routing/Bindings/View.js","webpack:///./build/src/es5/Routing/Bindings/StateRef.js","webpack:///./build/src/es5/Components/Select.js","webpack:///./build/src/es5/Components/RadioGroup.js","webpack:///./build/src/es5/Routing/Router.js","webpack:///./build/src/es5/Routing/RouteMatcher.js","webpack:///./build/src/es5/Core/MessageBus.js","webpack:///./build/src/es5/Version.js","webpack:///./build/src/es5/RxExtensions.js","webpack:///./build/src/es5/Core/Animation.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kC;;;;;;ACxDA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+MAA8M,EAAE;AAChN;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C;AAC9C,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA,0EAAyE,+CAA+C,EAAE,gBAAgB,kDAAkD,EAAE;AAC9L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,mCAAmC;AAC5E,sCAAqC,+BAA+B;AACpE;AACA,oCAAmC;AACnC;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,gC;;;;;;AC5OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,EAAE;AACpC;AACA;AACA;AACA,8CAA6C,8BAA8B;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAAyE,EAAE,QAAQ,EAAE,IAAI,EAAE;AAC3F;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,YAAY;AACzD;AACA,oCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,uEAAsE,EAAE,OAAO,EAAE;AACjF;AACA;AACA;AACA,mCAAkC,EAAE;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yHAAwH,EAAE;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAiE,EAAE,QAAQ,EAAE,IAAI,EAAE;AACnF;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,sDAAqD,uBAAuB,EAAE;AAC9E,qC;;;;;;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC,6BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,IAAI;AACd,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,IAAI;AACd,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK,oBAAoB,uCAAuC,EAAE;AAClE;AACA;AACA;AACA;AACA,WAAU,IAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,IAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,IAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,IAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,IAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,SAAS;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB,WAAU,MAAM;AAChB;AACA;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA,sBAAqB,KAAK;AAC1B;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,WAAU,KAAK;AACf,WAAU,QAAQ;AAClB,WAAU,QAAQ;AAClB;AACA;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,KAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,eAAe;AACzB,WAAU,WAAW;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB,YAAW,mBAAmB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,WAAU,IAAI;AACd,YAAW,iBAAiB;AAC5B;AACA;AACA,iCAAgC,oBAAoB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,iCAAiC,EAAE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,kC;;;;;;ACxeA;AACA;AACA;AACA;AACA;AACA;AACA,gEAA+D;AAC/D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,qCAAoC;AACpC,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,qCAAoC;AACpC,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iGAAgG;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,qCAAoC;AACpC,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAAyE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,qCAAoC;AACpC,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,qCAAoC;AACpC,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,qCAAoC;AACpC,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,qCAAoC;AACpC,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,qCAAoC;AACpC,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,qCAAoC;AACpC,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,QAAQ;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,QAAQ;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,QAAQ;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,qBAAqB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,wBAAwB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,uBAAuB,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA,0DAAyD,iBAAiB,EAAE,uBAAuB,UAAU,EAAE;AAC/G,wBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA,oC;;;;;;AC1uBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA,EAAC;AACD;AACA;AACA;AACA;AACA,WAAU,QAAQ;AAClB,YAAW,kBAAkB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oC;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,IAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,gC;;;;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,WAAU,QAAQ;AAClB,YAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,uBAAuB,EAAE;AACvD;AACA;AACA;AACA,gC;;;;;;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,UAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,wBAAuB,UAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,WAAU,QAAQ;AAClB,YAAW,kBAAkB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gC;;;;;;AC5GA;AACA;AACA;AACA;AACA,yFAAwF,QAAQ;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,mC;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,gC;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;ACVA;AACA;AACA;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gC;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,EAAE;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qC;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,oCAAoC,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,kCAAkC,eAAe,EAAE,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAuF,0CAA0C,EAAE;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB,YAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB,YAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,kBAAkB,EAAE;AAC9D,+CAA8C,eAAe,EAAE;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,iCAAiC,eAAe,EAAE,EAAE;AAC/F;AACA;AACA,mC;;;;;;ACrTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB,YAAW,aAAa;AACxB;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,eAAe;AACpD;AACA;AACA;AACA;AACA;AACA,+CAA8C,mCAAmC,IAAI,mCAAmC;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,qCAAqC;AAChE,4BAA2B,oBAAoB;AAC/C;AACA;AACA,iCAAgC,KAAK;AACrC;AACA,MAAK;AACL;AACA;AACA,6BAA4B,mEAAmE;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2HAA0H,EAAE;AAC5H;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iHAAgH,EAAE;AAClH;AACA;AACA,uHAAsH,EAAE;AACxH;AACA;AACA,mHAAkH,EAAE;AACpH;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,aAAa,EAAE;AACxC,0BAAyB,aAAa,EAAE;AACxC,2BAA0B,cAAc,EAAE;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL,yCAAwC,0CAA0C,EAAE;AACpF,yCAAwC,0CAA0C,EAAE;AACpF,yCAAwC,0CAA0C,EAAE;AACpF,yCAAwC,0CAA0C,EAAE;AACpF;AACA,2CAA0C,4CAA4C,EAAE;AACxF,2CAA0C,4CAA4C,EAAE;AACxF,0CAAyC,4CAA4C,EAAE;AACvF,0CAAyC,4CAA4C,EAAE;AACvF,yCAAwC,0CAA0C,EAAE;AACpF,yCAAwC,0CAA0C,EAAE;AACpF,0CAAyC,2CAA2C,EAAE;AACtF,0CAAyC,2CAA2C,EAAE;AACtF,0CAAyC,2CAA2C,EAAE;AACtF,0CAAyC,2CAA2C,EAAE;AACtF,yCAAwC,0CAA0C,EAAE;AACpF,2CAA0C,YAAY;AACtD,yCAAwC,uDAAuD,EAAE;AACjG,sCAAqC,yBAAyB;AAC9D;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAwE;AACxE,gCAA+B,qBAAqB;AACpD;AACA;AACA;AACA;AACA,mCAAkC,KAAK;AACvC;AACA;AACA;AACA,yDAAwD,kBAAkB;AAC1E,kBAAiB;AACjB,+BAA8B;AAC9B;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,wCAAwC;AAC9E;AACA;AACA;AACA,uCAAsC,wCAAwC;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAoD,EAAE,WAAW,EAAE,iBAAiB,EAAE;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA4C,EAAE;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,YAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAkE,EAAE,GAAG,EAAE,YAAY,EAAE,qBAAqB,EAAE,gBAAgB,EAAE;AAChI;AACA;AACA;AACA,wEAAuE,EAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,wDAAuD,UAAU;AACjE;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,uBAAuB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,4BAA2B,uBAAuB;AAClD;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,yCAAwC;AACxC;AACA,iCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,yBAAyB;AACzD;AACA;AACA;AACA,cAAa;AACb;AACA,wBAAuB;AACvB;AACA;AACA,4BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,EAAC;AACD,kBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,oBAAoB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,oBAAoB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA0D,+BAA+B,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA,gEAA+D,+BAA+B,EAAE;AAChG,kBAAiB;AACjB;AACA;AACA;AACA,MAAK;AACL,uBAAsB;AACtB;AACA;AACA,iDAAgD;AAChD;AACA;AACA;AACA;AACA,6FAA4F;AAC5F,MAAK;AACL,uBAAsB;;AAEtB;AACA,6DAA4D;AAC5D;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+C;;;;;;AC1lCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,4BAA4B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,4BAA4B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA2D,uBAAuB,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,mCAAmC,wDAAwD,EAAE;AACpI;AACA,wCAAuC,0BAA0B;AACjE,2BAA0B,8CAA8C;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD,EAAE;AACpD,yBAAwB;AACxB,cAAa;AACb;AACA,4CAA2C,8DAA8D,EAAE;AAC3G;AACA,oDAAmD,sCAAsC,EAAE,oBAAoB,4BAA4B,EAAE;AAC7I;AACA,+CAA8C,EAAE;AAChD;AACA;AACA;AACA,4BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B,+BAA+B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,cAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,WAAU,IAAI;AACd,WAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA,uC;;;;;;AC/fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA,EAAC;AACD;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,uCAAsC,YAAY,EAAE;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAiD;AACjD;AACA,wC;;;;;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA,sLAAqL;AACrL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,WAAU,SAAS;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,+C;;;;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAkF,UAAU,yBAAyB,EAAE,EAAE;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,oC;;;;;;ACxGA;AACA;AACA;AACA;AACA,+DAA8D,yBAAyB,EAAE;AACzF,+DAA8D,sCAAsC,EAAE;AACtG,+DAA8D,sCAAsC,EAAE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAwF,kBAAkB,EAAE;AAC5G;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,mCAAkC,EAAE,gBAAgB,qDAAqD,EAAE,eAAe,qDAAqD,EAAE;AACjL,mCAAkC,sCAAsC,EAAE,gBAAgB,yCAAyC,EAAE;AACrI;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA,EAAC,uDAAuD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA,kDAAiD,gCAAgC,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,qBAAqB,EAAE;AACrD;AACA,+BAA8B,kCAAkC,EAAE;AAClE;AACA;AACA;AACA,qFAAoF,+BAA+B,EAAE;AACrH;AACA,yBAAwB,uBAAuB;AAC/C;AACA;AACA,qDAAoD,UAAU,EAAE;AAChE,MAAK;AACL,+HAA8H,wBAAwB,EAAE;AACxJ;AACA,yCAAwC;AACxC;AACA,MAAK,EAAE,EAAE;AACT;AACA;AACA;AACA;AACA;AACA,WAAU,IAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oC;;;;;;ACzOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAwE,UAAU,EAAE;AACpF;AACA;AACA,qEAAoE,+BAA+B,EAAE;AACrG,mFAAkF,sCAAsC,EAAE;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA,2DAA0D,wBAAwB,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,mC;;;;;;AChHA;AACA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD,6CAA6C,EAAE;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD,0BAA0B,EAAE;AAC/E;AACA;AACA,4BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA,gDAA+C,uCAAuC,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,+B;;;;;;AC7JA;AACA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAAyD,iBAAiB,EAAE,uBAAuB,UAAU,EAAE;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAA+D,iBAAiB,EAAE,uBAAuB,UAAU,EAAE;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,mBAAmB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,wC;;;;;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,+BAA+B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,wC;;;;;;AC1IA;AACA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,yC;;;;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA;AACA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,uCAAuC,EAAE;AACpF;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,uCAAuC,EAAE;AACpF;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,oBAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,uCAAuC,EAAE;AACxF;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,oBAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,uCAAuC,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,uCAAuC,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA,kCAAiC,sBAAsB;AACvD;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,8BAA6B,cAAc;AAC3C;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,cAAc;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,8BAA6B,cAAc;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,oC;;;;;;AChZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,kCAAkC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA,4BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,cAAc;AACzC;AACA;AACA;AACA;AACA,gCAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,cAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,8C;;;;;;AC7FA;AACA;AACA;AACA;AACA,0CAAyC,qBAAqB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,mD;;;;;;ACxBA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,+DAA8D,yBAAyB,EAAE;AACzF,+DAA8D,sCAAsC,EAAE;AACtG,+DAA8D,sCAAsC,EAAE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,4BAA4B;AAC1E,oCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,uFAAsF;AACtF,4CAA2C,EAAE,iBAAiB,iCAAiC,EAAE;AACjG,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAiD,2CAA2C,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,+CAA8C;AAC9C;AACA,iEAAgE,2BAA2B;AAC3F;AACA;AACA;AACA,2DAA0D,2BAA2B;AACrF;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qEAAoE,4BAA4B;AAChG,sBAAqB;AACrB;AACA;AACA;AACA,2DAA0D,4BAA4B;AACtF;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,wBAAwB,EAAE;AAClE,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,uEAAsE,4BAA4B;AAClG,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,iEAAgE,4BAA4B;AAC5F,sBAAqB;AACrB;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAAyD,6BAA6B;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD,6BAA6B;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,4BAA4B;AAC1E,oCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA,wEAAuE,yBAAyB,EAAE;AAClG,kEAAiE,yBAAyB,EAAE;AAC5F,0EAAyE,yBAAyB,EAAE;AACpG,oEAAmE,yBAAyB,EAAE;AAC9F,0EAAyE,yBAAyB,EAAE;AACpG,oEAAmE,yBAAyB,EAAE;AAC9F;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT,wEAAuE,yBAAyB,EAAE;AAClG,kEAAiE,yBAAyB,EAAE;AAC5F,qFAAoF,cAAc,EAAE,0CAA0C,cAAc,EAAE,0CAA0C,cAAc,EAAE,wCAAwC,cAAc,EAAE,0CAA0C,aAAa,EAAE;AACzU;AACA;AACA,4FAA2F,cAAc,EAAE,gDAAgD,cAAc,EAAE,gDAAgD,cAAc,EAAE,8CAA8C,cAAc,EAAE,gDAAgD,aAAa,EAAE;AACxW;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,kBAAkB,EAAE;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAuD,6BAA6B;AACpF;AACA;AACA,kDAAiD,6BAA6B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAAyD,6BAA6B;AACtF;AACA;AACA,oDAAmD,6BAA6B;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,uEAAuE,EAAE;AAC3G;AACA,mCAAkC,uEAAuE,EAAE;AAC3G,4EAA2E,6CAA6C,EAAE,0BAA0B,iDAAiD,EAAE,+BAA+B,6CAA6C,EAAE,0BAA0B,gDAAgD,EAAE;AACjW;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,wGAAuG,kBAAkB,EAAE;AAC3H,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD,UAAU,EAAE;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT,oEAAmE,iBAAiB,EAAE,oDAAoD,+BAA+B,EAAE;AAC3K;AACA,iGAAgG,wBAAwB,EAAE;AAC1H;AACA;AACA;AACA;AACA,wBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,uCAAuC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,uCAAuC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,WAAU,SAAS;AACnB,WAAU,aAAa;AACvB;AACA;AACA,2CAA0C,4BAA4B;AACtE,gCAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA,WAAU,IAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iC;;;;;;ACtiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA,EAAC;AACD;AACA,iC;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,6C;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,kC;;;;;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,YAAW,KAAK;AAChB,YAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,KAAK;AAChB,YAAW,IAAI;AACf,YAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kC;;;;;;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,+EAA8E,aAAa,EAAE;AAC7F,iFAAgF,aAAa,EAAE;AAC/F,8EAA6E,cAAc,EAAE;AAC7F,kFAAiF,cAAc,EAAE;AACjG;AACA;AACA;AACA,EAAC;AACD;AACA,qC;;;;;;ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,iC;;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,oC;;;;;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,kBAAkB,EAAE;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,cAAa;AACb;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA0D,gDAAgD,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,2DAA0D,gDAAgD,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAsD,gDAAgD,EAAE;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,qC;;;;;;AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA0F,iCAAiC,EAAE;AAC7H;AACA;AACA;AACA;AACA,+FAA8F,mCAAmC,EAAE;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAqE;AACrE,kEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,sC;;;;;;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,0C;;;;;;AC1KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAoD,EAAE;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,sC;;;;;;AC1IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kFAAiF,sCAAsC,EAAE;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,uBAAuB;AACtD;AACA;AACA;AACA,uEAAsE,iBAAiB,EAAE,uBAAuB,UAAU,EAAE;AAC5H;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,wC;;;;;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6KAA4K;AAC5K;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6DAA4D,SAAS,EAAE,6BAA6B;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,6CAA6C,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA2D,6CAA6C,EAAE;AAC1G;AACA;AACA,gDAA+C,+CAA+C,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,iC;;;;;;AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,kFAAiF,sCAAsC,EAAE;AACzH;AACA;AACA;AACA;AACA;AACA,gCAA+B,uBAAuB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,sDAAqD,iBAAiB;AACtE,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,qC;;;;;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAwD,EAAE,sBAAsB,EAAE;AAClF;AACA;AACA;AACA;AACA,wBAAuB,0BAA0B,4BAA4B,GAAG;AAChF;AACA;AACA,4BAA2B,gDAAgD;AAC3E;AACA;AACA,yBAAwB,kCAAkC;AAC1D;AACA;AACA;AACA,yBAAwB,iCAAiC;AACzD;AACA;AACA;AACA,yBAAwB,6CAA6C;AACrE;AACA;AACA;AACA,yBAAwB,iCAAiC;AACzD;AACA;AACA;AACA,yBAAwB,kCAAkC;AAC1D;AACA;AACA;AACA,4BAA2B,uBAAuB,6BAA6B,+BAA+B,EAAE,kBAAkB,GAAG;AACrI;AACA,4BAA2B,mDAAmD;AAC9E;AACA,4BAA2B,iDAAiD;AAC5E;AACA;AACA,6BAA4B,oDAAoD;AAChF;AACA;AACA;AACA,gCAA+B,uBAAuB,iCAAiC,+BAA+B,EAAE,kBAAkB,GAAG;AAC7I;AACA,wDAAuD,+BAA+B,EAAE;AACxF,gEAA+D,+BAA+B,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,mC;;;;;;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAqD,EAAE;AACvD;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAAyD,EAAE,kCAAkC,EAAE,IAAI,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA,wBAAuB,0BAA0B,4BAA4B,GAAG;AAChF;AACA;AACA,4BAA2B,uBAAuB,6BAA6B,+BAA+B,EAAE,kBAAkB,GAAG;AACrI;AACA,4BAA2B,mDAAmD;AAC9E;AACA,yBAAwB,0CAA0C;AAClE;AACA;AACA,gCAA+B,wDAAwD;AACvF;AACA;AACA;AACA,kFAAiF,EAAE,SAAS,OAAO,EAAE,EAAE;AACvG,6BAA4B,uDAAuD;AACnF;AACA;AACA;AACA,6BAA4B,oDAAoD;AAChF;AACA;AACA;AACA,gCAA+B,uBAAuB,iCAAiC,+BAA+B,EAAE,kBAAkB,GAAG;AAC7I;AACA,wDAAuD,+BAA+B,EAAE;AACxF,gEAA+D,+BAA+B,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,uC;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA2D,kBAAkB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,EAAE;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,uBAAuB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,uBAAuB;AAC/D;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,2CAA0C,GAAG,4BAA4B;AACzE;AACA;AACA;AACA,sDAAqD;AACrD;AACA;AACA;AACA;AACA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA,8CAA6C,4BAA4B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,yCAAyC;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA6D,EAAE;AAC/D;AACA,cAAa;AACb;AACA;AACA;AACA,yCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,uDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,mC;;;;;;AChZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC;AACnC;AACA;AACA;AACA,2CAA0C,WAAW;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAoD,EAAE,QAAQ,EAAE,0BAA0B,EAAE;AAC5F;AACA,kBAAiB;AACjB,kFAAiF;AACjF;AACA;AACA,uDAAsD;AACtD;AACA;AACA;AACA,kDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA,yC;;;;;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,uC;;;;;;AC3CA;AACA,oC;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA;AACA;AACA,WAAU,EAAE;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK,gBAAgB,4CAA4C,EAAE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,YAAY,EAAE;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAqD,yBAAyB,EAAE;AAChF,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,yC;;;;;;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,yBAAyB,EAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,2BAA2B,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA0E,uBAAuB,EAAE;AACnG,UAAS;AACT;AACA;AACA;AACA;AACA,4CAA2C,4BAA4B,EAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA6D,iBAAiB,EAAE,uBAAuB,UAAU,EAAE;AACnH;AACA;AACA;AACA,iDAAgD,SAAS,qBAAqB,EAAE;AAChF;AACA;AACA;AACA;AACA,kDAAiD,cAAc,EAAE,oBAAoB,cAAc,EAAE;AACrG,qDAAoD,2BAA2B,EAAE,oBAAoB,cAAc,EAAE;AACrH;AACA;AACA;AACA,gDAA+C,wEAAwE,EAAE;AACzH;AACA,gDAA+C,4EAA4E,EAAE;AAC7H;AACA;AACA;AACA;AACA,kDAAiD,iBAAiB,EAAE,uBAAuB,UAAU,EAAE;AACvG;AACA;AACA;AACA,wCAAuC,SAAS,qBAAqB,EAAE;AACvE;AACA;AACA;AACA;AACA,4CAA2C,cAAc,EAAE,oBAAoB,cAAc,EAAE;AAC/F,+CAA8C,2BAA2B,EAAE,oBAAoB,cAAc,EAAE;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,oDAAmD,uEAAuE,EAAE;AAC5H;AACA,oDAAmD,2EAA2E,EAAE;AAChI,cAAa;AACb;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,gEAA+D,iBAAiB,EAAE,uBAAuB,UAAU,EAAE;AACrH;AACA;AACA;AACA,sDAAqD,SAAS,qBAAqB,EAAE;AACrF;AACA;AACA;AACA;AACA,0DAAyD,cAAc,EAAE,oBAAoB,cAAc,EAAE;AAC7G,6DAA4D,2BAA2B,EAAE,oBAAoB,cAAc,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,4EAA4E,EAAE;AACzH;AACA,4CAA2C,gFAAgF,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC","file":"web.rx.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"wx\"] = factory();\n\telse\n\t\troot[\"wx\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3ce3b56879e4af6f8897\n **/","// WebRx's API-Surface\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nvar App_1 = require(\"./App\");\r\nexports.app = App_1.app;\r\nexports.router = App_1.router;\r\nexports.messageBus = App_1.messageBus;\r\nvar Module_1 = require(\"./Core/Module\");\r\nexports.module = Module_1.module;\r\n__export(require(\"./Core/Utils\"));\r\nvar Property_1 = require(\"./Core/Property\");\r\nexports.property = Property_1.property;\r\nvar DomManager_1 = require(\"./Core/DomManager\");\r\nexports.applyBindings = DomManager_1.applyBindings;\r\nexports.cleanNode = DomManager_1.cleanNode;\r\nvar Command_1 = require(\"./Core/Command\");\r\nexports.command = Command_1.command;\r\nexports.asyncCommand = Command_1.asyncCommand;\r\nexports.combinedCommand = Command_1.combinedCommand;\r\nexports.isCommand = Command_1.isCommand;\r\nvar Animation_1 = require(\"./Core/Animation\");\r\nexports.animation = Animation_1.animation;\r\nvar Oid_1 = require(\"./Core/Oid\");\r\nexports.getOid = Oid_1.getOid;\r\nvar List_1 = require(\"./Collections/List\");\r\nexports.list = List_1.list;\r\nexports.isList = List_1.isList;\r\nvar Map_1 = require(\"./Collections/Map\");\r\nexports.createMap = Map_1.createMap;\r\nvar Set_1 = require(\"./Collections/Set\");\r\nexports.createSet = Set_1.createSet;\r\nexports.setToArray = Set_1.setToArray;\r\nvar WeakMap_1 = require(\"./Collections/WeakMap\");\r\nexports.createWeakMap = WeakMap_1.createWeakMap;\r\nvar Lazy_1 = require(\"./Core/Lazy\");\r\nexports.Lazy = Lazy_1.default;\r\nvar VirtualChildNodes_1 = require(\"./Core/VirtualChildNodes\");\r\nexports.VirtualChildNodes = VirtualChildNodes_1.default;\r\nvar RouteMatcher_1 = require(\"./Routing/RouteMatcher\");\r\nexports.route = RouteMatcher_1.route;\r\nvar Value_1 = require(\"./Bindings/Value\");\r\nexports.getNodeValue = Value_1.getNodeValue;\r\nexports.setNodeValue = Value_1.setNodeValue;\r\nvar Injector_1 = require(\"./Core/Injector\");\r\nexports.injector = Injector_1.injector;\r\nvar IID_1 = require(\"./IID\");\r\nexports.IID = IID_1.default;\r\nvar BindingBase_1 = require(\"./Bindings/BindingBase\");\r\nexports.SingleOneWayBindingBase = BindingBase_1.SingleOneWayBindingBase;\r\nexports.MultiOneWayBindingBase = BindingBase_1.MultiOneWayBindingBase;\r\n// re-exports\r\nvar res = require(\"./Core/Resources\");\r\nexports.res = res;\r\nvar env = require(\"./Core/Environment\");\r\nexports.env = env;\r\n//# sourceMappingURL=WebRx.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/WebRx.js\n ** module id = 0\n ** module chunks = 0\n **/","/// <reference path=\"./Interfaces.ts\" />\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    __.prototype = b.prototype;\r\n    d.prototype = new __();\r\n};\r\nvar Injector_1 = require(\"./Core/Injector\");\r\nvar Utils_1 = require(\"./Core/Utils\");\r\nvar res = require(\"./Core/Resources\");\r\nvar log = require(\"./Core/Log\");\r\nvar Property_1 = require(\"./Core/Property\");\r\nvar Module_1 = require(\"./Core/Module\");\r\nvar ExpressionCompiler = require(\"./Core/ExpressionCompiler\");\r\nvar DomManager_1 = require(\"./Core/DomManager\");\r\nvar HtmlTemplateEngine_1 = require(\"./Core/HtmlTemplateEngine\");\r\nvar Command_1 = require(\"./Bindings/Command\");\r\nvar Module_2 = require(\"./Bindings/Module\");\r\nvar If_1 = require(\"./Bindings/If\");\r\nvar MultiOneWay_1 = require(\"./Bindings/MultiOneWay\");\r\nvar SingleOneWay_1 = require(\"./Bindings/SingleOneWay\");\r\nvar ForEach_1 = require(\"./Bindings/ForEach\");\r\nvar Event_1 = require(\"./Bindings/Event\");\r\nvar Value_1 = require(\"./Bindings/Value\");\r\nvar HasFocus_1 = require(\"./Bindings/HasFocus\");\r\nvar With_1 = require(\"./Bindings/With\");\r\nvar Checked_1 = require(\"./Bindings/Checked\");\r\nvar KeyPress_1 = require(\"./Bindings/KeyPress\");\r\nvar TextInput_1 = require(\"./Bindings/TextInput\");\r\nvar SelectedValue_1 = require(\"./Bindings/SelectedValue\");\r\nvar Component_1 = require(\"./Bindings/Component\");\r\nvar StateActive_1 = require(\"./Routing/Bindings/StateActive\");\r\nvar View_1 = require(\"./Routing/Bindings/View\");\r\nvar StateRef_1 = require(\"./Routing/Bindings/StateRef\");\r\nvar Select_1 = require(\"./Components/Select\");\r\nvar RadioGroup_1 = require(\"./Components/RadioGroup\");\r\nvar Router_1 = require(\"./Routing/Router\");\r\nvar MessageBus_1 = require(\"./Core/MessageBus\");\r\nvar Version_1 = require(\"./Version\");\r\n// make sure RxExtensions get installed\r\nvar RxExtensions_1 = require(\"./RxExtensions\");\r\nRxExtensions_1.install();\r\n\"use strict\";\r\nvar App = (function (_super) {\r\n    __extends(App, _super);\r\n    function App() {\r\n        _super.call(this, \"app\");\r\n        /// <summary>\r\n        /// This Observer is signalled whenever an object that has a\r\n        /// ThrownExceptions property doesn't Subscribe to that Observable. Use\r\n        /// Observer.Create to set up what will happen - the default is to crash\r\n        /// the application with an error message.\r\n        /// </summary>\r\n        this.defaultExceptionHandler = Rx.Observer.create(function (ex) {\r\n            if (!Utils_1.isInUnitTest()) {\r\n                log.error(\"An onError occurred on an object (usually a computedProperty) that would break a binding or command. To prevent this, subscribe to the thrownExceptions property of your objects: {0}\", ex);\r\n            }\r\n        });\r\n        this.title = Property_1.property(document.title);\r\n        this.version = Version_1.version;\r\n        if (!Utils_1.isInUnitTest()) {\r\n            this.history = this.createHistory();\r\n        }\r\n        else {\r\n            this.history = window[\"createMockHistory\"]();\r\n        }\r\n    }\r\n    Object.defineProperty(App.prototype, \"mainThreadScheduler\", {\r\n        /// <summary>\r\n        /// MainThreadScheduler is the scheduler used to schedule work items that\r\n        /// should be run \"on the UI thread\". In normal mode, this will be\r\n        /// DispatcherScheduler, and in Unit Test mode this will be Immediate,\r\n        /// to simplify writing common unit tests.\r\n        /// </summary>\r\n        get: function () {\r\n            return this._unitTestMainThreadScheduler || this._mainThreadScheduler\r\n                || Rx.Scheduler.currentThread; // OW: return a default if schedulers haven't been setup by in\r\n        },\r\n        set: function (value) {\r\n            if (Utils_1.isInUnitTest()) {\r\n                this._unitTestMainThreadScheduler = value;\r\n                this._mainThreadScheduler = this._mainThreadScheduler || value;\r\n            }\r\n            else {\r\n                this._mainThreadScheduler = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(App.prototype, \"templateEngine\", {\r\n        get: function () {\r\n            if (!this._templateEngine) {\r\n                this._templateEngine = Injector_1.injector.get(res.templateEngine);\r\n            }\r\n            return this._templateEngine;\r\n        },\r\n        set: function (newVal) {\r\n            this._templateEngine = newVal;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(App.prototype, \"router\", {\r\n        get: function () {\r\n            if (!this._router) {\r\n                this._router = Injector_1.injector.get(res.router);\r\n            }\r\n            return this._router;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    App.prototype.createHistory = function () {\r\n        // inherit default implementation\r\n        var result = {\r\n            back: window.history.back.bind(window.history),\r\n            forward: window.history.forward.bind(window.history),\r\n            //go: window.history.go,\r\n            pushState: window.history.pushState.bind(window.history),\r\n            replaceState: window.history.replaceState.bind(window.history),\r\n            getSearchParameters: function (query) {\r\n                query = query || result.location.search.substr(1);\r\n                if (query) {\r\n                    var result_1 = {};\r\n                    var params = query.split(\"&\");\r\n                    for (var i = 0; i < params.length; i++) {\r\n                        var tmp = params[i].split(\"=\");\r\n                        result_1[tmp[0]] = decodeURIComponent(tmp[1]);\r\n                    }\r\n                    return result_1;\r\n                }\r\n                return {};\r\n            }\r\n        };\r\n        Object.defineProperty(result, \"length\", {\r\n            get: function () {\r\n                return window.history.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(result, \"state\", {\r\n            get: function () {\r\n                return window.history.state;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(result, \"location\", {\r\n            get: function () {\r\n                return window.location;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        // enrich with observable\r\n        result.onPopState = Rx.Observable.fromEventPattern(function (h) { return window.addEventListener(\"popstate\", h); }, function (h) { return window.removeEventListener(\"popstate\", h); })\r\n            .publish()\r\n            .refCount();\r\n        return result;\r\n    };\r\n    App.prototype.register = function () {\r\n        Injector_1.injector.register(res.app, this) // register with injector\r\n            .register(res.expressionCompiler, ExpressionCompiler)\r\n            .register(res.templateEngine, [HtmlTemplateEngine_1.default], true)\r\n            .register(res.domManager, [res.expressionCompiler, res.app, DomManager_1.DomManager], true)\r\n            .register(res.router, [res.domManager, res.app, Router_1.Router], true)\r\n            .register(res.messageBus, [MessageBus_1.default], true);\r\n        Injector_1.injector.register(\"bindings.module\", [res.domManager, res.app, Module_2.default], true)\r\n            .register(\"bindings.command\", [res.domManager, res.app, Command_1.default], true)\r\n            .register(\"bindings.if\", [res.domManager, res.app, If_1.IfBinding], true)\r\n            .register(\"bindings.with\", [res.domManager, res.app, With_1.default], true)\r\n            .register(\"bindings.notif\", [res.domManager, res.app, If_1.NotIfBinding], true)\r\n            .register(\"bindings.css\", [res.domManager, res.app, MultiOneWay_1.CssBinding], true)\r\n            .register(\"bindings.attr\", [res.domManager, res.app, MultiOneWay_1.AttrBinding], true)\r\n            .register(\"bindings.style\", [res.domManager, res.app, MultiOneWay_1.StyleBinding], true)\r\n            .register(\"bindings.text\", [res.domManager, res.app, SingleOneWay_1.TextBinding], true)\r\n            .register(\"bindings.html\", [res.domManager, res.app, SingleOneWay_1.HtmlBinding], true)\r\n            .register(\"bindings.visible\", [res.domManager, res.app, SingleOneWay_1.VisibleBinding], true)\r\n            .register(\"bindings.hidden\", [res.domManager, res.app, SingleOneWay_1.HiddenBinding], true)\r\n            .register(\"bindings.enabled\", [res.domManager, res.app, SingleOneWay_1.EnableBinding], true)\r\n            .register(\"bindings.disabled\", [res.domManager, res.app, SingleOneWay_1.DisableBinding], true)\r\n            .register(\"bindings.foreach\", [res.domManager, res.app, ForEach_1.default], true)\r\n            .register(\"bindings.event\", [res.domManager, res.app, Event_1.default], true)\r\n            .register(\"bindings.keyPress\", [res.domManager, res.app, KeyPress_1.default], true)\r\n            .register(\"bindings.textInput\", [res.domManager, res.app, TextInput_1.default], true)\r\n            .register(\"bindings.checked\", [res.domManager, res.app, Checked_1.default], true)\r\n            .register(\"bindings.selectedValue\", [res.domManager, res.app, SelectedValue_1.default], true)\r\n            .register(\"bindings.component\", [res.domManager, res.app, Component_1.default], true)\r\n            .register(\"bindings.value\", [res.domManager, res.app, Value_1.default], true)\r\n            .register(\"bindings.hasFocus\", [res.domManager, res.app, HasFocus_1.default], true)\r\n            .register(\"bindings.view\", [res.domManager, res.router, res.app, View_1.default], true)\r\n            .register(\"bindings.sref\", [res.domManager, res.router, res.app, StateRef_1.default], true)\r\n            .register(\"bindings.sactive\", [res.domManager, res.router, res.app, StateActive_1.default], true);\r\n        Injector_1.injector.register(\"components.radiogroup\", [res.templateEngine, RadioGroup_1.default])\r\n            .register(\"components.select\", [res.templateEngine, Select_1.default]);\r\n        // initialize module\r\n        this.binding(\"module\", \"bindings.module\")\r\n            .binding(\"css\", \"bindings.css\")\r\n            .binding(\"attr\", \"bindings.attr\")\r\n            .binding(\"style\", \"bindings.style\")\r\n            .binding(\"command\", \"bindings.command\")\r\n            .binding(\"if\", \"bindings.if\")\r\n            .binding(\"with\", \"bindings.with\")\r\n            .binding(\"ifnot\", \"bindings.notif\")\r\n            .binding(\"text\", \"bindings.text\")\r\n            .binding(\"html\", \"bindings.html\")\r\n            .binding(\"visible\", \"bindings.visible\")\r\n            .binding(\"hidden\", \"bindings.hidden\")\r\n            .binding(\"disabled\", \"bindings.disabled\")\r\n            .binding(\"enabled\", \"bindings.enabled\")\r\n            .binding(\"foreach\", \"bindings.foreach\")\r\n            .binding(\"event\", \"bindings.event\")\r\n            .binding([\"keyPress\", \"keypress\"], \"bindings.keyPress\")\r\n            .binding([\"textInput\", \"textinput\"], \"bindings.textInput\")\r\n            .binding(\"checked\", \"bindings.checked\")\r\n            .binding(\"selectedValue\", \"bindings.selectedValue\")\r\n            .binding(\"component\", \"bindings.component\")\r\n            .binding(\"value\", \"bindings.value\")\r\n            .binding([\"hasFocus\", \"hasfocus\"], \"bindings.hasFocus\")\r\n            .binding(\"view\", \"bindings.view\")\r\n            .binding([\"sref\", \"stateRef\", \"stateref\"], \"bindings.sref\")\r\n            .binding([\"sactive\", \"stateActive\", \"stateactive\"], \"bindings.sactive\");\r\n        this.component(\"wx-radiogroup\", { resolve: \"components.radiogroup\" })\r\n            .component(\"wx-select\", { resolve: \"components.select\" });\r\n        // register with module-registry\r\n        Module_1.modules[\"app\"] = { instance: this };\r\n    };\r\n    return App;\r\n})(Module_1.Module);\r\nvar _app = new App();\r\nexports.app = _app;\r\n_app.register();\r\nexports.router = Injector_1.injector.get(res.router);\r\nexports.messageBus = Injector_1.injector.get(res.messageBus);\r\n//# sourceMappingURL=App.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/App.js\n ** module id = 1\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar res = require(\"./Resources\");\r\n\"use strict\";\r\n/**\r\n* Simple IoC & Service Locator\r\n*/\r\nvar Injector = (function () {\r\n    function Injector() {\r\n        //////////////////////////////////\r\n        // Implementation\r\n        this.registrations = {};\r\n    }\r\n    Injector.prototype.register = function () {\r\n        var key = arguments[0];\r\n        var val = arguments[1];\r\n        var isSingleton = arguments[2];\r\n        var factory;\r\n        if (this.registrations.hasOwnProperty(key))\r\n            Utils_1.throwError(\"'{0}' is already registered\", key);\r\n        if (Utils_1.isFunction(val)) {\r\n            // second overload\r\n            // it's a factory function\r\n            factory = function (args, deps) { return val.apply(null, args); };\r\n        }\r\n        else if (Array.isArray(val)) {\r\n            // first overload\r\n            // array assumed to be inline array notation with constructor\r\n            var self_1 = this;\r\n            var ctor = val.pop();\r\n            var dependencies = val;\r\n            factory = function (args, deps) {\r\n                // resolve dependencies\r\n                var resolved = dependencies.map(function (x) {\r\n                    try {\r\n                        return self_1.get(x, undefined, deps);\r\n                    }\r\n                    catch (e) {\r\n                        Utils_1.throwError(\"Error resolving dependency '{0}' for '{1}': {2}\", x, key, e);\r\n                    }\r\n                });\r\n                // invoke constructor\r\n                var _args = [null].concat(resolved).concat(args);\r\n                var ctorFunc = ctor.bind.apply(ctor, _args);\r\n                return new ctorFunc();\r\n            };\r\n        }\r\n        else {\r\n            // third overload\r\n            // singleton\r\n            factory = function (args, deps) { return val; };\r\n        }\r\n        this.registrations[key] = { factory: factory, isSingleton: isSingleton };\r\n        return this;\r\n    };\r\n    Injector.prototype.get = function (key, args, deps) {\r\n        deps = deps || {};\r\n        if (deps.hasOwnProperty(key))\r\n            Utils_1.throwError(\"Detected circular dependency a from '{0}' to '{1}'\", Object.keys(deps).join(\", \"), key);\r\n        // registered?\r\n        var registration = this.registrations[key];\r\n        if (registration === undefined)\r\n            Utils_1.throwError(\"'{0}' is not registered\", key);\r\n        // already instantiated?\r\n        if (registration.isSingleton && registration.value)\r\n            return registration.value;\r\n        // append current key\r\n        var newDeps = {};\r\n        newDeps[key] = true;\r\n        Utils_1.extend(deps, newDeps);\r\n        // create it\r\n        var result = registration.factory(args, newDeps);\r\n        // cache if singleton\r\n        if (registration.isSingleton)\r\n            registration.value = result;\r\n        return result;\r\n    };\r\n    Injector.prototype.resolve = function (iaa, args) {\r\n        var ctor = iaa.pop();\r\n        if (!Utils_1.isFunction(ctor))\r\n            Utils_1.throwError(\"Error resolving inline-annotated-array. Constructor must be of type 'function' but is '{0}\", typeof ctor);\r\n        var self = this;\r\n        // resolve dependencies\r\n        var resolved = iaa.map(function (x) {\r\n            try {\r\n                return self.get(x, undefined, iaa);\r\n            }\r\n            catch (e) {\r\n                Utils_1.throwError(\"Error resolving dependency '{0}' for '{1}': {2}\", x, Object.getPrototypeOf(ctor), e);\r\n            }\r\n        });\r\n        // invoke constructor\r\n        var _args = [null].concat(resolved).concat(args);\r\n        var ctorFunc = ctor.bind.apply(ctor, _args);\r\n        return new ctorFunc();\r\n    };\r\n    return Injector;\r\n})();\r\nexports.injector = new Injector();\r\nexports.injector.register(res.injector, function () { return new Injector(); });\r\n//# sourceMappingURL=Injector.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Injector.js\n ** module id = 2\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar Reflect_1 = require(\"./Reflect\");\r\nvar Events_1 = require(\"./Events\");\r\nvar IID_1 = require(\"../IID\");\r\n/*\r\n* Global helpers\r\n*/\r\n\"use strict\";\r\nvar regexCssClassName = /\\S+/g;\r\nvar RxObsConstructor = Rx.Observable; // the cast is neccessary because the rx.js.d.ts declares Observable as an interface\r\nexports.noop = function () { };\r\n/**\r\n* Returns true if a ECMAScript5 strict-mode is active\r\n*/\r\nfunction isStrictMode() {\r\n    return typeof this === \"undefined\";\r\n}\r\nexports.isStrictMode = isStrictMode;\r\n/**\r\n* Returns true if target is a javascript primitive\r\n*/\r\nfunction isPrimitive(target) {\r\n    var t = typeof target;\r\n    return t === \"boolean\" || t === \"number\" || t === \"string\";\r\n}\r\nexports.isPrimitive = isPrimitive;\r\n/**\r\n* Tests if the target supports the interface\r\n* @param {any} target\r\n* @param {string} iid\r\n*/\r\nfunction queryInterface(target, iid) {\r\n    if (target == null || isPrimitive(target))\r\n        return false;\r\n    if (typeof target === \"object\")\r\n        target = target.constructor;\r\n    var interfaces = Reflect_1.getMetadata(Reflect_1.implementsMetaDataKey, target);\r\n    return interfaces != null && interfaces[iid];\r\n}\r\nexports.queryInterface = queryInterface;\r\n/**\r\n* Returns all own properties of target implementing interface iid\r\n* @param {any} target\r\n* @param {string} iid\r\n*/\r\nfunction getOwnPropertiesImplementingInterface(target, iid) {\r\n    return Object.keys(target).filter(function (propertyName) {\r\n        // lookup object for name\r\n        var o = target[propertyName];\r\n        // is it an ObservableProperty?\r\n        return queryInterface(o, iid);\r\n    }).map(function (x) { return new PropertyInfo(x, target[x]); });\r\n}\r\nexports.getOwnPropertiesImplementingInterface = getOwnPropertiesImplementingInterface;\r\n/**\r\n* Determines if target is an instance of a IObservableProperty\r\n* @param {any} target\r\n*/\r\nfunction isProperty(target) {\r\n    if (target == null)\r\n        return false;\r\n    return queryInterface(target, IID_1.default.IObservableProperty);\r\n}\r\nexports.isProperty = isProperty;\r\n/**\r\n* Determines if target is an instance of a Rx.Scheduler\r\n* @param {any} target\r\n*/\r\nfunction isRxScheduler(target) {\r\n    if (target == null)\r\n        return false;\r\n    return Rx.Scheduler.isScheduler(target);\r\n}\r\nexports.isRxScheduler = isRxScheduler;\r\n/**\r\n* Determines if target is an instance of a Rx.Observable\r\n* @param {any} target\r\n*/\r\nfunction isRxObservable(target) {\r\n    if (target == null)\r\n        return false;\r\n    return target instanceof RxObsConstructor;\r\n}\r\nexports.isRxObservable = isRxObservable;\r\n/**\r\n* Determines if target is an instance of a promise\r\n* @param {any} target\r\n*/\r\nfunction isPromise(target) {\r\n    if (target == null)\r\n        return false;\r\n    return Rx.helpers.isPromise(target);\r\n}\r\nexports.isPromise = isPromise;\r\n/**\r\n* If the prop is an observable property return its value\r\n* @param {any} prop\r\n*/\r\nfunction unwrapProperty(prop) {\r\n    if (isProperty(prop))\r\n        return prop();\r\n    return prop;\r\n}\r\nexports.unwrapProperty = unwrapProperty;\r\n/**\r\n* Returns true if a Unit-Testing environment is detected\r\n*/\r\nfunction isInUnitTest() {\r\n    // detect jasmine 1.x\r\n    if (window && window[\"jasmine\"] && window[\"jasmine\"].version_ !== undefined) {\r\n        return true;\r\n    }\r\n    // detect jasmine 2.x\r\n    if (window && window[\"getJasmineRequireObj\"] && typeof window[\"getJasmineRequireObj\"] === \"function\") {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexports.isInUnitTest = isInUnitTest;\r\n/**\r\n* Transforms the current method's arguments into an array\r\n*/\r\nfunction args2Array(args) {\r\n    var result = [];\r\n    for (var i = 0, len = args.length; i < len; i++) {\r\n        result.push(args[i]);\r\n    }\r\n    return result;\r\n}\r\nexports.args2Array = args2Array;\r\n/**\r\n* Formats a string using .net style format string\r\n* @param {string} fmt The format string\r\n* @param {any[]} ...args Format arguments\r\n*/\r\nfunction formatString(fmt) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    var pattern = /\\{\\d+\\}/g;\r\n    return fmt.replace(pattern, function (capture) {\r\n        return args[capture.match(/\\d+/)];\r\n    });\r\n}\r\nexports.formatString = formatString;\r\n/**\r\n* Copies own properties from src to dst\r\n*/\r\nfunction extend(src, dst, inherited) {\r\n    var prop;\r\n    if (!inherited) {\r\n        var ownProps = Object.getOwnPropertyNames(src);\r\n        for (var i = 0; i < ownProps.length; i++) {\r\n            prop = ownProps[i];\r\n            dst[prop] = src[prop];\r\n        }\r\n    }\r\n    else {\r\n        for (prop in src) {\r\n            dst[prop] = src[prop];\r\n        }\r\n    }\r\n    return dst;\r\n}\r\nexports.extend = extend;\r\nvar PropertyInfo = (function () {\r\n    function PropertyInfo(propertyName, property) {\r\n        this.property = property;\r\n        this.propertyName = propertyName;\r\n    }\r\n    return PropertyInfo;\r\n})();\r\nexports.PropertyInfo = PropertyInfo;\r\n/**\r\n* Toggles one ore more css classes on the specified DOM element\r\n* @param {Node} node The target element\r\n* @param {boolean} shouldHaveClass True if the classes should be added to the element, false if they should be removed\r\n* @param {string[} classNames The list of classes to process\r\n*/\r\nfunction toggleCssClass(node, shouldHaveClass) {\r\n    var classNames = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        classNames[_i - 2] = arguments[_i];\r\n    }\r\n    if (classNames) {\r\n        var currentClassNames = node.className.match(regexCssClassName) || [];\r\n        var index;\r\n        var className;\r\n        if (shouldHaveClass) {\r\n            for (var i = 0; i < classNames.length; i++) {\r\n                className = classNames[i];\r\n                index = currentClassNames.indexOf(className);\r\n                if (index === -1)\r\n                    currentClassNames.push(className);\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < classNames.length; i++) {\r\n                className = classNames[i];\r\n                index = currentClassNames.indexOf(className);\r\n                if (index !== -1)\r\n                    currentClassNames.splice(index, 1);\r\n            }\r\n        }\r\n        node.className = currentClassNames.join(\" \");\r\n    }\r\n}\r\nexports.toggleCssClass = toggleCssClass;\r\n/**\r\n * Trigger a reflow on the target element\r\n * @param {HTMLElement} el\r\n */\r\nfunction triggerReflow(el) {\r\n    el.getBoundingClientRect();\r\n}\r\nexports.triggerReflow = triggerReflow;\r\n/**\r\n * Returns true if the specified element may be disabled\r\n * @param {HTMLElement} el\r\n */\r\nfunction elementCanBeDisabled(el) {\r\n    return el instanceof HTMLButtonElement ||\r\n        el instanceof HTMLAnchorElement ||\r\n        el instanceof HTMLInputElement ||\r\n        el instanceof HTMLFieldSetElement ||\r\n        el instanceof HTMLLinkElement ||\r\n        el instanceof HTMLOptGroupElement ||\r\n        el instanceof HTMLOptionElement ||\r\n        el instanceof HTMLSelectElement ||\r\n        el instanceof HTMLTextAreaElement;\r\n}\r\nexports.elementCanBeDisabled = elementCanBeDisabled;\r\n/**\r\n * Returns true if object is a Function.\r\n * @param obj\r\n */\r\nfunction isFunction(obj) {\r\n    return typeof obj == 'function' || false;\r\n}\r\nexports.isFunction = isFunction;\r\n/**\r\n * Returns true if object is a Disposable\r\n * @param obj\r\n */\r\nfunction isDisposable(obj) {\r\n    return queryInterface(obj, IID_1.default.IDisposable) || isFunction(obj[\"dispose\"]);\r\n}\r\nexports.isDisposable = isDisposable;\r\n/**\r\n * Performs an optimized deep comparison between the two objects, to determine if they should be considered equal.\r\n * @param a Object to compare\r\n * @param b Object to compare to\r\n */\r\nfunction isEqual(a, b, aStack, bStack) {\r\n    var toString = ({}).toString;\r\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\r\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\r\n    if (a === b)\r\n        return a !== 0 || 1 / a === 1 / b;\r\n    // A strict comparison is necessary because `null == undefined`.\r\n    if (a == null || b == null)\r\n        return a === b;\r\n    // Unwrap any wrapped objects.\r\n    //if (a instanceof _) a = a._wrapped;\r\n    //if (b instanceof _) b = b._wrapped;\r\n    // Compare `[[Class]]` names.\r\n    var className = toString.call(a);\r\n    if (className !== toString.call(b))\r\n        return false;\r\n    switch (className) {\r\n        // Strings, numbers, regular expressions, dates, and booleans are compared by value.\r\n        case '[object RegExp]':\r\n        // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\r\n        case '[object String]':\r\n            // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\r\n            // equivalent to `new String(\"5\")`.\r\n            return '' + a === '' + b;\r\n        case '[object Number]':\r\n            // `NaN`s are equivalent, but non-reflexive.\r\n            // Object(NaN) is equivalent to NaN\r\n            if (+a !== +a)\r\n                return +b !== +b;\r\n            // An `egal` comparison is performed for other numeric values.\r\n            return +a === 0 ? 1 / +a === 1 / b : +a === +b;\r\n        case '[object Date]':\r\n        case '[object Boolean]':\r\n            // Coerce dates and booleans to numeric primitive values. Dates are compared by their\r\n            // millisecond representations. Note that invalid dates with millisecond representations\r\n            // of `NaN` are not equivalent.\r\n            return +a === +b;\r\n    }\r\n    var areArrays = className === '[object Array]';\r\n    if (!areArrays) {\r\n        if (typeof a != 'object' || typeof b != 'object')\r\n            return false;\r\n        // Objects with different constructors are not equivalent, but `Object`s or `Array`s\r\n        // from different frames are.\r\n        var aCtor = a.constructor, bCtor = b.constructor;\r\n        if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\r\n            isFunction(bCtor) && bCtor instanceof bCtor)\r\n            && ('constructor' in a && 'constructor' in b)) {\r\n            return false;\r\n        }\r\n    }\r\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\r\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\r\n    // Initializing stack of traversed objects.\r\n    // It's done here since we only need them for objects and arrays comparison.\r\n    aStack = aStack || [];\r\n    bStack = bStack || [];\r\n    var length = aStack.length;\r\n    while (length--) {\r\n        // Linear search. Performance is inversely proportional to the number of\r\n        // unique nested structures.\r\n        if (aStack[length] === a)\r\n            return bStack[length] === b;\r\n    }\r\n    // Add the first object to the stack of traversed objects.\r\n    aStack.push(a);\r\n    bStack.push(b);\r\n    // Recursively compare objects and arrays.\r\n    if (areArrays) {\r\n        // Compare array lengths to determine if a deep comparison is necessary.\r\n        length = a.length;\r\n        if (length !== b.length)\r\n            return false;\r\n        // Deep compare the contents, ignoring non-numeric properties.\r\n        while (length--) {\r\n            if (!isEqual(a[length], b[length], aStack, bStack))\r\n                return false;\r\n        }\r\n    }\r\n    else {\r\n        // Deep compare objects.\r\n        var keys = Object.keys(a), key;\r\n        length = keys.length;\r\n        // Ensure that both objects contain the same number of properties before comparing deep equality.\r\n        if (Object.keys(b).length !== length)\r\n            return false;\r\n        while (length--) {\r\n            // Deep compare each member\r\n            key = keys[length];\r\n            if (!(b.hasOwnProperty(key) && isEqual(a[key], b[key], aStack, bStack)))\r\n                return false;\r\n        }\r\n    }\r\n    // Remove the first object from the stack of traversed objects.\r\n    aStack.pop();\r\n    bStack.pop();\r\n    return true;\r\n}\r\nexports.isEqual = isEqual;\r\n/**\r\n* Returns an array of clones of the nodes in the source array\r\n*/\r\nfunction cloneNodeArray(nodes) {\r\n    var length = nodes.length;\r\n    var result = new Array(length);\r\n    for (var i = 0; i < length; i++) {\r\n        result[i] = nodes[i].cloneNode(true);\r\n    }\r\n    return result;\r\n}\r\nexports.cloneNodeArray = cloneNodeArray;\r\n/**\r\n * Converts a NodeList into a javascript array\r\n * @param {NodeList} nodes\r\n */\r\nfunction nodeListToArray(nodes) {\r\n    return Array.prototype.slice.call(nodes);\r\n}\r\nexports.nodeListToArray = nodeListToArray;\r\n/**\r\n * Converts the node's children into a javascript array\r\n * @param {Node} node\r\n */\r\nfunction nodeChildrenToArray(node) {\r\n    return nodeListToArray(node.childNodes);\r\n}\r\nexports.nodeChildrenToArray = nodeChildrenToArray;\r\n/**\r\n* Wraps an action in try/finally block and disposes the resource after the action has completed even if it throws an exception\r\n* (mimics C# using statement)\r\n* @param {Rx.IDisposable} disp The resource to dispose after action completes\r\n* @param {() => void} action The action to wrap\r\n*/\r\nfunction using(disp, action) {\r\n    if (!disp)\r\n        throw new Error(\"disp\");\r\n    if (!action)\r\n        throw new Error(\"action\");\r\n    try {\r\n        action(disp);\r\n    }\r\n    finally {\r\n        disp.dispose();\r\n    }\r\n}\r\nexports.using = using;\r\n/**\r\n* Turns an AMD-Style require call into an observable\r\n* @param {string} Module The module to load\r\n* @return {Rx.Observable<any>} An observable that yields a value and completes as soon as the module has been loaded\r\n*/\r\nfunction observableRequire(module) {\r\n    var requireFunc = window[\"require\"];\r\n    if (!isFunction(requireFunc))\r\n        throwError(\"there's no AMD-module loader available (Hint: did you forget to include RequireJS in your project?)\");\r\n    return Rx.Observable.create(function (observer) {\r\n        try {\r\n            requireFunc([module], function (m) {\r\n                observer.onNext(m);\r\n                observer.onCompleted();\r\n            }, function (err) {\r\n                observer.onError(err);\r\n            });\r\n        }\r\n        catch (e) {\r\n            observer.onError(e);\r\n        }\r\n        return Rx.Disposable.empty;\r\n    });\r\n}\r\nexports.observableRequire = observableRequire;\r\n/**\r\n* Returns an observable that notifes of any observable property changes on the target\r\n* @param {any} target The object to observe\r\n* @return {Rx.Observable<T>} An observable\r\n*/\r\nfunction observeObject(target, defaultExceptionHandler, onChanging) {\r\n    if (onChanging === void 0) { onChanging = false; }\r\n    var thrownExceptionsSubject = queryInterface(target, IID_1.default.IHandleObservableErrors) ?\r\n        target.thrownExceptions : defaultExceptionHandler;\r\n    return Rx.Observable.create(function (observer) {\r\n        var result = new Rx.CompositeDisposable();\r\n        var observableProperties = getOwnPropertiesImplementingInterface(target, IID_1.default.IObservableProperty);\r\n        observableProperties.forEach(function (x) {\r\n            var prop = x.property;\r\n            var obs = onChanging ? prop.changing : prop.changed;\r\n            result.add(obs.subscribe(function (_) {\r\n                var e = new Events_1.PropertyChangedEventArgs(self, x.propertyName);\r\n                try {\r\n                    observer.onNext(e);\r\n                }\r\n                catch (ex) {\r\n                    thrownExceptionsSubject.onNext(ex);\r\n                }\r\n            }));\r\n        });\r\n        return result;\r\n    })\r\n        .publish()\r\n        .refCount();\r\n}\r\nexports.observeObject = observeObject;\r\n/**\r\n * whenAny allows you to observe whenever the value of one or more properties\r\n * on an object have changed, providing an initial value when the Observable is set up.\r\n */\r\nfunction whenAny() {\r\n    // no need to invoke combineLatest for the simplest case\r\n    if (arguments.length === 2) {\r\n        return arguments[0].changed.startWith(arguments[0]()).select(arguments[1]);\r\n    }\r\n    var args = args2Array(arguments);\r\n    // extract selector\r\n    var selector = args.pop();\r\n    // prepend sequence with current values to satisfy combineLatest\r\n    args = args.map(function (x) { return x.changed.startWith(x()); });\r\n    // finally append the selector\r\n    args.push(selector);\r\n    return Rx.Observable.combineLatest.apply(this, args);\r\n}\r\nexports.whenAny = whenAny;\r\n/**\r\n* FOR INTERNAL USE ONLY\r\n* Throw an error containing the specified description\r\n*/\r\nfunction throwError(fmt) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    var msg = \"WebRx: \" + formatString(fmt, args);\r\n    throw new Error(msg);\r\n}\r\nexports.throwError = throwError;\r\n//# sourceMappingURL=Utils.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Utils.js\n ** module id = 3\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar WeakMap_1 = require(\"../Collections/WeakMap\");\r\nvar Set_1 = require(\"../Collections/Set\");\r\nvar Map_1 = require(\"../Collections/Map\");\r\n/*! *****************************************************************************\r\nCopyright (C) Microsoft. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n***************************************************************************** */\r\n\"use strict\";\r\n// Load global or shim versions of Map, Set, and WeakMap\r\nvar functionPrototype = Object.getPrototypeOf(Function);\r\n// [[Metadata]] internal slot\r\nvar __Metadata__ = WeakMap_1.createWeakMap();\r\n/**\r\n  * Applies a set of decorators to a property of a target object.\r\n  * @param decorators An array of decorators.\r\n  * @param target The target object.\r\n  * @param targetKey (Optional) The property key to decorate.\r\n  * @param targetDescriptor (Optional) The property descriptor for the target key\r\n  * @remarks Decorators are applied in reverse order.\r\n  * @example\r\n  *\r\n  *     class C {\r\n  *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n  *         // static staticProperty;\r\n  *         // property;\r\n  *\r\n  *         constructor(p) { }\r\n  *         static staticMethod(p) { }\r\n  *         method(p) { }\r\n  *     }\r\n  *\r\n  *     // constructor\r\n  *     C = Reflect.decorate(decoratorsArray, C);\r\n  *\r\n  *     // property (on constructor)\r\n  *     Reflect.decorate(decoratorsArray, C, \"staticProperty\");\r\n  *\r\n  *     // property (on prototype)\r\n  *     Reflect.decorate(decoratorsArray, C.prototype, \"property\");\r\n  *\r\n  *     // method (on constructor)\r\n  *     Object.defineProperty(C, \"staticMethod\",\r\n  *         Reflect.decorate(decoratorsArray, C, \"staticMethod\",\r\n  *             Object.getOwnPropertyDescriptor(C, \"staticMethod\")));\r\n  *\r\n  *     // method (on prototype)\r\n  *     Object.defineProperty(C.prototype, \"method\",\r\n  *         Reflect.decorate(decoratorsArray, C.prototype, \"method\",\r\n  *             Object.getOwnPropertyDescriptor(C.prototype, \"method\")));\r\n  *\r\n  */\r\nfunction decorate(decorators, target, targetKey, targetDescriptor) {\r\n    if (!IsUndefined(targetDescriptor)) {\r\n        if (!IsArray(decorators)) {\r\n            throw new TypeError();\r\n        }\r\n        else if (!IsObject(target)) {\r\n            throw new TypeError();\r\n        }\r\n        else if (IsUndefined(targetKey)) {\r\n            throw new TypeError();\r\n        }\r\n        else if (!IsObject(targetDescriptor)) {\r\n            throw new TypeError();\r\n        }\r\n        targetKey = ToPropertyKey(targetKey);\r\n        return DecoratePropertyWithDescriptor(decorators, target, targetKey, targetDescriptor);\r\n    }\r\n    else if (!IsUndefined(targetKey)) {\r\n        if (!IsArray(decorators)) {\r\n            throw new TypeError();\r\n        }\r\n        else if (!IsObject(target)) {\r\n            throw new TypeError();\r\n        }\r\n        targetKey = ToPropertyKey(targetKey);\r\n        return DecoratePropertyWithoutDescriptor(decorators, target, targetKey);\r\n    }\r\n    else {\r\n        if (!IsArray(decorators)) {\r\n            throw new TypeError();\r\n        }\r\n        else if (!IsConstructor(target)) {\r\n            throw new TypeError();\r\n        }\r\n        return DecorateConstructor(decorators, target);\r\n    }\r\n}\r\nexports.decorate = decorate;\r\n/**\r\n  * A default metadata decorator factory that can be used on a class, class member, or parameter.\r\n  * @param metadataKey The key for the metadata entry.\r\n  * @param metadataValue The value for the metadata entry.\r\n  * @returns A decorator function.\r\n  * @remarks\r\n  * If `metadataKey` is already defined for the target and target key, the\r\n  * metadataValue for that key will be overwritten.\r\n  * @example\r\n  *\r\n  *     // constructor\r\n  *     @Reflect.metadata(key, value)\r\n  *     class C {\r\n  *     }\r\n  *\r\n  *     // property (on constructor, TypeScript only)\r\n  *     class C {\r\n  *         @Reflect.metadata(key, value)\r\n  *         static staticProperty;\r\n  *     }\r\n  *\r\n  *     // property (on prototype, TypeScript only)\r\n  *     class C {\r\n  *         @Reflect.metadata(key, value)\r\n  *         property;\r\n  *     }\r\n  *\r\n  *     // method (on constructor)\r\n  *     class C {\r\n  *         @Reflect.metadata(key, value)\r\n  *         static staticMethod() { }\r\n  *     }\r\n  *\r\n  *     // method (on prototype)\r\n  *     class C {\r\n  *         @Reflect.metadata(key, value)\r\n  *         method() { }\r\n  *     }\r\n  *\r\n  */\r\nfunction metadata(metadataKey, metadataValue) {\r\n    function decorator(target, targetKey) {\r\n        if (!IsUndefined(targetKey)) {\r\n            if (!IsObject(target)) {\r\n                throw new TypeError();\r\n            }\r\n            targetKey = ToPropertyKey(targetKey);\r\n            OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, targetKey);\r\n        }\r\n        else {\r\n            if (!IsConstructor(target)) {\r\n                throw new TypeError();\r\n            }\r\n            OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, undefined);\r\n        }\r\n    }\r\n    return decorator;\r\n}\r\nexports.metadata = metadata;\r\n/**\r\n  * Define a unique metadata entry on the target.\r\n  * @param metadataKey A key used to store and retrieve metadata.\r\n  * @param metadataValue A value that contains attached metadata.\r\n  * @param target The target object on which to define metadata.\r\n  * @param targetKey (Optional) The property key for the target.\r\n  * @example\r\n  *\r\n  *     class C {\r\n  *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n  *         // static staticProperty;\r\n  *         // property;\r\n  *\r\n  *         constructor(p) { }\r\n  *         static staticMethod(p) { }\r\n  *         method(p) { }\r\n  *     }\r\n  *\r\n  *     // constructor\r\n  *     Reflect.defineMetadata(\"custom:annotation\", options, C);\r\n  *\r\n  *     // property (on constructor)\r\n  *     Reflect.defineMetadata(\"custom:annotation\", options, C, \"staticProperty\");\r\n  *\r\n  *     // property (on prototype)\r\n  *     Reflect.defineMetadata(\"custom:annotation\", options, C.prototype, \"property\");\r\n  *\r\n  *     // method (on constructor)\r\n  *     Reflect.defineMetadata(\"custom:annotation\", options, C, \"staticMethod\");\r\n  *\r\n  *     // method (on prototype)\r\n  *     Reflect.defineMetadata(\"custom:annotation\", options, C.prototype, \"method\");\r\n  *\r\n  *     // decorator factory as metadata-producing annotation.\r\n  *     function MyAnnotation(options): Decorator {\r\n  *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\r\n  *     }\r\n  *\r\n  */\r\nfunction defineMetadata(metadataKey, metadataValue, target, targetKey) {\r\n    if (!IsObject(target)) {\r\n        throw new TypeError();\r\n    }\r\n    else if (!IsUndefined(targetKey)) {\r\n        targetKey = ToPropertyKey(targetKey);\r\n    }\r\n    return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, targetKey);\r\n}\r\nexports.defineMetadata = defineMetadata;\r\n/**\r\n  * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\r\n  * @param metadataKey A key used to store and retrieve metadata.\r\n  * @param target The target object on which the metadata is defined.\r\n  * @param targetKey (Optional) The property key for the target.\r\n  * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\r\n  * @example\r\n  *\r\n  *     class C {\r\n  *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n  *         // static staticProperty;\r\n  *         // property;\r\n  *\r\n  *         constructor(p) { }\r\n  *         static staticMethod(p) { }\r\n  *         method(p) { }\r\n  *     }\r\n  *\r\n  *     // constructor\r\n  *     result = Reflect.hasMetadata(\"custom:annotation\", C);\r\n  *\r\n  *     // property (on constructor)\r\n  *     result = Reflect.hasMetadata(\"custom:annotation\", C, \"staticProperty\");\r\n  *\r\n  *     // property (on prototype)\r\n  *     result = Reflect.hasMetadata(\"custom:annotation\", C.prototype, \"property\");\r\n  *\r\n  *     // method (on constructor)\r\n  *     result = Reflect.hasMetadata(\"custom:annotation\", C, \"staticMethod\");\r\n  *\r\n  *     // method (on prototype)\r\n  *     result = Reflect.hasMetadata(\"custom:annotation\", C.prototype, \"method\");\r\n  *\r\n  */\r\nfunction hasMetadata(metadataKey, target, targetKey) {\r\n    if (!IsObject(target)) {\r\n        throw new TypeError();\r\n    }\r\n    else if (!IsUndefined(targetKey)) {\r\n        targetKey = ToPropertyKey(targetKey);\r\n    }\r\n    return OrdinaryHasMetadata(metadataKey, target, targetKey);\r\n}\r\nexports.hasMetadata = hasMetadata;\r\n/**\r\n  * Gets a value indicating whether the target object has the provided metadata key defined.\r\n  * @param metadataKey A key used to store and retrieve metadata.\r\n  * @param target The target object on which the metadata is defined.\r\n  * @param targetKey (Optional) The property key for the target.\r\n  * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\r\n  * @example\r\n  *\r\n  *     class C {\r\n  *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n  *         // static staticProperty;\r\n  *         // property;\r\n  *\r\n  *         constructor(p) { }\r\n  *         static staticMethod(p) { }\r\n  *         method(p) { }\r\n  *     }\r\n  *\r\n  *     // constructor\r\n  *     result = Reflect.hasOwnMetadata(\"custom:annotation\", C);\r\n  *\r\n  *     // property (on constructor)\r\n  *     result = Reflect.hasOwnMetadata(\"custom:annotation\", C, \"staticProperty\");\r\n  *\r\n  *     // property (on prototype)\r\n  *     result = Reflect.hasOwnMetadata(\"custom:annotation\", C.prototype, \"property\");\r\n  *\r\n  *     // method (on constructor)\r\n  *     result = Reflect.hasOwnMetadata(\"custom:annotation\", C, \"staticMethod\");\r\n  *\r\n  *     // method (on prototype)\r\n  *     result = Reflect.hasOwnMetadata(\"custom:annotation\", C.prototype, \"method\");\r\n  *\r\n  */\r\nfunction hasOwnMetadata(metadataKey, target, targetKey) {\r\n    if (!IsObject(target)) {\r\n        throw new TypeError();\r\n    }\r\n    else if (!IsUndefined(targetKey)) {\r\n        targetKey = ToPropertyKey(targetKey);\r\n    }\r\n    return OrdinaryHasOwnMetadata(metadataKey, target, targetKey);\r\n}\r\nexports.hasOwnMetadata = hasOwnMetadata;\r\n/**\r\n  * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\r\n  * @param metadataKey A key used to store and retrieve metadata.\r\n  * @param target The target object on which the metadata is defined.\r\n  * @param targetKey (Optional) The property key for the target.\r\n  * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\r\n  * @example\r\n  *\r\n  *     class C {\r\n  *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n  *         // static staticProperty;\r\n  *         // property;\r\n  *\r\n  *         constructor(p) { }\r\n  *         static staticMethod(p) { }\r\n  *         method(p) { }\r\n  *     }\r\n  *\r\n  *     // constructor\r\n  *     result = Reflect.getMetadata(\"custom:annotation\", C);\r\n  *\r\n  *     // property (on constructor)\r\n  *     result = Reflect.getMetadata(\"custom:annotation\", C, \"staticProperty\");\r\n  *\r\n  *     // property (on prototype)\r\n  *     result = Reflect.getMetadata(\"custom:annotation\", C.prototype, \"property\");\r\n  *\r\n  *     // method (on constructor)\r\n  *     result = Reflect.getMetadata(\"custom:annotation\", C, \"staticMethod\");\r\n  *\r\n  *     // method (on prototype)\r\n  *     result = Reflect.getMetadata(\"custom:annotation\", C.prototype, \"method\");\r\n  *\r\n  */\r\nfunction getMetadata(metadataKey, target, targetKey) {\r\n    if (!IsObject(target)) {\r\n        throw new TypeError();\r\n    }\r\n    else if (!IsUndefined(targetKey)) {\r\n        targetKey = ToPropertyKey(targetKey);\r\n    }\r\n    return OrdinaryGetMetadata(metadataKey, target, targetKey);\r\n}\r\nexports.getMetadata = getMetadata;\r\n/**\r\n  * Gets the metadata value for the provided metadata key on the target object.\r\n  * @param metadataKey A key used to store and retrieve metadata.\r\n  * @param target The target object on which the metadata is defined.\r\n  * @param targetKey (Optional) The property key for the target.\r\n  * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\r\n  * @example\r\n  *\r\n  *     class C {\r\n  *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n  *         // static staticProperty;\r\n  *         // property;\r\n  *\r\n  *         constructor(p) { }\r\n  *         static staticMethod(p) { }\r\n  *         method(p) { }\r\n  *     }\r\n  *\r\n  *     // constructor\r\n  *     result = Reflect.getOwnMetadata(\"custom:annotation\", C);\r\n  *\r\n  *     // property (on constructor)\r\n  *     result = Reflect.getOwnMetadata(\"custom:annotation\", C, \"staticProperty\");\r\n  *\r\n  *     // property (on prototype)\r\n  *     result = Reflect.getOwnMetadata(\"custom:annotation\", C.prototype, \"property\");\r\n  *\r\n  *     // method (on constructor)\r\n  *     result = Reflect.getOwnMetadata(\"custom:annotation\", C, \"staticMethod\");\r\n  *\r\n  *     // method (on prototype)\r\n  *     result = Reflect.getOwnMetadata(\"custom:annotation\", C.prototype, \"method\");\r\n  *\r\n  */\r\nfunction getOwnMetadata(metadataKey, target, targetKey) {\r\n    if (!IsObject(target)) {\r\n        throw new TypeError();\r\n    }\r\n    else if (!IsUndefined(targetKey)) {\r\n        targetKey = ToPropertyKey(targetKey);\r\n    }\r\n    return OrdinaryGetOwnMetadata(metadataKey, target, targetKey);\r\n}\r\nexports.getOwnMetadata = getOwnMetadata;\r\n/**\r\n  * Gets the metadata keys defined on the target object or its prototype chain.\r\n  * @param target The target object on which the metadata is defined.\r\n  * @param targetKey (Optional) The property key for the target.\r\n  * @returns An array of unique metadata keys.\r\n  * @example\r\n  *\r\n  *     class C {\r\n  *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n  *         // static staticProperty;\r\n  *         // property;\r\n  *\r\n  *         constructor(p) { }\r\n  *         static staticMethod(p) { }\r\n  *         method(p) { }\r\n  *     }\r\n  *\r\n  *     // constructor\r\n  *     result = Reflect.getMetadataKeys(C);\r\n  *\r\n  *     // property (on constructor)\r\n  *     result = Reflect.getMetadataKeys(C, \"staticProperty\");\r\n  *\r\n  *     // property (on prototype)\r\n  *     result = Reflect.getMetadataKeys(C.prototype, \"property\");\r\n  *\r\n  *     // method (on constructor)\r\n  *     result = Reflect.getMetadataKeys(C, \"staticMethod\");\r\n  *\r\n  *     // method (on prototype)\r\n  *     result = Reflect.getMetadataKeys(C.prototype, \"method\");\r\n  *\r\n  */\r\nfunction getMetadataKeys(target, targetKey) {\r\n    if (!IsObject(target)) {\r\n        throw new TypeError();\r\n    }\r\n    else if (!IsUndefined(targetKey)) {\r\n        targetKey = ToPropertyKey(targetKey);\r\n    }\r\n    return OrdinaryMetadataKeys(target, targetKey);\r\n}\r\nexports.getMetadataKeys = getMetadataKeys;\r\n/**\r\n  * Gets the unique metadata keys defined on the target object.\r\n  * @param target The target object on which the metadata is defined.\r\n  * @param targetKey (Optional) The property key for the target.\r\n  * @returns An array of unique metadata keys.\r\n  * @example\r\n  *\r\n  *     class C {\r\n  *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n  *         // static staticProperty;\r\n  *         // property;\r\n  *\r\n  *         constructor(p) { }\r\n  *         static staticMethod(p) { }\r\n  *         method(p) { }\r\n  *     }\r\n  *\r\n  *     // constructor\r\n  *     result = Reflect.getOwnMetadataKeys(C);\r\n  *\r\n  *     // property (on constructor)\r\n  *     result = Reflect.getOwnMetadataKeys(C, \"staticProperty\");\r\n  *\r\n  *     // property (on prototype)\r\n  *     result = Reflect.getOwnMetadataKeys(C.prototype, \"property\");\r\n  *\r\n  *     // method (on constructor)\r\n  *     result = Reflect.getOwnMetadataKeys(C, \"staticMethod\");\r\n  *\r\n  *     // method (on prototype)\r\n  *     result = Reflect.getOwnMetadataKeys(C.prototype, \"method\");\r\n  *\r\n  */\r\nfunction getOwnMetadataKeys(target, targetKey) {\r\n    if (!IsObject(target)) {\r\n        throw new TypeError();\r\n    }\r\n    else if (!IsUndefined(targetKey)) {\r\n        targetKey = ToPropertyKey(targetKey);\r\n    }\r\n    return OrdinaryOwnMetadataKeys(target, targetKey);\r\n}\r\nexports.getOwnMetadataKeys = getOwnMetadataKeys;\r\n/**\r\n  * Deletes the metadata entry from the target object with the provided key.\r\n  * @param metadataKey A key used to store and retrieve metadata.\r\n  * @param target The target object on which the metadata is defined.\r\n  * @param targetKey (Optional) The property key for the target.\r\n  * @returns `true` if the metadata entry was found and deleted; otherwise, false.\r\n  * @example\r\n  *\r\n  *     class C {\r\n  *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n  *         // static staticProperty;\r\n  *         // property;\r\n  *\r\n  *         constructor(p) { }\r\n  *         static staticMethod(p) { }\r\n  *         method(p) { }\r\n  *     }\r\n  *\r\n  *     // constructor\r\n  *     result = Reflect.deleteMetadata(\"custom:annotation\", C);\r\n  *\r\n  *     // property (on constructor)\r\n  *     result = Reflect.deleteMetadata(\"custom:annotation\", C, \"staticProperty\");\r\n  *\r\n  *     // property (on prototype)\r\n  *     result = Reflect.deleteMetadata(\"custom:annotation\", C.prototype, \"property\");\r\n  *\r\n  *     // method (on constructor)\r\n  *     result = Reflect.deleteMetadata(\"custom:annotation\", C, \"staticMethod\");\r\n  *\r\n  *     // method (on prototype)\r\n  *     result = Reflect.deleteMetadata(\"custom:annotation\", C.prototype, \"method\");\r\n  *\r\n  */\r\nfunction deleteMetadata(metadataKey, target, targetKey) {\r\n    if (!IsObject(target)) {\r\n        throw new TypeError();\r\n    }\r\n    else if (!IsUndefined(targetKey)) {\r\n        targetKey = ToPropertyKey(targetKey);\r\n    }\r\n    // https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#deletemetadata-metadatakey-p-\r\n    var metadataMap = GetOrCreateMetadataMap(target, targetKey, false);\r\n    if (IsUndefined(metadataMap)) {\r\n        return false;\r\n    }\r\n    if (!metadataMap.delete(metadataKey)) {\r\n        return false;\r\n    }\r\n    if (metadataMap.size > 0) {\r\n        return true;\r\n    }\r\n    var targetMetadata = __Metadata__.get(target);\r\n    targetMetadata.delete(targetKey);\r\n    if (targetMetadata.size > 0) {\r\n        return true;\r\n    }\r\n    __Metadata__.delete(target);\r\n    return true;\r\n}\r\nexports.deleteMetadata = deleteMetadata;\r\nfunction DecorateConstructor(decorators, target) {\r\n    for (var i = decorators.length - 1; i >= 0; --i) {\r\n        var decorator = decorators[i];\r\n        var decorated = decorator(target);\r\n        if (!IsUndefined(decorated)) {\r\n            if (!IsConstructor(decorated)) {\r\n                throw new TypeError();\r\n            }\r\n            target = decorated;\r\n        }\r\n    }\r\n    return target;\r\n}\r\nfunction DecoratePropertyWithDescriptor(decorators, target, propertyKey, descriptor) {\r\n    for (var i = decorators.length - 1; i >= 0; --i) {\r\n        var decorator = decorators[i];\r\n        var decorated = decorator(target, propertyKey, descriptor);\r\n        if (!IsUndefined(decorated)) {\r\n            if (!IsObject(decorated)) {\r\n                throw new TypeError();\r\n            }\r\n            descriptor = decorated;\r\n        }\r\n    }\r\n    return descriptor;\r\n}\r\nfunction DecoratePropertyWithoutDescriptor(decorators, target, propertyKey) {\r\n    for (var i = decorators.length - 1; i >= 0; --i) {\r\n        var decorator = decorators[i];\r\n        decorator(target, propertyKey);\r\n    }\r\n}\r\n// https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#getorcreatemetadatamap--o-p-create-\r\nfunction GetOrCreateMetadataMap(target, targetKey, create) {\r\n    var targetMetadata = __Metadata__.get(target);\r\n    if (!targetMetadata) {\r\n        if (!create) {\r\n            return undefined;\r\n        }\r\n        targetMetadata = Map_1.createMap();\r\n        __Metadata__.set(target, targetMetadata);\r\n    }\r\n    var keyMetadata = targetMetadata.get(targetKey);\r\n    if (!keyMetadata) {\r\n        if (!create) {\r\n            return undefined;\r\n        }\r\n        keyMetadata = Map_1.createMap();\r\n        targetMetadata.set(targetKey, keyMetadata);\r\n    }\r\n    return keyMetadata;\r\n}\r\n// https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinaryhasmetadata--metadatakey-o-p-\r\nfunction OrdinaryHasMetadata(MetadataKey, O, P) {\r\n    var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\r\n    if (hasOwn) {\r\n        return true;\r\n    }\r\n    var parent = GetPrototypeOf(O);\r\n    if (parent !== null) {\r\n        return OrdinaryHasMetadata(MetadataKey, parent, P);\r\n    }\r\n    return false;\r\n}\r\n// https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinaryhasownmetadata--metadatakey-o-p-\r\nfunction OrdinaryHasOwnMetadata(MetadataKey, O, P) {\r\n    var metadataMap = GetOrCreateMetadataMap(O, P, false);\r\n    if (metadataMap === undefined) {\r\n        return false;\r\n    }\r\n    return Boolean(metadataMap.has(MetadataKey));\r\n}\r\n// https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinarygetmetadata--metadatakey-o-p-\r\nfunction OrdinaryGetMetadata(MetadataKey, O, P) {\r\n    var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\r\n    if (hasOwn) {\r\n        return OrdinaryGetOwnMetadata(MetadataKey, O, P);\r\n    }\r\n    var parent = GetPrototypeOf(O);\r\n    if (parent !== null) {\r\n        return OrdinaryGetMetadata(MetadataKey, parent, P);\r\n    }\r\n    return undefined;\r\n}\r\n// https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinarygetownmetadata--metadatakey-o-p-\r\nfunction OrdinaryGetOwnMetadata(MetadataKey, O, P) {\r\n    var metadataMap = GetOrCreateMetadataMap(O, P, false);\r\n    if (metadataMap === undefined) {\r\n        return undefined;\r\n    }\r\n    return metadataMap.get(MetadataKey);\r\n}\r\n// https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinarydefineownmetadata--metadatakey-metadatavalue-o-p-\r\nfunction OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\r\n    var metadataMap = GetOrCreateMetadataMap(O, P, true);\r\n    metadataMap.set(MetadataKey, MetadataValue);\r\n}\r\n// https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinarymetadatakeys--o-p-\r\nfunction OrdinaryMetadataKeys(O, P) {\r\n    var ownKeys = OrdinaryOwnMetadataKeys(O, P);\r\n    var parent = GetPrototypeOf(O);\r\n    if (parent === null) {\r\n        return ownKeys;\r\n    }\r\n    var parentKeys = OrdinaryMetadataKeys(parent, P);\r\n    if (parentKeys.length <= 0) {\r\n        return ownKeys;\r\n    }\r\n    if (ownKeys.length <= 0) {\r\n        return parentKeys;\r\n    }\r\n    var set = Set_1.createSet();\r\n    var keys = [];\r\n    for (var _i = 0; _i < ownKeys.length; _i++) {\r\n        var key = ownKeys[_i];\r\n        var hasKey = set.has(key);\r\n        if (!hasKey) {\r\n            set.add(key);\r\n            keys.push(key);\r\n        }\r\n    }\r\n    for (var _a = 0; _a < parentKeys.length; _a++) {\r\n        var key = parentKeys[_a];\r\n        var hasKey = set.has(key);\r\n        if (!hasKey) {\r\n            set.add(key);\r\n            keys.push(key);\r\n        }\r\n    }\r\n    return keys;\r\n}\r\n// https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinaryownmetadatakeys--o-p-\r\nfunction OrdinaryOwnMetadataKeys(target, targetKey) {\r\n    var metadataMap = GetOrCreateMetadataMap(target, targetKey, false);\r\n    var keys = [];\r\n    if (metadataMap) {\r\n        metadataMap.forEach(function (_, key) { return keys.push(key); });\r\n    }\r\n    return keys;\r\n}\r\n// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-language-types-undefined-type\r\nfunction IsUndefined(x) {\r\n    return x === undefined;\r\n}\r\n// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isarray\r\nfunction IsArray(x) {\r\n    return Array.isArray(x);\r\n}\r\n// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object-type\r\nfunction IsObject(x) {\r\n    return typeof x === \"object\" ? x !== null : typeof x === \"function\";\r\n}\r\n// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isconstructor\r\nfunction IsConstructor(x) {\r\n    return typeof x === \"function\";\r\n}\r\n// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-language-types-symbol-type\r\nfunction IsSymbol(x) {\r\n    return typeof x === \"symbol\";\r\n}\r\n// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-topropertykey\r\nfunction ToPropertyKey(value) {\r\n    if (IsSymbol(value)) {\r\n        return value;\r\n    }\r\n    return String(value);\r\n}\r\nfunction GetPrototypeOf(O) {\r\n    var proto = Object.getPrototypeOf(O);\r\n    if (typeof O !== \"function\" || O === functionPrototype) {\r\n        return proto;\r\n    }\r\n    // TypeScript doesn't set __proto__ in ES5, as it's non-standard. \r\n    // Try to determine the superclass constructor. Compatible implementations\r\n    // must either set __proto__ on a subclass constructor to the superclass constructor,\r\n    // or ensure each class has a valid `constructor` property on its prototype that\r\n    // points back to the constructor.\r\n    // If this is not the same as Function.[[Prototype]], then this is definately inherited.\r\n    // This is the case when in ES6 or when using __proto__ in a compatible browser.\r\n    if (proto !== functionPrototype) {\r\n        return proto;\r\n    }\r\n    // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\r\n    var prototype = O.prototype;\r\n    var prototypeProto = Object.getPrototypeOf(prototype);\r\n    if (prototypeProto == null || prototypeProto === Object.prototype) {\r\n        return proto;\r\n    }\r\n    // if the constructor was not a function, then we cannot determine the heritage.\r\n    var constructor = prototypeProto.constructor;\r\n    if (typeof constructor !== \"function\") {\r\n        return proto;\r\n    }\r\n    // if we have some kind of self-reference, then we cannot determine the heritage.\r\n    if (constructor === O) {\r\n        return proto;\r\n    }\r\n    // we have a pretty good guess at the heritage.\r\n    return constructor;\r\n}\r\nexports.implementsMetaDataKey = \"wx:interfaceImpl\";\r\n/**\r\n* Interface decorator\r\n* @param {string} interfaceName Name of an interface\r\n*/\r\nfunction Implements(value) {\r\n    return function (target) {\r\n        var interfaces = getMetadata(exports.implementsMetaDataKey, target) || {};\r\n        if (typeof (value) === \"string\")\r\n            value = value.split(/\\s+/).map(function (x) { return x.trim(); }).filter(function (x) { return x; });\r\n        for (var i = 0; i < value.length; i++)\r\n            interfaces[value[i]] = true;\r\n        defineMetadata(exports.implementsMetaDataKey, interfaces, target);\r\n    };\r\n}\r\nexports.Implements = Implements;\r\n//# sourceMappingURL=Reflect.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Reflect.js\n ** module id = 4\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/typescript/bin/lib.es6.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Oid_1 = require(\"../Core/Oid\");\r\n\"use strict\";\r\n/**\r\n* This class emulates the semantics of a WeakMap.\r\n* Even though this implementation is indeed \"weak\", it has the drawback of\r\n* requiring manual housekeeping of entries otherwise they are kept forever.\r\n* @class\r\n*/\r\nvar WeakMapEmulated = (function () {\r\n    function WeakMapEmulated() {\r\n        ////////////////////\r\n        /// Implementation\r\n        this.inner = {};\r\n    }\r\n    ////////////////////\r\n    /// IWeakMap\r\n    WeakMapEmulated.prototype.set = function (key, value) {\r\n        var oid = Oid_1.getOid(key);\r\n        this.inner[oid] = value;\r\n    };\r\n    WeakMapEmulated.prototype.get = function (key) {\r\n        var oid = Oid_1.getOid(key);\r\n        return this.inner[oid];\r\n    };\r\n    WeakMapEmulated.prototype.has = function (key) {\r\n        var oid = Oid_1.getOid(key);\r\n        return this.inner.hasOwnProperty(oid);\r\n    };\r\n    WeakMapEmulated.prototype.delete = function (key) {\r\n        var oid = Oid_1.getOid(key);\r\n        return delete this.inner[oid];\r\n    };\r\n    Object.defineProperty(WeakMapEmulated.prototype, \"isEmulated\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return WeakMapEmulated;\r\n})();\r\nvar hasNativeSupport = typeof WeakMap === \"function\";\r\n//let hasNativeSupport = false;\r\n/**\r\n* Creates a new WeakMap instance\r\n* @param {boolean} disableNativeSupport Force creation of an emulated implementation, regardless of browser native support.\r\n* @return {IWeakMap<TKey, T>} A new instance of a suitable IWeakMap implementation\r\n*/\r\nfunction createWeakMap(disableNativeSupport) {\r\n    if (disableNativeSupport || !hasNativeSupport) {\r\n        return new WeakMapEmulated();\r\n    }\r\n    return new WeakMap();\r\n}\r\nexports.createWeakMap = createWeakMap;\r\n//# sourceMappingURL=WeakMap.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Collections/WeakMap.js\n ** module id = 5\n ** module chunks = 0\n **/","\"use strict\";\r\nvar oid = 1;\r\nvar oidPropertyName = \"__wx_oid__\" + (new Date).getTime();\r\nfunction isPrimitive(target) {\r\n    var t = typeof target;\r\n    return t === \"boolean\" || t === \"number\" || t === \"string\";\r\n}\r\n/**\r\n* Returns the objects unique id or assigns it if unassigned\r\n* @param {any} o\r\n*/\r\nfunction getOid(o) {\r\n    if (o == null)\r\n        return undefined;\r\n    if (isPrimitive(o))\r\n        return (typeof o + \":\" + o);\r\n    // already set?\r\n    if (o.hasOwnProperty(oidPropertyName))\r\n        return o[oidPropertyName];\r\n    // assign new one\r\n    var result = (++oid).toString();\r\n    // store as non-enumerable property to avoid confusing other libraries\r\n    Object.defineProperty(o, oidPropertyName, {\r\n        enumerable: false,\r\n        configurable: false,\r\n        writable: false,\r\n        value: result\r\n    });\r\n    return result;\r\n}\r\nexports.getOid = getOid;\r\n//# sourceMappingURL=Oid.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Oid.js\n ** module id = 6\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/typescript/bin/lib.es6.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Oid_1 = require(\"../Core/Oid\");\r\n\"use strict\";\r\n/**\r\n* ES6 Set Shim\r\n* @class\r\n*/\r\nvar SetEmulated = (function () {\r\n    function SetEmulated() {\r\n        ////////////////////\r\n        /// Implementation\r\n        this.values = [];\r\n        this.keys = {};\r\n    }\r\n    ////////////////////\r\n    /// ISet\r\n    SetEmulated.prototype.add = function (value) {\r\n        var key = Oid_1.getOid(value);\r\n        if (!this.keys[key]) {\r\n            this.values.push(value);\r\n            this.keys[key] = true;\r\n        }\r\n        return this;\r\n    };\r\n    SetEmulated.prototype.delete = function (value) {\r\n        var key = Oid_1.getOid(value);\r\n        if (this.keys[key]) {\r\n            var index = this.values.indexOf(value);\r\n            this.values.splice(index, 1);\r\n            delete this.keys[key];\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    SetEmulated.prototype.has = function (value) {\r\n        var key = Oid_1.getOid(value);\r\n        return this.keys.hasOwnProperty(key);\r\n    };\r\n    SetEmulated.prototype.clear = function () {\r\n        this.keys = {};\r\n        this.values.length = 0;\r\n    };\r\n    SetEmulated.prototype.forEach = function (callback, thisArg) {\r\n        this.values.forEach(callback, thisArg);\r\n    };\r\n    Object.defineProperty(SetEmulated.prototype, \"size\", {\r\n        get: function () {\r\n            return this.values.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SetEmulated.prototype, \"isEmulated\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return SetEmulated;\r\n})();\r\nvar hasNativeSupport = typeof Set === \"function\" && Set.prototype.hasOwnProperty(\"forEach\")\r\n    && Set.prototype.hasOwnProperty(\"add\") && Set.prototype.hasOwnProperty(\"clear\")\r\n    && Set.prototype.hasOwnProperty(\"delete\") && Set.prototype.hasOwnProperty(\"has\");\r\n/**\r\n* Creates a new Set instance\r\n* @param {boolean} disableNativeSupport Force creation of an emulated implementation, regardless of browser native support.\r\n* @return {ISet<T>} A new instance of a suitable ISet implementation\r\n*/\r\nfunction createSet(disableNativeSupport) {\r\n    if (disableNativeSupport || !hasNativeSupport) {\r\n        return new SetEmulated();\r\n    }\r\n    return new Set();\r\n}\r\nexports.createSet = createSet;\r\n/**\r\n* Extracts the values of a Set by invoking its forEach method and capturing the output\r\n*/\r\nfunction setToArray(src) {\r\n    var result = new Array();\r\n    src.forEach(function (x) { return result.push(x); });\r\n    return result;\r\n}\r\nexports.setToArray = setToArray;\r\n//# sourceMappingURL=Set.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Collections/Set.js\n ** module id = 7\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/typescript/bin/lib.es6.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\n\"use strict\";\r\n/**\r\n* ES6 Map Shim\r\n* @class\r\n*/\r\nvar MapEmulated = (function () {\r\n    function MapEmulated() {\r\n        ////////////////////\r\n        /// Implementation\r\n        this.cacheSentinel = {};\r\n        this.keys = [];\r\n        this.values = [];\r\n        this.cache = this.cacheSentinel;\r\n    }\r\n    Object.defineProperty(MapEmulated.prototype, \"size\", {\r\n        ////////////////////\r\n        /// IMap\r\n        get: function () {\r\n            return this.keys.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MapEmulated.prototype.has = function (key) {\r\n        if (key === this.cache) {\r\n            return true;\r\n        }\r\n        if (this.find(key) >= 0) {\r\n            this.cache = key;\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    MapEmulated.prototype.get = function (key) {\r\n        var index = this.find(key);\r\n        if (index >= 0) {\r\n            this.cache = key;\r\n            return this.values[index];\r\n        }\r\n        return undefined;\r\n    };\r\n    MapEmulated.prototype.set = function (key, value) {\r\n        this.delete(key);\r\n        this.keys.push(key);\r\n        this.values.push(value);\r\n        this.cache = key;\r\n        return this;\r\n    };\r\n    MapEmulated.prototype.delete = function (key) {\r\n        var index = this.find(key);\r\n        if (index >= 0) {\r\n            this.keys.splice(index, 1);\r\n            this.values.splice(index, 1);\r\n            this.cache = this.cacheSentinel;\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    MapEmulated.prototype.clear = function () {\r\n        this.keys.length = 0;\r\n        this.values.length = 0;\r\n        this.cache = this.cacheSentinel;\r\n    };\r\n    MapEmulated.prototype.forEach = function (callback, thisArg) {\r\n        var size = this.size;\r\n        for (var i = 0; i < size; ++i) {\r\n            var key = this.keys[i];\r\n            var value = this.values[i];\r\n            this.cache = key;\r\n            callback.call(this, value, key, this);\r\n        }\r\n    };\r\n    Object.defineProperty(MapEmulated.prototype, \"isEmulated\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MapEmulated.prototype.find = function (key) {\r\n        var keys = this.keys;\r\n        var size = keys.length;\r\n        for (var i = 0; i < size; ++i) {\r\n            if (keys[i] === key) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    return MapEmulated;\r\n})();\r\nvar hasNativeSupport = typeof Map === \"function\" && Map.prototype.hasOwnProperty(\"forEach\")\r\n    && Map.prototype.hasOwnProperty(\"add\") && Map.prototype.hasOwnProperty(\"clear\")\r\n    && Map.prototype.hasOwnProperty(\"devare\") && Map.prototype.hasOwnProperty(\"has\");\r\n/**\r\n* Creates a new WeakMap instance\r\n* @param {boolean} disableNativeSupport Force creation of an emulated implementation, regardless of browser native support.\r\n* @return {IWeakMap<TKey, T>} A new instance of a suitable IWeakMap implementation\r\n*/\r\nfunction createMap(disableNativeSupport) {\r\n    if (disableNativeSupport || !hasNativeSupport) {\r\n        return new MapEmulated();\r\n    }\r\n    return new Map();\r\n}\r\nexports.createMap = createMap;\r\n//# sourceMappingURL=Map.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Collections/Map.js\n ** module id = 8\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\n\"use strict\";\r\nvar PropertyChangedEventArgs = (function () {\r\n    /// <summary>\r\n    /// Initializes a new instance of the <see cref=\"ObservablePropertyChangedEventArgs{TSender}\"/> class.\r\n    /// </summary>\r\n    /// <param name=\"sender\">The sender.</param>\r\n    /// <param name=\"propertyName\">Name of the property.</param>\r\n    function PropertyChangedEventArgs(sender, propertyName) {\r\n        this.propertyName = propertyName;\r\n        this.sender = sender;\r\n    }\r\n    return PropertyChangedEventArgs;\r\n})();\r\nexports.PropertyChangedEventArgs = PropertyChangedEventArgs;\r\n//# sourceMappingURL=Events.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Events.js\n ** module id = 9\n ** module chunks = 0\n **/","\"use strict\";\r\n/// <summary>\r\n/// Interface registry to be used with IUnknown.queryInterface\r\n/// </summary>\r\nvar IID = (function () {\r\n    function IID() {\r\n    }\r\n    IID.IDisposable = \"IDisposable\";\r\n    IID.IObservableProperty = \"IObservableProperty\";\r\n    IID.IObservableList = \"IObservableList\";\r\n    IID.ICommand = \"ICommand\";\r\n    IID.IHandleObservableErrors = \"IHandleObservableErrors\";\r\n    return IID;\r\n})();\r\nexports.default = IID;\r\n//# sourceMappingURL=IID.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/IID.js\n ** module id = 10\n ** module chunks = 0\n **/","\"use strict\";\r\nexports.app = \"app\";\r\nexports.injector = \"injector\";\r\nexports.domManager = \"domservice\";\r\nexports.router = \"router\";\r\nexports.messageBus = \"messageBus\";\r\nexports.expressionCompiler = \"expressioncompiler\";\r\nexports.templateEngine = \"templateEngine\";\r\nexports.hasValueBindingValue = \"has.bindings.value\";\r\nexports.valueBindingValue = \"bindings.value\";\r\n//# sourceMappingURL=Resources.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Resources.js\n ** module id = 11\n ** module chunks = 0\n **/","var Utils_1 = require(\"../Core/Utils\");\r\n\"use strict\";\r\nfunction log() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i - 0] = arguments[_i];\r\n    }\r\n    try {\r\n        console.log.apply(console, arguments);\r\n    }\r\n    catch (e) {\r\n        try {\r\n            window['opera'].postError.apply(window['opera'], arguments);\r\n        }\r\n        catch (e) {\r\n            alert(Array.prototype.join.call(arguments, \" \"));\r\n        }\r\n    }\r\n}\r\nfunction critical(fmt) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    if (args.length) {\r\n        fmt = Utils_1.formatString.apply(null, [fmt].concat(args));\r\n    }\r\n    log(\"**** WebRx Critical: \" + fmt);\r\n}\r\nexports.critical = critical;\r\nfunction error(fmt) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    if (args.length) {\r\n        fmt = Utils_1.formatString.apply(null, [fmt].concat(args));\r\n    }\r\n    log(\"*** WebRx Error: \" + fmt);\r\n}\r\nexports.error = error;\r\nfunction info(fmt) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    if (args.length) {\r\n        fmt = Utils_1.formatString.apply(null, [fmt].concat(args));\r\n    }\r\n    log(\"* WebRx Info: \" + fmt);\r\n}\r\nexports.info = info;\r\n//# sourceMappingURL=Log.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Log.js\n ** module id = 12\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar Reflect_1 = require(\"./Reflect\");\r\nvar IID_1 = require(\"../IID\");\r\n// NOTE: The factory method approach is necessary because it is  \r\n// currently impossible to implement a Typescript interface \r\n// with a function signature in a Typescript class.\r\n\"use strict\";\r\n/**\r\n* Creates an observable property with an optional default value\r\n* @param {T} initialValue?\r\n*/\r\nfunction property(initialValue) {\r\n    // initialize accessor function\r\n    var accessor = function (newVal) {\r\n        if (arguments.length > 0) {\r\n            // set\r\n            if (newVal !== accessor.value) {\r\n                accessor.changingSubject.onNext(newVal);\r\n                accessor.value = newVal;\r\n                accessor.changedSubject.onNext(newVal);\r\n            }\r\n        }\r\n        else {\r\n            // get\r\n            return accessor.value;\r\n        }\r\n    };\r\n    Reflect_1.Implements(IID_1.default.IObservableProperty)(accessor);\r\n    Reflect_1.Implements(IID_1.default.IDisposable)(accessor);\r\n    //////////////////////////////////\r\n    // IDisposable implementation\r\n    accessor.dispose = function () {\r\n    };\r\n    //////////////////////////////////\r\n    // IObservableProperty<T> implementation\r\n    if (initialValue !== undefined)\r\n        accessor.value = initialValue;\r\n    // setup observables\r\n    accessor.changedSubject = new Rx.Subject();\r\n    accessor.changed = accessor.changedSubject\r\n        .publish()\r\n        .refCount();\r\n    accessor.changingSubject = new Rx.Subject();\r\n    accessor.changing = accessor.changingSubject\r\n        .publish()\r\n        .refCount();\r\n    return accessor;\r\n}\r\nexports.property = property;\r\n//# sourceMappingURL=Property.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Property.js\n ** module id = 13\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar Injector_1 = require(\"./Injector\");\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar res = require(\"./Resources\");\r\n\"use strict\";\r\nvar Module = (function () {\r\n    function Module(name) {\r\n        //////////////////////////////////\r\n        // Implementation\r\n        this.bindings = {};\r\n        this.components = {};\r\n        this.expressionFilters = {};\r\n        this.animations = {};\r\n        this.name = name;\r\n    }\r\n    //////////////////////////////////\r\n    // wx.IModule\r\n    Module.prototype.merge = function (other) {\r\n        var _other = other;\r\n        Utils_1.extend(_other.components, this.components);\r\n        Utils_1.extend(_other.bindings, this.bindings);\r\n        Utils_1.extend(_other.expressionFilters, this.expressionFilters);\r\n        Utils_1.extend(_other.animations, this.animations);\r\n        return this;\r\n    };\r\n    Module.prototype.component = function (name, component) {\r\n        this.components[name] = component;\r\n        return this;\r\n    };\r\n    Module.prototype.hasComponent = function (name) {\r\n        return this.components[name] != null;\r\n    };\r\n    Module.prototype.loadComponent = function (name, params) {\r\n        return this.initializeComponent(this.instantiateComponent(name), params);\r\n    };\r\n    Module.prototype.binding = function () {\r\n        var _this = this;\r\n        var args = Utils_1.args2Array(arguments);\r\n        var name = args.shift();\r\n        var handler;\r\n        // lookup?\r\n        if (args.length === 0) {\r\n            // if the handler has been registered as resource, resolve it now and update registry\r\n            handler = this.bindings[name];\r\n            if (typeof handler === \"string\") {\r\n                handler = Injector_1.injector.get(handler);\r\n                this.bindings[name] = handler;\r\n            }\r\n            return handler;\r\n        }\r\n        // registration\r\n        handler = args.shift();\r\n        if (Array.isArray(name)) {\r\n            name.forEach(function (x) { return _this.bindings[x] = handler; });\r\n        }\r\n        else {\r\n            this.bindings[name] = handler;\r\n        }\r\n        return this;\r\n    };\r\n    Module.prototype.filter = function () {\r\n        var args = Utils_1.args2Array(arguments);\r\n        var name = args.shift();\r\n        var filter;\r\n        // lookup?\r\n        if (args.length === 0) {\r\n            // if the filter has been registered as resource, resolve it now and update registry\r\n            filter = this.expressionFilters[name];\r\n            if (typeof filter === \"string\") {\r\n                filter = Injector_1.injector.get(filter);\r\n                this.bindings[name] = filter;\r\n            }\r\n            return filter;\r\n        }\r\n        // registration\r\n        filter = args.shift();\r\n        this.expressionFilters[name] = filter;\r\n        return this;\r\n    };\r\n    Module.prototype.filters = function () {\r\n        return this.expressionFilters;\r\n    };\r\n    Module.prototype.animation = function () {\r\n        var args = Utils_1.args2Array(arguments);\r\n        var name = args.shift();\r\n        var animation;\r\n        // lookup?\r\n        if (args.length === 0) {\r\n            // if the animation has been registered as resource, resolve it now and update registry\r\n            animation = this.animations[name];\r\n            if (typeof animation === \"string\") {\r\n                animation = Injector_1.injector.get(animation);\r\n                this.bindings[name] = animation;\r\n            }\r\n            return animation;\r\n        }\r\n        // registration\r\n        animation = args.shift();\r\n        this.animations[name] = animation;\r\n        return this;\r\n    };\r\n    Object.defineProperty(Module.prototype, \"app\", {\r\n        get: function () {\r\n            return Injector_1.injector.get(res.app);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Module.prototype.instantiateComponent = function (name) {\r\n        var _this = this;\r\n        var _cd = this.components[name];\r\n        var result = undefined;\r\n        if (_cd != null) {\r\n            if (Utils_1.isRxObservable(_cd))\r\n                result = _cd;\r\n            else if (Utils_1.isPromise(_cd))\r\n                return Rx.Observable.fromPromise(_cd);\r\n            else {\r\n                // if the component has been registered as resource, resolve it now and update registry\r\n                var cd = _cd;\r\n                if (cd.instance) {\r\n                    result = Rx.Observable.return(cd.instance);\r\n                }\r\n                else if (cd.template) {\r\n                    result = Rx.Observable.return(cd);\r\n                }\r\n                else if (cd.resolve) {\r\n                    var resolved = Injector_1.injector.get(cd.resolve);\r\n                    result = Rx.Observable.return(resolved);\r\n                }\r\n                else if (cd.require) {\r\n                    result = Utils_1.observableRequire(cd.require);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            result = Rx.Observable.return(undefined);\r\n        }\r\n        return result.do(function (x) { return _this.components[name] = { instance: x }; }); // cache descriptor\r\n    };\r\n    Module.prototype.initializeComponent = function (obs, params) {\r\n        var _this = this;\r\n        return obs.take(1).selectMany(function (component) {\r\n            if (component == null) {\r\n                return Rx.Observable.return(undefined);\r\n            }\r\n            return Rx.Observable.combineLatest(_this.loadComponentTemplate(component.template, params), component.viewModel ? _this.loadComponentViewModel(component.viewModel, params) : Rx.Observable.return(undefined), function (t, vm) {\r\n                // if view-model factory yields a function, use it as constructor\r\n                if (Utils_1.isFunction(vm)) {\r\n                    vm = new vm(params);\r\n                }\r\n                return {\r\n                    template: t,\r\n                    viewModel: vm,\r\n                    preBindingInit: component.preBindingInit,\r\n                    postBindingInit: component.postBindingInit\r\n                };\r\n            });\r\n        })\r\n            .take(1);\r\n    };\r\n    Module.prototype.loadComponentTemplate = function (template, params) {\r\n        var _this = this;\r\n        var syncResult;\r\n        var el;\r\n        if (Utils_1.isFunction(template)) {\r\n            syncResult = template(params);\r\n            if (Utils_1.isRxObservable(template))\r\n                return template;\r\n            if (typeof syncResult === \"string\") {\r\n                syncResult = this.app.templateEngine.parse(template(params));\r\n            }\r\n            return Rx.Observable.return(syncResult);\r\n        }\r\n        else if (typeof template === \"string\") {\r\n            syncResult = this.app.templateEngine.parse(template);\r\n            return Rx.Observable.return(syncResult);\r\n        }\r\n        else if (Array.isArray(template)) {\r\n            return Rx.Observable.return(template);\r\n        }\r\n        else if (typeof template === \"object\") {\r\n            var options = template;\r\n            if (options.resolve) {\r\n                syncResult = Injector_1.injector.get(options.resolve);\r\n                return Rx.Observable.return(syncResult);\r\n            }\r\n            else if (options.promise) {\r\n                var promise = options.promise;\r\n                return Rx.Observable.fromPromise(promise);\r\n            }\r\n            else if (options.observable) {\r\n                return options.observable;\r\n            }\r\n            else if (options.require) {\r\n                return Utils_1.observableRequire(options.require).select(function (x) { return _this.app.templateEngine.parse(x); });\r\n            }\r\n            else if (options.select) {\r\n                // try both getElementById & querySelector\r\n                el = document.getElementById(options.select) ||\r\n                    document.querySelector(options.select);\r\n                if (el != null) {\r\n                    // only the nodes inside the specified element will be cloned for use as the component’s template\r\n                    syncResult = this.app.templateEngine.parse(el.innerHTML);\r\n                }\r\n                else {\r\n                    syncResult = [];\r\n                }\r\n                return Rx.Observable.return(syncResult);\r\n            }\r\n        }\r\n        Utils_1.throwError(\"invalid template descriptor\");\r\n    };\r\n    Module.prototype.loadComponentViewModel = function (vm, componentParams) {\r\n        var syncResult;\r\n        if (Utils_1.isFunction(vm)) {\r\n            return Rx.Observable.return(vm);\r\n        }\r\n        else if (Array.isArray(vm)) {\r\n            // assumed to be inline-annotated-array\r\n            syncResult = Injector_1.injector.resolve(vm, componentParams);\r\n            return Rx.Observable.return(syncResult);\r\n        }\r\n        else if (typeof vm === \"object\") {\r\n            var options = vm;\r\n            if (options.resolve) {\r\n                syncResult = Injector_1.injector.get(options.resolve, componentParams);\r\n                return Rx.Observable.return(syncResult);\r\n            }\r\n            else if (options.observable) {\r\n                return options.observable;\r\n            }\r\n            else if (options.promise) {\r\n                var promise = options.promise;\r\n                return Rx.Observable.fromPromise(promise);\r\n            }\r\n            else if (options.require) {\r\n                return Utils_1.observableRequire(options.require);\r\n            }\r\n            else if (options.instance) {\r\n                return Rx.Observable.return(options.instance);\r\n            }\r\n        }\r\n        Utils_1.throwError(\"invalid view-model descriptor\");\r\n    };\r\n    return Module;\r\n})();\r\nexports.Module = Module;\r\nexports.modules = {};\r\n/**\r\n* Defines a module.\r\n* @param {string} name The module name\r\n* @return {wx.IModule} The module handle\r\n*/\r\nfunction module(name, descriptor) {\r\n    exports.modules[name] = descriptor;\r\n    return this;\r\n}\r\nexports.module = module;\r\n/**\r\n* Instantiate a new module instance and configure it using the user supplied configuration\r\n* @param {string} name The module name\r\n* @return {wx.IModule} The module handle\r\n*/\r\nfunction loadModule(name) {\r\n    var md = exports.modules[name];\r\n    var result = undefined;\r\n    var module;\r\n    if (md != null) {\r\n        if (Array.isArray(md)) {\r\n            // assumed to be inline-annotated-array\r\n            // resolve the configuration function via DI and invoke it with the module instance as argument\r\n            module = new Module(name);\r\n            Injector_1.injector.resolve(md, module);\r\n            result = Rx.Observable.return(module);\r\n        }\r\n        else if (Utils_1.isFunction(md)) {\r\n            // configuration function\r\n            module = new Module(name);\r\n            md(module);\r\n            result = Rx.Observable.return(module);\r\n        }\r\n        else {\r\n            var mdd = md;\r\n            if (mdd.instance) {\r\n                result = Rx.Observable.return(mdd.instance);\r\n            }\r\n            else {\r\n                module = new Module(name);\r\n                if (mdd.resolve) {\r\n                    // resolve the configuration function via DI and invoke it with the module instance as argument\r\n                    Injector_1.injector.get(mdd.resolve, module);\r\n                    result = Rx.Observable.return(module);\r\n                }\r\n                else if (mdd.require) {\r\n                    // load the configuration function from external module and invoke it with the module instance as argument\r\n                    result = Utils_1.observableRequire(mdd.require)\r\n                        .do(function (x) { return x(module); }) // configure the module\r\n                        .select(function (x) { return module; });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        result = Rx.Observable.return(undefined);\r\n    }\r\n    return result.take(1).do(function (x) { return exports.modules[name] = { instance: x }; }); // cache instantiated module\r\n}\r\nexports.loadModule = loadModule;\r\n//# sourceMappingURL=Module.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Module.js\n ** module id = 14\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\n\"use strict\";\r\n/**\r\n* Knockout's object-literal parser ported to Typescript\r\n*/\r\n// The following regular expressions will be used to split an object-literal string into tokens\r\n// These two match strings, either with double quotes or single quotes\r\nvar stringDouble = '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"';\r\nvar stringSingle = \"'(?:[^'\\\\\\\\]|\\\\\\\\.)*'\";\r\n// Matches a regular expression (text enclosed by slashes), but will also match sets of divisions\r\n// as a regular expression (this is handled by the parsing loop below).\r\nvar stringRegexp = '/(?:[^/\\\\\\\\]|\\\\\\\\.)*/\\w*';\r\n// These characters have special meaning to the parser and must not appear in the middle of a\r\n// token, except as part of a string.\r\nvar specials = ',\"\\'{}()/:[\\\\]';\r\n// Match text (at least two characters) that does not contain any of the above special characters,\r\n// although some of the special characters are allowed to start it (all but the colon and comma).\r\n// The text can contain spaces, but leading or trailing spaces are skipped.\r\nvar everyThingElse = '[^\\\\s:,/][^' + specials + ']*[^\\\\s' + specials + ']';\r\n// Match any non-space character not matched already. This will match colons and commas, since they're\r\n// not matched by \"everyThingElse\", but will also match any other single character that wasn't already\r\n// matched (for example: in \"a: 1, b: 2\", each of the non-space characters will be matched by oneNotSpace).\r\nvar oneNotSpace = '[^\\\\s]';\r\n// Create the actual regular expression by or-ing the above strings. The order is important.\r\nvar bindingToken = RegExp(stringDouble + '|' + stringSingle + '|' + stringRegexp + '|' + everyThingElse + '|' + oneNotSpace, 'g');\r\n// Match end of previous token to determine whether a slash is a division or regex.\r\nvar divisionLookBehind = /[\\])\"'A-Za-z0-9_$]+$/;\r\nvar keywordRegexLookBehind = { 'in': 1, 'return': 1, 'typeof': 1 };\r\n// Simplified extend() for our use-case\r\nfunction extend(dst, obj) {\r\n    var key;\r\n    for (key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n            dst[key] = obj[key];\r\n        }\r\n    }\r\n    return dst;\r\n}\r\n/**\r\n* Split an object-literal string into tokens (borrowed from the KnockoutJS project)\r\n* @param {string} objectLiteralString A javascript-style object literal without leading and trailing curly brances\r\n* @return {Command<any>} A Command whose ExecuteAsync just returns the CommandParameter immediately. Which you should ignore!\r\n*/\r\nfunction parseObjectLiteral(objectLiteralString) {\r\n    // Trim leading and trailing spaces from the string\r\n    var str = objectLiteralString.trim();\r\n    // Trim braces '{' surrounding the whole object literal\r\n    if (str.charCodeAt(0) === 123)\r\n        str = str.slice(1, -1);\r\n    // Split into tokens\r\n    var result = new Array(), toks = str.match(bindingToken), key, values, depth = 0;\r\n    if (toks) {\r\n        // Append a comma so that we don't need a separate code block to deal with the last item\r\n        toks.push(',');\r\n        for (var i = 0, tok = void 0; tok = toks[i]; ++i) {\r\n            var c = tok.charCodeAt(0);\r\n            // A comma signals the end of a key/value pair if depth is zero\r\n            if (c === 44) {\r\n                if (depth <= 0) {\r\n                    if (key)\r\n                        result.push(values ? { key: key, value: values.join('') } : { 'unknown': key, value: undefined });\r\n                    key = values = depth = 0;\r\n                    continue;\r\n                }\r\n            }\r\n            else if (c === 58) {\r\n                if (!values)\r\n                    continue;\r\n            }\r\n            else if (c === 47 && i && tok.length > 1) {\r\n                // Look at the end of the previous token to determine if the slash is actually division\r\n                var match = toks[i - 1].match(divisionLookBehind);\r\n                if (match && !keywordRegexLookBehind[match[0]]) {\r\n                    // The slash is actually a division punctuator; re-parse the remainder of the string (not including the slash)\r\n                    str = str.substr(str.indexOf(tok) + 1);\r\n                    toks = str.match(bindingToken);\r\n                    toks.push(',');\r\n                    i = -1;\r\n                    // Continue with just the slash\r\n                    tok = '/';\r\n                }\r\n            }\r\n            else if (c === 40 || c === 123 || c === 91) {\r\n                ++depth;\r\n            }\r\n            else if (c === 41 || c === 125 || c === 93) {\r\n                --depth;\r\n            }\r\n            else if (!key && !values) {\r\n                key = (c === 34 || c === 39) /* '\"', \"'\" */ ? tok.slice(1, -1) : tok;\r\n                continue;\r\n            }\r\n            if (values)\r\n                values.push(tok);\r\n            else\r\n                values = [tok];\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.parseObjectLiteral = parseObjectLiteral;\r\n/**\r\n* Angular's expression compiler ported to Typescript\r\n*/\r\nvar hookField = \"___runtimeHooks\";\r\nfunction isDefined(value) { return typeof value !== \"undefined\"; }\r\n//function valueFn(value) { return () => value; }\r\nfunction $parseMinErr(module, message, arg1, arg2, arg3, arg4, arg5) {\r\n    var args = arguments;\r\n    message = message.replace(/{(\\d)}/g, function (match) {\r\n        return args[2 + parseInt(match[1])];\r\n    });\r\n    throw new SyntaxError(message);\r\n}\r\nfunction lowercase(string) { return typeof string === \"string\" ? string.toLowerCase() : string; }\r\n// Sandboxing Angular Expressions\r\n// ------------------------------\r\n// Angular expressions are generally considered safe because these expressions only have direct\r\n// access to $scope and locals. However, one can obtain the ability to execute arbitrary JS code by\r\n// obtaining a reference to native JS functions such as the Function constructor.\r\n//\r\n// As an example, consider the following Angular expression:\r\n//\r\n//   {}.toString.constructor(alert(\"evil JS code\"))\r\n//\r\n// We want to prevent this type of access. For the sake of performance, during the lexing phase we\r\n// disallow any \"dotted\" access to any member named \"constructor\".\r\n//\r\n// For reflective calls (a[b]) we check that the value of the lookup is not the Function constructor\r\n// while evaluating the expression, which is a stronger but more expensive test. Since reflective\r\n// calls are expensive anyway, this is not such a big deal compared to static dereferencing.\r\n//\r\n// This sandboxing technique is not perfect and doesn't aim to be. The goal is to prevent exploits\r\n// against the expression language, but not to prevent exploits that were enabled by exposing\r\n// sensitive JavaScript or browser apis on Scope. Exposing such objects on a Scope is never a good\r\n// practice and therefore we are not even trying to protect against interaction with an object\r\n// explicitly exposed in this way.\r\n//\r\n// A developer could foil the name check by aliasing the Function constructor under a different\r\n// name on the scope.\r\n//\r\n// In general, it is not possible to access a Window object from an angular expression unless a\r\n// window or some DOM object that has a reference to window is published onto a Scope.\r\nfunction ensureSafeMemberName(name, fullExpression) {\r\n    if (name === \"constructor\") {\r\n        throw $parseMinErr(\"isecfld\", \"Referencing \\\"constructor\\\" field in WebRx expressions is disallowed! Expression: {0}\", fullExpression);\r\n    }\r\n    return name;\r\n}\r\nfunction ensureSafeObject(obj, fullExpression) {\r\n    // nifty check if obj is Function that is fast and works across iframes and other contexts\r\n    if (obj) {\r\n        if (obj.constructor === obj) {\r\n            throw $parseMinErr(\"isecfn\", \"Referencing Function in WebRx expressions is disallowed! Expression: {0}\", fullExpression);\r\n        }\r\n        else if (obj.document && obj.location && obj.alert && obj.setInterval) {\r\n            throw $parseMinErr(\"isecwindow\", \"Referencing the Window in WebRx expressions is disallowed! Expression: {0}\", fullExpression);\r\n        }\r\n        else if (obj.children && (obj.nodeName || (obj.prop && obj.attr && obj.find))) {\r\n            throw $parseMinErr(\"isecdom\", \"Referencing DOM nodes in WebRx expressions is disallowed! Expression: {0}\", fullExpression);\r\n        }\r\n    }\r\n    return obj;\r\n}\r\nvar OPERATORS = {\r\n    /* jshint bitwise : false */\r\n    'null': function () { return null; },\r\n    'true': function () { return true; },\r\n    'false': function () { return false; },\r\n    undefined: Utils_1.noop,\r\n    '+': function (self, locals, a, b) {\r\n        a = a(self, locals);\r\n        b = b(self, locals);\r\n        if (isDefined(a)) {\r\n            if (isDefined(b)) {\r\n                return a + b;\r\n            }\r\n            return a;\r\n        }\r\n        return isDefined(b) ? b : undefined;\r\n    },\r\n    '-': function (self, locals, a, b) {\r\n        a = a(self, locals);\r\n        b = b(self, locals);\r\n        return (isDefined(a) ? a : 0) - (isDefined(b) ? b : 0);\r\n    },\r\n    '*': function (self, locals, a, b) { return a(self, locals) * b(self, locals); },\r\n    '/': function (self, locals, a, b) { return a(self, locals) / b(self, locals); },\r\n    '%': function (self, locals, a, b) { return a(self, locals) % b(self, locals); },\r\n    '^': function (self, locals, a, b) { return a(self, locals) ^ b(self, locals); },\r\n    '=': Utils_1.noop,\r\n    '===': function (self, locals, a, b) { return a(self, locals) === b(self, locals); },\r\n    '!==': function (self, locals, a, b) { return a(self, locals) !== b(self, locals); },\r\n    '==': function (self, locals, a, b) { return a(self, locals) === b(self, locals); },\r\n    '!=': function (self, locals, a, b) { return a(self, locals) !== b(self, locals); },\r\n    '<': function (self, locals, a, b) { return a(self, locals) < b(self, locals); },\r\n    '>': function (self, locals, a, b) { return a(self, locals) > b(self, locals); },\r\n    '<=': function (self, locals, a, b) { return a(self, locals) <= b(self, locals); },\r\n    '>=': function (self, locals, a, b) { return a(self, locals) >= b(self, locals); },\r\n    '&&': function (self, locals, a, b) { return a(self, locals) && b(self, locals); },\r\n    '||': function (self, locals, a, b) { return a(self, locals) || b(self, locals); },\r\n    '&': function (self, locals, a, b) { return a(self, locals) & b(self, locals); },\r\n    //    '|':function(self, locals, a,b){return a|b;},\r\n    '|': function (self, locals, a, b) { return b(self, locals)(self, locals, a(self, locals)); },\r\n    '!': function (self, locals, a) { return !a(self, locals); }\r\n};\r\n/* jshint bitwise: true */\r\nvar ESCAPE = { \"n\": \"\\n\", \"f\": \"\\f\", \"r\": \"\\r\", \"t\": \"\\t\", \"v\": \"\\v\", \"'\": \"'\", '\"': \"\\\"\" };\r\n/**\r\n* @constructor\r\n*/\r\nvar Lexer = (function () {\r\n    function Lexer(options) {\r\n        this.options = options;\r\n    }\r\n    Lexer.prototype.lex = function (text) {\r\n        this.text = text;\r\n        this.index = 0;\r\n        this.ch = undefined;\r\n        this.lastCh = \":\"; // can start regexp\r\n        this.tokens = [];\r\n        var token;\r\n        var json = [];\r\n        while (this.index < this.text.length) {\r\n            this.ch = this.text.charAt(this.index);\r\n            if (this.is(\"\\\"'\")) {\r\n                this.readString(this.ch);\r\n            }\r\n            else if (this.isNumber(this.ch) || this.is(\".\") && this.isNumber(this.peek())) {\r\n                this.readNumber();\r\n            }\r\n            else if (this.isIdent(this.ch)) {\r\n                this.readIdent();\r\n                // identifiers can only be if the preceding char was a { or ,\r\n                if (this.was(\"{,\") && json[0] === \"{\" &&\r\n                    (token = this.tokens[this.tokens.length - 1])) {\r\n                    token.json = token.text.indexOf(\".\") === -1;\r\n                }\r\n            }\r\n            else if (this.is(\"(){}[].,;:?\")) {\r\n                this.tokens.push({\r\n                    index: this.index,\r\n                    text: this.ch,\r\n                    json: (this.was(\":[,\") && this.is(\"{[\")) || this.is(\"}]:,\")\r\n                });\r\n                if (this.is(\"{[\"))\r\n                    json.unshift(this.ch);\r\n                if (this.is(\"}]\"))\r\n                    json.shift();\r\n                this.index++;\r\n            }\r\n            else if (this.isWhitespace(this.ch)) {\r\n                this.index++;\r\n                continue;\r\n            }\r\n            else {\r\n                var ch2 = this.ch + this.peek();\r\n                var ch3 = ch2 + this.peek(2);\r\n                var fn = OPERATORS[this.ch];\r\n                var fn2 = OPERATORS[ch2];\r\n                var fn3 = OPERATORS[ch3];\r\n                if (fn3) {\r\n                    this.tokens.push({ index: this.index, text: ch3, fn: fn3 });\r\n                    this.index += 3;\r\n                }\r\n                else if (fn2) {\r\n                    this.tokens.push({ index: this.index, text: ch2, fn: fn2 });\r\n                    this.index += 2;\r\n                }\r\n                else if (fn) {\r\n                    this.tokens.push({\r\n                        index: this.index,\r\n                        text: this.ch,\r\n                        fn: fn,\r\n                        json: (this.was(\"[,:\") && this.is(\" + -\"))\r\n                    });\r\n                    this.index += 1;\r\n                }\r\n                else {\r\n                    this.throwError(\"Unexpected next character \", this.index, this.index + 1);\r\n                }\r\n            }\r\n            this.lastCh = this.ch;\r\n        }\r\n        return this.tokens;\r\n    };\r\n    Lexer.prototype.is = function (chars) {\r\n        return chars.indexOf(this.ch) !== -1;\r\n    };\r\n    Lexer.prototype.was = function (chars) {\r\n        return chars.indexOf(this.lastCh) !== -1;\r\n    };\r\n    Lexer.prototype.peek = function (i) {\r\n        var num = i || 1;\r\n        return (this.index + num < this.text.length) ? this.text.charAt(this.index + num) : false;\r\n    };\r\n    Lexer.prototype.isNumber = function (ch) {\r\n        return (\"0\" <= ch && ch <= \"9\");\r\n    };\r\n    Lexer.prototype.isWhitespace = function (ch) {\r\n        // IE treats non-breaking space as \\u00A0\r\n        return (ch === \" \" || ch === \"\\r\" || ch === \"\\t\" ||\r\n            ch === \"\\n\" || ch === \"\\v\" || ch === \"\\u00A0\");\r\n    };\r\n    Lexer.prototype.isIdent = function (ch) {\r\n        return (\"a\" <= ch && ch <= \"z\" ||\r\n            \"A\" <= ch && ch <= \"Z\" ||\r\n            \"_\" === ch || ch === \"$\" || ch === \"@\");\r\n    };\r\n    Lexer.prototype.isExpOperator = function (ch) {\r\n        return (ch === \"-\" || ch === \"+\" || this.isNumber(ch));\r\n    };\r\n    Lexer.prototype.throwError = function (error, start, end) {\r\n        end = end || this.index;\r\n        var colStr = (isDefined(start)\r\n            ? \"s \" + start + \"-\" + this.index + \" [\" + this.text.substring(start, end) + \"]\"\r\n            : \" \" + end);\r\n        throw $parseMinErr(\"lexerr\", \"Lexer Error: {0} at column{1} in expression [{2}].\", error, colStr, this.text);\r\n    };\r\n    Lexer.prototype.readNumber = function () {\r\n        var n = \"\";\r\n        var start = this.index;\r\n        while (this.index < this.text.length) {\r\n            var ch = lowercase(this.text.charAt(this.index));\r\n            if (ch === \".\" || this.isNumber(ch)) {\r\n                n += ch;\r\n            }\r\n            else {\r\n                var peekCh = this.peek();\r\n                if (ch === \"e\" && this.isExpOperator(peekCh)) {\r\n                    n += ch;\r\n                }\r\n                else if (this.isExpOperator(ch) &&\r\n                    peekCh && this.isNumber(peekCh) &&\r\n                    n.charAt(n.length - 1) === \"e\") {\r\n                    n += ch;\r\n                }\r\n                else if (this.isExpOperator(ch) &&\r\n                    (!peekCh || !this.isNumber(peekCh)) &&\r\n                    n.charAt(n.length - 1) === \"e\") {\r\n                    this.throwError(\"Invalid exponent\");\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            this.index++;\r\n        }\r\n        n = 1 * n;\r\n        this.tokens.push({\r\n            index: start,\r\n            text: n,\r\n            json: true,\r\n            fn: function () {\r\n                return n;\r\n            }\r\n        });\r\n    };\r\n    Lexer.prototype.readIdent = function () {\r\n        var parser = this;\r\n        var ident = \"\";\r\n        var start = this.index;\r\n        var lastDot, peekIndex, methodName, ch;\r\n        while (this.index < this.text.length) {\r\n            ch = this.text.charAt(this.index);\r\n            if (ch === \".\" || this.isIdent(ch) || this.isNumber(ch)) {\r\n                if (ch === \".\")\r\n                    lastDot = this.index;\r\n                ident += ch;\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n            this.index++;\r\n        }\r\n        //check if this is not a method invocation and if it is back out to last dot\r\n        if (lastDot) {\r\n            peekIndex = this.index;\r\n            while (peekIndex < this.text.length) {\r\n                ch = this.text.charAt(peekIndex);\r\n                if (ch === \"(\") {\r\n                    methodName = ident.substr(lastDot - start + 1);\r\n                    ident = ident.substr(0, lastDot - start);\r\n                    this.index = peekIndex;\r\n                    break;\r\n                }\r\n                if (this.isWhitespace(ch)) {\r\n                    peekIndex++;\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        var token = {\r\n            index: start,\r\n            text: ident\r\n        };\r\n        // OPERATORS is our own object so we don't need to use special hasOwnPropertyFn\r\n        if (OPERATORS.hasOwnProperty(ident)) {\r\n            token.fn = OPERATORS[ident];\r\n            token.json = OPERATORS[ident];\r\n        }\r\n        else {\r\n            var getter = getterFn(ident, this.options, this.text);\r\n            token.fn = extend(function (self, locals) {\r\n                return (getter(self, locals));\r\n            }, {\r\n                assign: function (self, value, locals) {\r\n                    return setter(self, ident, value, parser.text, parser.options, locals);\r\n                }\r\n            });\r\n        }\r\n        this.tokens.push(token);\r\n        if (methodName) {\r\n            this.tokens.push({\r\n                index: lastDot,\r\n                text: \".\",\r\n                json: false\r\n            });\r\n            this.tokens.push({\r\n                index: lastDot + 1,\r\n                text: methodName,\r\n                json: false\r\n            });\r\n        }\r\n    };\r\n    Lexer.prototype.readString = function (quote) {\r\n        var start = this.index;\r\n        this.index++;\r\n        var value = \"\";\r\n        var rawString = quote;\r\n        var escape = false;\r\n        while (this.index < this.text.length) {\r\n            var ch = this.text.charAt(this.index);\r\n            rawString += ch;\r\n            if (escape) {\r\n                if (ch === \"u\") {\r\n                    var hex = this.text.substring(this.index + 1, this.index + 5);\r\n                    if (!hex.match(/[\\da-f]{4}/i))\r\n                        this.throwError(\"Invalid unicode escape [\\\\u\" + hex + \"]\");\r\n                    this.index += 4;\r\n                    value += String.fromCharCode(parseInt(hex, 16));\r\n                }\r\n                else {\r\n                    var rep = ESCAPE[ch];\r\n                    if (rep) {\r\n                        value += rep;\r\n                    }\r\n                    else {\r\n                        value += ch;\r\n                    }\r\n                }\r\n                escape = false;\r\n            }\r\n            else if (ch === \"\\\\\") {\r\n                escape = true;\r\n            }\r\n            else if (ch === quote) {\r\n                this.index++;\r\n                this.tokens.push({\r\n                    index: start,\r\n                    text: rawString,\r\n                    string: value,\r\n                    json: true,\r\n                    fn: function () {\r\n                        return value;\r\n                    }\r\n                });\r\n                return;\r\n            }\r\n            else {\r\n                value += ch;\r\n            }\r\n            this.index++;\r\n        }\r\n        this.throwError(\"Unterminated quote\", start);\r\n    };\r\n    return Lexer;\r\n})();\r\n/**\r\n* @constructor\r\n*/\r\nvar Parser = (function () {\r\n    function Parser(lexer, options) {\r\n        this.lexer = lexer;\r\n        this.options = options || { filters: {} };\r\n    }\r\n    Parser.prototype.parse = function (text) {\r\n        this.text = text;\r\n        this.tokens = this.lexer.lex(text);\r\n        var value = this.statements();\r\n        if (this.tokens.length !== 0) {\r\n            this.throwError(\"is an unexpected token\", this.tokens[0]);\r\n        }\r\n        value.literal = !!value.literal;\r\n        value.constant = !!value.constant;\r\n        return value;\r\n    };\r\n    Parser.prototype.primary = function () {\r\n        var primary;\r\n        if (this.expect(\"(\")) {\r\n            primary = this.filterChain();\r\n            this.consume(\")\");\r\n        }\r\n        else if (this.expect(\"[\")) {\r\n            primary = this.arrayDeclaration();\r\n        }\r\n        else if (this.expect(\"{\")) {\r\n            primary = this.object();\r\n        }\r\n        else {\r\n            var token = this.expect();\r\n            primary = token.fn;\r\n            if (!primary) {\r\n                this.throwError(\"not a primary expression\", token);\r\n            }\r\n            if (token.json) {\r\n                primary.constant = true;\r\n                primary.literal = true;\r\n            }\r\n        }\r\n        var next, context;\r\n        while ((next = this.expect(\"(\", \"[\", \".\"))) {\r\n            if (next.text === \"(\") {\r\n                primary = this.functionCall(primary, context);\r\n                context = null;\r\n            }\r\n            else if (next.text === \"[\") {\r\n                context = primary;\r\n                primary = this.objectIndex(primary);\r\n            }\r\n            else if (next.text === \".\") {\r\n                context = primary;\r\n                primary = this.fieldAccess(primary);\r\n            }\r\n            else {\r\n                this.throwError(\"IMPOSSIBLE\");\r\n            }\r\n        }\r\n        return primary;\r\n    };\r\n    Parser.prototype.throwError = function (msg, token) {\r\n        throw $parseMinErr(\"syntax\", \"WebRx Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].\", token.text, msg, (token.index + 1), this.text, this.text.substring(token.index));\r\n    };\r\n    Parser.prototype.peekToken = function () {\r\n        if (this.tokens.length === 0)\r\n            throw $parseMinErr(\"ueoe\", \"Unexpected end of expression: {0}\", this.text);\r\n        return this.tokens[0];\r\n    };\r\n    Parser.prototype.peek = function (e1, e2, e3, e4) {\r\n        if (this.tokens.length > 0) {\r\n            var token = this.tokens[0];\r\n            var t = token.text;\r\n            if (t === e1 || t === e2 || t === e3 || t === e4 ||\r\n                (!e1 && !e2 && !e3 && !e4)) {\r\n                return token;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Parser.prototype.expect = function (e1, e2, e3, e4) {\r\n        var token = this.peek(e1, e2, e3, e4);\r\n        if (token) {\r\n            this.tokens.shift();\r\n            return token;\r\n        }\r\n        return false;\r\n    };\r\n    Parser.prototype.consume = function (e1) {\r\n        if (!this.expect(e1)) {\r\n            this.throwError(\"is unexpected, expecting [\" + e1 + \"]\", this.peek());\r\n        }\r\n    };\r\n    Parser.prototype.unaryFn = function (fn, right) {\r\n        return extend(function (self, locals) {\r\n            return fn(self, locals, right);\r\n        }, {\r\n            constant: right.constant\r\n        });\r\n    };\r\n    Parser.prototype.ternaryFn = function (left, middle, right) {\r\n        return extend(function (self, locals) {\r\n            return left(self, locals) ? middle(self, locals) : right(self, locals);\r\n        }, {\r\n            constant: left.constant && middle.constant && right.constant\r\n        });\r\n    };\r\n    Parser.prototype.binaryFn = function (left, fn, right) {\r\n        return extend(function (self, locals) {\r\n            return fn(self, locals, left, right);\r\n        }, {\r\n            constant: left.constant && right.constant\r\n        });\r\n    };\r\n    Parser.prototype.statements = function () {\r\n        var statements = [];\r\n        while (true) {\r\n            if (this.tokens.length > 0 && !this.peek(\"}\", \")\", \";\", \"]\"))\r\n                statements.push(this.filterChain());\r\n            if (!this.expect(\";\")) {\r\n                // optimize for the common case where there is only one statement.\r\n                // TODO(size): maybe we should not support multiple statements?\r\n                return (statements.length === 1)\r\n                    ? statements[0] :\r\n                    function (self, locals) {\r\n                        var value;\r\n                        for (var i = 0; i < statements.length; i++) {\r\n                            var statement = statements[i];\r\n                            if (statement) {\r\n                                value = statement(self, locals);\r\n                            }\r\n                        }\r\n                        return value;\r\n                    };\r\n            }\r\n        }\r\n    };\r\n    Parser.prototype.filterChain = function () {\r\n        var left = this.expression();\r\n        var token;\r\n        while (true) {\r\n            if ((token = this.expect(\"|\"))) {\r\n                left = this.binaryFn(left, token.fn, this.filter());\r\n            }\r\n            else {\r\n                return left;\r\n            }\r\n        }\r\n    };\r\n    Parser.prototype.filter = function () {\r\n        var token = this.expect();\r\n        var fn = this.options.filters[token.text];\r\n        var argsFn = [];\r\n        while (true) {\r\n            if ((token = this.expect(\":\"))) {\r\n                argsFn.push(this.expression());\r\n            }\r\n            else {\r\n                var fnInvoke = function (self, locals, input) {\r\n                    var args = [input];\r\n                    for (var i = 0; i < argsFn.length; i++) {\r\n                        args.push(argsFn[i](self, locals));\r\n                    }\r\n                    return fn.apply(self, args);\r\n                };\r\n                return function () {\r\n                    return fnInvoke;\r\n                };\r\n            }\r\n        }\r\n    };\r\n    Parser.prototype.expression = function () {\r\n        return this.assignment();\r\n    };\r\n    Parser.prototype.assignment = function () {\r\n        var left = this.ternary();\r\n        var right;\r\n        var token;\r\n        if ((token = this.expect(\"=\"))) {\r\n            if (!left.assign) {\r\n                this.throwError(\"implies assignment but [\" +\r\n                    this.text.substring(0, token.index) + \"] can not be assigned to\", token);\r\n            }\r\n            right = this.ternary();\r\n            return function (scope, locals) {\r\n                return left.assign(scope, right(scope, locals), locals);\r\n            };\r\n        }\r\n        return left;\r\n    };\r\n    Parser.prototype.ternary = function () {\r\n        var left = this.logicalOR();\r\n        var middle;\r\n        var token;\r\n        if ((token = this.expect(\"?\"))) {\r\n            middle = this.ternary();\r\n            if ((token = this.expect(\":\"))) {\r\n                return this.ternaryFn(left, middle, this.ternary());\r\n            }\r\n            else {\r\n                this.throwError(\"expected :\", token);\r\n            }\r\n        }\r\n        return left;\r\n    };\r\n    Parser.prototype.logicalOR = function () {\r\n        var left = this.logicalAND();\r\n        var token;\r\n        while (true) {\r\n            if ((token = this.expect(\"||\"))) {\r\n                left = this.binaryFn(left, token.fn, this.logicalAND());\r\n            }\r\n            else {\r\n                return left;\r\n            }\r\n        }\r\n    };\r\n    Parser.prototype.logicalAND = function () {\r\n        var left = this.equality();\r\n        var token;\r\n        if ((token = this.expect(\"&&\"))) {\r\n            left = this.binaryFn(left, token.fn, this.logicalAND());\r\n        }\r\n        return left;\r\n    };\r\n    Parser.prototype.equality = function () {\r\n        var left = this.relational();\r\n        var token;\r\n        if ((token = this.expect(\"==\", \"!=\", \"===\", \"!==\"))) {\r\n            left = this.binaryFn(left, token.fn, this.equality());\r\n        }\r\n        return left;\r\n    };\r\n    Parser.prototype.relational = function () {\r\n        var left = this.additive();\r\n        var token;\r\n        if ((token = this.expect(\"<\", \">\", \"<=\", \">=\"))) {\r\n            left = this.binaryFn(left, token.fn, this.relational());\r\n        }\r\n        return left;\r\n    };\r\n    Parser.prototype.additive = function () {\r\n        var left = this.multiplicative();\r\n        var token;\r\n        while ((token = this.expect(\"+\", \"-\"))) {\r\n            left = this.binaryFn(left, token.fn, this.multiplicative());\r\n        }\r\n        return left;\r\n    };\r\n    Parser.prototype.multiplicative = function () {\r\n        var left = this.unary();\r\n        var token;\r\n        while ((token = this.expect(\"*\", \"/\", \"%\"))) {\r\n            left = this.binaryFn(left, token.fn, this.unary());\r\n        }\r\n        return left;\r\n    };\r\n    Parser.prototype.unary = function () {\r\n        var token;\r\n        if (this.expect(\"+\")) {\r\n            return this.primary();\r\n        }\r\n        else if ((token = this.expect(\"-\"))) {\r\n            return this.binaryFn(ZERO, token.fn, this.unary());\r\n        }\r\n        else if ((token = this.expect(\"!\"))) {\r\n            return this.unaryFn(token.fn, this.unary());\r\n        }\r\n        else {\r\n            return this.primary();\r\n        }\r\n    };\r\n    Parser.prototype.fieldAccess = function (object) {\r\n        var parser = this;\r\n        var field = this.expect().text;\r\n        var getter = getterFn(field, this.options, this.text);\r\n        return extend(function (scope, locals, self) {\r\n            return getter(self || object(scope, locals));\r\n        }, {\r\n            assign: function (scope, value, locals) {\r\n                return setter(object(scope, locals), field, value, parser.text, parser.options, locals);\r\n            }\r\n        });\r\n    };\r\n    Parser.prototype.objectIndex = function (obj) {\r\n        var parser = this;\r\n        var indexFn = this.expression();\r\n        this.consume(\"]\");\r\n        return extend(function (self, locals) {\r\n            var o = obj(self, locals), i = indexFn(self, locals), v, p;\r\n            if (!o)\r\n                return undefined;\r\n            var hooks = getRuntimeHooks(locals);\r\n            if (hooks && hooks.readIndexHook)\r\n                v = hooks.readIndexHook(o, i);\r\n            else\r\n                v = o[i];\r\n            v = ensureSafeObject(v, parser.text);\r\n            return v;\r\n        }, {\r\n            assign: function (self, value, locals) {\r\n                var key = indexFn(self, locals);\r\n                // prevent overwriting of Function.constructor which would break ensureSafeObject check\r\n                var safe = ensureSafeObject(obj(self, locals), parser.text);\r\n                var hooks = getRuntimeHooks(locals);\r\n                if (hooks && hooks.writeIndexHook)\r\n                    return hooks.writeIndexHook(safe, key, value);\r\n                return safe[key] = value;\r\n            }\r\n        });\r\n    };\r\n    Parser.prototype.functionCall = function (fn, contextGetter) {\r\n        if (this.options.disallowFunctionCalls)\r\n            this.throwError(\"Function calls are not allowed\");\r\n        var argsFn = [];\r\n        if (this.peekToken().text !== \")\") {\r\n            do {\r\n                argsFn.push(this.expression());\r\n            } while (this.expect(\",\"));\r\n        }\r\n        this.consume(\")\");\r\n        var parser = this;\r\n        return function (scope, locals) {\r\n            var args = [];\r\n            var context = contextGetter ? contextGetter(scope, locals) : scope;\r\n            for (var i = 0; i < argsFn.length; i++) {\r\n                args.push(argsFn[i](scope, locals));\r\n            }\r\n            var fnPtr = fn(scope, locals, context) || Utils_1.noop;\r\n            ensureSafeObject(context, parser.text);\r\n            ensureSafeObject(fnPtr, parser.text);\r\n            // IE stupidity! (IE doesn't have apply for some native functions)\r\n            var v = fnPtr.apply\r\n                ? fnPtr.apply(context, args)\r\n                : fnPtr(args[0], args[1], args[2], args[3], args[4]);\r\n            return ensureSafeObject(v, parser.text);\r\n        };\r\n    };\r\n    // This is used with json array declaration\r\n    Parser.prototype.arrayDeclaration = function () {\r\n        var elementFns = [];\r\n        var allConstant = true;\r\n        if (this.peekToken().text !== \"]\") {\r\n            do {\r\n                if (this.peek(\"]\")) {\r\n                    // Support trailing commas per ES5.1.\r\n                    break;\r\n                }\r\n                var elementFn = this.expression();\r\n                elementFns.push(elementFn);\r\n                if (!elementFn.constant) {\r\n                    allConstant = false;\r\n                }\r\n            } while (this.expect(\",\"));\r\n        }\r\n        this.consume(\"]\");\r\n        return extend(function (self, locals) {\r\n            var array = [];\r\n            for (var i = 0; i < elementFns.length; i++) {\r\n                array.push(elementFns[i](self, locals));\r\n            }\r\n            return array;\r\n        }, {\r\n            literal: true,\r\n            constant: allConstant\r\n        });\r\n    };\r\n    Parser.prototype.object = function () {\r\n        var keyValues = [];\r\n        var allConstant = true;\r\n        if (this.peekToken().text !== \"}\") {\r\n            do {\r\n                if (this.peek(\"}\")) {\r\n                    // Support trailing commas per ES5.1.\r\n                    break;\r\n                }\r\n                var token = this.expect(), key = token.string || token.text;\r\n                this.consume(\":\");\r\n                var value = this.expression();\r\n                keyValues.push({ key: key, value: value });\r\n                if (!value.constant) {\r\n                    allConstant = false;\r\n                }\r\n            } while (this.expect(\",\"));\r\n        }\r\n        this.consume(\"}\");\r\n        return extend(function (self, locals) {\r\n            var object = {};\r\n            for (var i = 0; i < keyValues.length; i++) {\r\n                var keyValue = keyValues[i];\r\n                object[keyValue.key] = keyValue.value(self, locals);\r\n            }\r\n            return object;\r\n        }, {\r\n            literal: true,\r\n            constant: allConstant\r\n        });\r\n    };\r\n    return Parser;\r\n})();\r\nfunction ZERO() { return 0; }\r\n;\r\n//////////////////////////////////////////////////\r\n// Parser helper functions\r\n//////////////////////////////////////////////////\r\nfunction setter(obj, path, setValue, fullExp, options, locals) {\r\n    var element = path.split(\".\"), key;\r\n    var i;\r\n    var propertyObj;\r\n    var hooks = getRuntimeHooks(locals);\r\n    if (hooks) {\r\n        for (var i_1 = 0; element.length > 1; i_1++) {\r\n            key = ensureSafeMemberName(element.shift(), fullExp);\r\n            propertyObj = hooks.readFieldHook ?\r\n                hooks.readFieldHook(obj, key) :\r\n                obj[key];\r\n            if (!propertyObj) {\r\n                propertyObj = {};\r\n                if (hooks.writeFieldHook)\r\n                    hooks.writeFieldHook(obj, key, propertyObj);\r\n                else\r\n                    obj[key] = propertyObj;\r\n            }\r\n            obj = propertyObj;\r\n        }\r\n    }\r\n    else {\r\n        for (var i_2 = 0; element.length > 1; i_2++) {\r\n            key = ensureSafeMemberName(element.shift(), fullExp);\r\n            propertyObj = obj[key];\r\n            if (!propertyObj) {\r\n                propertyObj = {};\r\n                obj[key] = propertyObj;\r\n            }\r\n            obj = propertyObj;\r\n        }\r\n    }\r\n    key = ensureSafeMemberName(element.shift(), fullExp);\r\n    if (hooks && hooks.writeFieldHook)\r\n        hooks.writeFieldHook(obj, key, setValue);\r\n    else\r\n        obj[key] = setValue;\r\n    return setValue;\r\n}\r\nvar getterFnCache = {};\r\n/**\r\n* Implementation of the \"Black Hole\" variant from:\r\n* - http://jsperf.com/angularjs-parse-getter/4\r\n* - http://jsperf.com/path-evaluation-simplified/7\r\n*/\r\nfunction cspSafeGetterFn(key0, key1, key2, key3, key4, fullExp, options) {\r\n    ensureSafeMemberName(key0, fullExp);\r\n    ensureSafeMemberName(key1, fullExp);\r\n    ensureSafeMemberName(key2, fullExp);\r\n    ensureSafeMemberName(key3, fullExp);\r\n    ensureSafeMemberName(key4, fullExp);\r\n    return function (scope, locals) {\r\n        var pathVal = (locals && locals.hasOwnProperty(key0)) ? locals : scope;\r\n        var hooks = getRuntimeHooks(locals);\r\n        if (hooks && hooks.readFieldHook) {\r\n            if (pathVal == null)\r\n                return pathVal;\r\n            pathVal = hooks.readFieldHook(pathVal, key0);\r\n            if (!key1)\r\n                return pathVal;\r\n            if (pathVal == null)\r\n                return undefined;\r\n            pathVal = hooks.readFieldHook(pathVal, key1);\r\n            if (!key2)\r\n                return pathVal;\r\n            if (pathVal == null)\r\n                return undefined;\r\n            pathVal = hooks.readFieldHook(pathVal, key2);\r\n            if (!key3)\r\n                return pathVal;\r\n            if (pathVal == null)\r\n                return undefined;\r\n            pathVal = hooks.readFieldHook(pathVal, key3);\r\n            if (!key4)\r\n                return pathVal;\r\n            if (pathVal == null)\r\n                return undefined;\r\n            pathVal = hooks.readFieldHook(pathVal, key4);\r\n            return pathVal;\r\n        }\r\n        if (pathVal == null)\r\n            return pathVal;\r\n        pathVal = pathVal[key0];\r\n        if (!key1)\r\n            return pathVal;\r\n        if (pathVal == null)\r\n            return undefined;\r\n        pathVal = pathVal[key1];\r\n        if (!key2)\r\n            return pathVal;\r\n        if (pathVal == null)\r\n            return undefined;\r\n        pathVal = pathVal[key2];\r\n        if (!key3)\r\n            return pathVal;\r\n        if (pathVal == null)\r\n            return undefined;\r\n        pathVal = pathVal[key3];\r\n        if (!key4)\r\n            return pathVal;\r\n        if (pathVal == null)\r\n            return undefined;\r\n        pathVal = pathVal[key4];\r\n        return pathVal;\r\n    };\r\n}\r\nfunction simpleGetterFn1(key0, fullExp) {\r\n    ensureSafeMemberName(key0, fullExp);\r\n    return function (scope, locals) {\r\n        scope = ((locals && locals.hasOwnProperty(key0)) ? locals : scope);\r\n        if (scope == null)\r\n            return undefined;\r\n        var hooks = getRuntimeHooks(locals);\r\n        if (hooks && hooks.readFieldHook)\r\n            return hooks.readFieldHook(scope, key0);\r\n        return scope[key0];\r\n    };\r\n}\r\nfunction simpleGetterFn2(key0, key1, fullExp) {\r\n    ensureSafeMemberName(key0, fullExp);\r\n    ensureSafeMemberName(key1, fullExp);\r\n    return function (scope, locals) {\r\n        var hooks = getRuntimeHooks(locals);\r\n        if (hooks && hooks.readFieldHook) {\r\n            scope = (locals && locals.hasOwnProperty(key0)) ? locals : scope;\r\n            if (scope == null)\r\n                return undefined;\r\n            scope = hooks.readFieldHook(scope, key0);\r\n            return scope == null ? undefined : hooks.readFieldHook(scope, key1);\r\n        }\r\n        scope = ((locals && locals.hasOwnProperty(key0)) ? locals : scope)[key0];\r\n        return scope == null ? undefined : scope[key1];\r\n    };\r\n}\r\nfunction getterFn(path, options, fullExp) {\r\n    // Check whether the cache has this getter already.\r\n    // We can use hasOwnProperty directly on the cache because we ensure,\r\n    // see below, that the cache never stores a path called 'hasOwnProperty'\r\n    if (getterFnCache.hasOwnProperty(path)) {\r\n        return getterFnCache[path];\r\n    }\r\n    var pathKeys = path.split(\".\"), pathKeysLength = pathKeys.length, fn;\r\n    // When we have only 1 or 2 tokens, use optimized special case closures.\r\n    // http://jsperf.com/angularjs-parse-getter/6\r\n    if (pathKeysLength === 1) {\r\n        fn = simpleGetterFn1(pathKeys[0], fullExp);\r\n    }\r\n    else if (pathKeysLength === 2) {\r\n        fn = simpleGetterFn2(pathKeys[0], pathKeys[1], fullExp);\r\n    }\r\n    else {\r\n        if (pathKeysLength < 6) {\r\n            fn = cspSafeGetterFn(pathKeys[0], pathKeys[1], pathKeys[2], pathKeys[3], pathKeys[4], fullExp, options);\r\n        }\r\n        else {\r\n            fn = function (scope, locals) {\r\n                // backup locals\r\n                var _locals = {};\r\n                Object.keys(locals).forEach(function (x) { return _locals[x] = locals[x]; });\r\n                var i = 0, val;\r\n                do {\r\n                    val = cspSafeGetterFn(pathKeys[i++], pathKeys[i++], pathKeys[i++], pathKeys[i++], pathKeys[i++], fullExp, options)(scope, locals);\r\n                    scope = val;\r\n                    // reset locals\r\n                    locals = {};\r\n                    Object.keys(_locals).forEach(function (x) { return locals[x] = _locals[x]; });\r\n                } while (i < pathKeysLength);\r\n                return val;\r\n            };\r\n        }\r\n    } /* else {\r\n    let code = \"var p;\\n\";\r\n    forEach(pathKeys, (key, index) => {\r\n        ensureSafeMemberName(key, fullExp);\r\n        code += \"if(s == null) return undefined;\\n\" +\r\n            \"s=\" + (index\r\n                // we simply dereference 's' on any .dot notation\r\n                ? \"s\"\r\n                // but if we are first then we check locals first, and if so read it first\r\n                : \"((k&&k.hasOwnProperty(\\\"\" + key + \"\\\"))?k:s)\") + \"[\\\"\" + key + \"\\\"]\" + \";\\n\";\r\n    });\r\n    code += \"return s;\";\r\n\r\n    // jshint -W054\r\n    let evaledFnGetter = new Function(\"s\", \"k\", \"pw\", code); // s=scope, k=locals, pw=promiseWarning\r\n    // jshint +W054 /\r\n    evaledFnGetter.toString = valueFn(code);\r\n    fn = <(scope: any, locals?: any, self?: any) => any> evaledFnGetter;\r\n} */\r\n    // Only cache the value if it's not going to mess up the cache object\r\n    // This is more performant that using Object.prototype.hasOwnProperty.call\r\n    if (path !== \"hasOwnProperty\") {\r\n        getterFnCache[path] = fn;\r\n    }\r\n    return fn;\r\n}\r\nfunction getRuntimeHooks(locals) {\r\n    return locals !== undefined ? locals[hookField] : undefined;\r\n}\r\nexports.getRuntimeHooks = getRuntimeHooks;\r\nfunction setRuntimeHooks(locals, hooks) {\r\n    locals[hookField] = hooks;\r\n}\r\nexports.setRuntimeHooks = setRuntimeHooks;\r\n/**\r\n * Compiles src and returns a function that executes src on a target object.\r\n * The compiled function is cached under compile.cache[src] to speed up further calls.\r\n *\r\n * @param {string} src\r\n * @returns {function}\r\n */\r\nfunction compileExpression(src, options, cache) {\r\n    if (typeof src !== \"string\") {\r\n        throw new TypeError(\"src must be a string, instead saw '\" + typeof src + \"'\");\r\n    }\r\n    var lexer = new Lexer({});\r\n    var parser = new Parser(lexer, options);\r\n    if (!cache) {\r\n        return parser.parse(src);\r\n    }\r\n    var cached = cache[src];\r\n    if (!cached) {\r\n        cached = cache[src] = parser.parse(src);\r\n    }\r\n    return cached;\r\n}\r\nexports.compileExpression = compileExpression;\r\n//# sourceMappingURL=ExpressionCompiler.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/ExpressionCompiler.js\n ** module id = 15\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar WeakMap_1 = require(\"../Collections/WeakMap\");\r\nvar Set_1 = require(\"../Collections/Set\");\r\nvar IID_1 = require(\"../IID\");\r\nvar Injector_1 = require(\"./Injector\");\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar res = require(\"./Resources\");\r\nvar env = require(\"./Environment\");\r\n\"use strict\";\r\n/**\r\n* The heart of WebRx's binding-system\r\n* @class\r\n*/\r\nvar DomManager = (function () {\r\n    function DomManager(compiler, app) {\r\n        this.expressionCache = {};\r\n        this.dataContextExtensions = Set_1.createSet();\r\n        this.parserOptions = {\r\n            disallowFunctionCalls: true\r\n        };\r\n        this.nodeState = WeakMap_1.createWeakMap();\r\n        this.compiler = compiler;\r\n        this.app = app;\r\n    }\r\n    DomManager.prototype.applyBindings = function (model, rootNode) {\r\n        if (rootNode === undefined || rootNode.nodeType !== 1)\r\n            Utils_1.throwError(\"first parameter should be your model, second parameter should be a DOM node!\");\r\n        if (this.isNodeBound(rootNode))\r\n            Utils_1.throwError(\"an element must not be bound multiple times!\");\r\n        // create or update node state for root node\r\n        var state = this.getNodeState(rootNode);\r\n        if (state) {\r\n            state.model = model;\r\n        }\r\n        else {\r\n            state = this.createNodeState(model);\r\n            this.setNodeState(rootNode, state);\r\n        }\r\n        // calculate resulting data-context and apply bindings\r\n        var ctx = this.getDataContext(rootNode);\r\n        this.applyBindingsRecursive(ctx, rootNode);\r\n    };\r\n    DomManager.prototype.applyBindingsToDescendants = function (ctx, node) {\r\n        if (node.hasChildNodes()) {\r\n            for (var i = 0; i < node.childNodes.length; i++) {\r\n                var child = node.childNodes[i];\r\n                // only elements\r\n                if (child.nodeType !== 1)\r\n                    continue;\r\n                this.applyBindingsRecursive(ctx, child);\r\n            }\r\n        }\r\n    };\r\n    DomManager.prototype.cleanNode = function (rootNode) {\r\n        if (rootNode.nodeType !== 1)\r\n            return;\r\n        this.cleanNodeRecursive(rootNode);\r\n    };\r\n    DomManager.prototype.cleanDescendants = function (node) {\r\n        if (node.hasChildNodes()) {\r\n            for (var i = 0; i < node.childNodes.length; i++) {\r\n                var child = node.childNodes[i];\r\n                // only elements\r\n                if (node.nodeType !== 1)\r\n                    continue;\r\n                this.clearNodeState(child);\r\n            }\r\n        }\r\n    };\r\n    DomManager.prototype.getObjectLiteralTokens = function (value) {\r\n        value = value.trim();\r\n        if (value !== '' && this.isObjectLiteralString(value)) {\r\n            return this.compiler.parseObjectLiteral(value);\r\n        }\r\n        return [];\r\n    };\r\n    DomManager.prototype.compileBindingOptions = function (value, module) {\r\n        value = value.trim();\r\n        if (value === '') {\r\n            return null;\r\n        }\r\n        if (this.isObjectLiteralString(value)) {\r\n            var result = {};\r\n            var tokens = this.compiler.parseObjectLiteral(value);\r\n            var token;\r\n            for (var i = 0; i < tokens.length; i++) {\r\n                token = tokens[i];\r\n                result[token.key] = this.compileBindingOptions(token.value, module);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            // build compiler options\r\n            var options = Utils_1.extend(this.parserOptions, {});\r\n            options.filters = {};\r\n            // enrich with app filters\r\n            Utils_1.extend(this.app.filters(), options.filters);\r\n            // enrich with module filters\r\n            if (module && module.name != \"app\") {\r\n                Utils_1.extend(module.filters(), options.filters);\r\n            }\r\n            return this.compiler.compileExpression(value, options, this.expressionCache);\r\n        }\r\n    };\r\n    DomManager.prototype.getModuleContext = function (node) {\r\n        var state;\r\n        // collect model hierarchy\r\n        while (node) {\r\n            state = this.getNodeState(node);\r\n            if (state != null) {\r\n                if (state.module != null) {\r\n                    return state.module;\r\n                }\r\n            }\r\n            node = node.parentNode;\r\n        }\r\n        // default to app\r\n        return this.app;\r\n    };\r\n    DomManager.prototype.registerDataContextExtension = function (extension) {\r\n        this.dataContextExtensions.add(extension);\r\n    };\r\n    DomManager.prototype.getDataContext = function (node) {\r\n        var models = [];\r\n        var state = this.getNodeState(node);\r\n        // collect model hierarchy\r\n        var _node = node;\r\n        while (_node) {\r\n            state = state != null ? state : this.getNodeState(_node);\r\n            if (state != null) {\r\n                if (state.model != null) {\r\n                    models.push(state.model);\r\n                }\r\n            }\r\n            state = null;\r\n            _node = _node.parentNode;\r\n        }\r\n        var ctx;\r\n        if (models.length > 0) {\r\n            ctx = {\r\n                $data: models[0],\r\n                $root: models[models.length - 1],\r\n                $parent: models.length > 1 ? models[1] : null,\r\n                $parents: models.slice(1)\r\n            };\r\n        }\r\n        else {\r\n            ctx = {\r\n                $data: null,\r\n                $root: null,\r\n                $parent: null,\r\n                $parents: []\r\n            };\r\n        }\r\n        // extensions\r\n        this.dataContextExtensions.forEach(function (ext) { return ext(node, ctx); });\r\n        return ctx;\r\n    };\r\n    DomManager.prototype.createNodeState = function (model, module) {\r\n        return {\r\n            cleanup: new Rx.CompositeDisposable(),\r\n            model: model,\r\n            module: module,\r\n            isBound: false\r\n        };\r\n    };\r\n    DomManager.prototype.isNodeBound = function (node) {\r\n        var state = this.nodeState.get(node);\r\n        return state != null && !!state.isBound;\r\n    };\r\n    DomManager.prototype.setNodeState = function (node, state) {\r\n        this.nodeState.set(node, state);\r\n    };\r\n    DomManager.prototype.getNodeState = function (node) {\r\n        return this.nodeState.get(node);\r\n    };\r\n    DomManager.prototype.clearNodeState = function (node) {\r\n        var state = this.nodeState.get(node);\r\n        if (state) {\r\n            if (state.cleanup != null) {\r\n                state.cleanup.dispose();\r\n                state.cleanup = undefined;\r\n            }\r\n            if (state.model != null) {\r\n                state.model = undefined;\r\n            }\r\n            if (state.module != null) {\r\n                state.module = undefined;\r\n            }\r\n        }\r\n        this.nodeState.delete(node);\r\n        // support external per-node cleanup\r\n        env.cleanExternalData(node);\r\n    };\r\n    DomManager.prototype.evaluateExpression = function (exp, ctx) {\r\n        var locals = this.createLocals(undefined, ctx);\r\n        var result = exp(ctx.$data, locals);\r\n        return result;\r\n    };\r\n    DomManager.prototype.expressionToObservable = function (exp, ctx, evalObs) {\r\n        var _this = this;\r\n        var captured = Set_1.createSet();\r\n        var locals;\r\n        var result;\r\n        // initial evaluation\r\n        try {\r\n            locals = this.createLocals(captured, ctx);\r\n            result = exp(ctx.$data, locals);\r\n            // diagnostics\r\n            if (evalObs)\r\n                evalObs.onNext(true);\r\n        }\r\n        catch (e) {\r\n            this.app.defaultExceptionHandler.onNext(e);\r\n            return Rx.Observable.return(undefined);\r\n        }\r\n        // Optimization: If the initial evaluation didn't touch any observables, treat it as constant expression\r\n        if (captured.size === 0) {\r\n            if (Utils_1.isRxObservable(result))\r\n                return result;\r\n            // wrap it\r\n            return Rx.Observable.return(result);\r\n        }\r\n        var obs = Rx.Observable.create(function (observer) {\r\n            var innerDisp = Rx.Observable.defer(function () {\r\n                // construct observable that represents the first change of any of the expression's dependencies\r\n                return Rx.Observable.merge(Set_1.setToArray(captured)).take(1);\r\n            })\r\n                .repeat()\r\n                .subscribe(function (trigger) {\r\n                try {\r\n                    // reset execution state before evaluation\r\n                    captured.clear();\r\n                    locals = _this.createLocals(captured, ctx);\r\n                    // evaluate and produce next value\r\n                    result = exp(ctx.$data, locals);\r\n                    if (!Utils_1.isRxObservable(result)) {\r\n                        // wrap non-observable\r\n                        observer.onNext(Rx.Observable.return(result));\r\n                    }\r\n                    else {\r\n                        observer.onNext(result);\r\n                    }\r\n                    // diagnostics\r\n                    if (evalObs)\r\n                        evalObs.onNext(true);\r\n                }\r\n                catch (e) {\r\n                    _this.app.defaultExceptionHandler.onNext(e);\r\n                }\r\n            });\r\n            return innerDisp;\r\n        });\r\n        // prefix with initial result\r\n        var startValue = Utils_1.isRxObservable(result) ?\r\n            result :\r\n            Rx.Observable.return(result);\r\n        return obs.startWith(startValue).concatAll();\r\n    };\r\n    DomManager.prototype.applyBindingsInternal = function (ctx, el, module) {\r\n        var result = false;\r\n        // get or create elment-state\r\n        var state = this.getNodeState(el);\r\n        // create and set if necessary\r\n        if (!state) {\r\n            state = this.createNodeState();\r\n            this.setNodeState(el, state);\r\n        }\r\n        else if (state.isBound) {\r\n            Utils_1.throwError(\"an element must not be bound multiple times!\");\r\n        }\r\n        var _bindings;\r\n        var tagName = el.tagName.toLowerCase();\r\n        // check if tag represents a component\r\n        if (module.hasComponent(tagName) || this.app.hasComponent(tagName)) {\r\n            // when a component is referenced by element, we just apply a virtual 'component' binding\r\n            var params = el.getAttribute(DomManager.paramsAttributename);\r\n            var componentReference;\r\n            if (params)\r\n                componentReference = \"{ name: '\" + tagName + \"', params: {\" + el.getAttribute(DomManager.paramsAttributename) + \"} }\";\r\n            else\r\n                componentReference = \"{ name: '\" + tagName + \"' }\";\r\n            _bindings = [{ key: 'component', value: componentReference }];\r\n        }\r\n        else {\r\n            // get definitions from attribute\r\n            _bindings = this.getBindingDefinitions(el);\r\n        }\r\n        if (_bindings != null && _bindings.length > 0) {\r\n            // lookup handlers\r\n            var bindings = _bindings.map(function (x) {\r\n                var handler = module.binding(x.key);\r\n                if (!handler)\r\n                    Utils_1.throwError(\"binding '{0}' has not been registered.\", x.key);\r\n                return { handler: handler, value: x.value };\r\n            });\r\n            // sort by priority\r\n            bindings.sort(function (a, b) { return (b.handler.priority || 0) - (a.handler.priority || 0); });\r\n            // check if there's binding-handler competition for descendants (which is illegal)\r\n            var hd = bindings.filter(function (x) { return x.handler.controlsDescendants; }).map(function (x) { return \"'\" + x.value + \"'\"; });\r\n            if (hd.length > 1) {\r\n                Utils_1.throwError(\"bindings {0} are competing for descendants of target element!\", hd.join(\", \"));\r\n            }\r\n            result = hd.length > 0;\r\n            // apply all bindings\r\n            for (var i = 0; i < bindings.length; i++) {\r\n                var binding = bindings[i];\r\n                var handler = binding.handler;\r\n                handler.applyBinding(el, binding.value, ctx, state, module);\r\n            }\r\n        }\r\n        // mark bound\r\n        state.isBound = true;\r\n        return result;\r\n    };\r\n    DomManager.prototype.isObjectLiteralString = function (str) {\r\n        return str[0] === \"{\" && str[str.length - 1] === \"}\";\r\n    };\r\n    DomManager.prototype.getBindingDefinitions = function (node) {\r\n        var bindingText = null;\r\n        if (node.nodeType === 1) {\r\n            // attempt to get definition from attribute\r\n            var attr = node.getAttribute(DomManager.bindingAttributeName);\r\n            if (attr) {\r\n                bindingText = attr;\r\n            }\r\n        }\r\n        // transform textual binding-definition into a key-value store where \r\n        // the key is the binding name and the value is its options\r\n        if (bindingText) {\r\n            bindingText = bindingText.trim();\r\n        }\r\n        if (bindingText)\r\n            return this.compiler.parseObjectLiteral(bindingText);\r\n        return null;\r\n    };\r\n    DomManager.prototype.applyBindingsRecursive = function (ctx, el, module) {\r\n        // \"module\" binding receiving first-class treatment here because it is considered part of the core\r\n        module = module || this.getModuleContext(el);\r\n        if (!this.applyBindingsInternal(ctx, el, module) && el.hasChildNodes()) {\r\n            // module binding might have updated state.module\r\n            var state = this.getNodeState(el);\r\n            if (state && state.module)\r\n                module = state.module;\r\n            // iterate over descendants\r\n            for (var i = 0; i < el.childNodes.length; i++) {\r\n                var child = el.childNodes[i];\r\n                // only elements\r\n                if (child.nodeType !== 1)\r\n                    continue;\r\n                this.applyBindingsRecursive(ctx, child, module);\r\n            }\r\n        }\r\n    };\r\n    DomManager.prototype.cleanNodeRecursive = function (node) {\r\n        if (node.hasChildNodes()) {\r\n            var length_1 = node.childNodes.length;\r\n            for (var i = 0; i < length_1; i++) {\r\n                var child = node.childNodes[i];\r\n                // only elements\r\n                if (node.nodeType !== 1)\r\n                    continue;\r\n                this.cleanNodeRecursive(child);\r\n            }\r\n        }\r\n        // clear parent after childs\r\n        this.clearNodeState(node);\r\n    };\r\n    DomManager.prototype.createLocals = function (captured, ctx) {\r\n        var locals = {};\r\n        var list;\r\n        var prop;\r\n        var result, target;\r\n        var hooks = {\r\n            readFieldHook: function (o, field) {\r\n                // handle \"@propref\" access-modifier\r\n                var noUnwrap = false;\r\n                if (field[0] === '@') {\r\n                    noUnwrap = true;\r\n                    field = field.substring(1);\r\n                }\r\n                result = o[field];\r\n                // intercept access to observable properties\r\n                if (!noUnwrap && Utils_1.isProperty(result)) {\r\n                    var prop_1 = result;\r\n                    // register observable\r\n                    if (captured)\r\n                        captured.add(prop_1.changed);\r\n                    // get the property's real value\r\n                    result = prop_1();\r\n                }\r\n                return result;\r\n            },\r\n            writeFieldHook: function (o, field, newValue) {\r\n                // ignore @propref access-modifier on writes\r\n                if (field[0] === '@') {\r\n                    field = field.substring(1);\r\n                }\r\n                target = o[field];\r\n                // intercept access to observable properties\r\n                if (Utils_1.isProperty(target)) {\r\n                    var prop_2 = target;\r\n                    // register observable\r\n                    if (captured)\r\n                        captured.add(prop_2.changed);\r\n                    // replace field assignment with property invocation\r\n                    prop_2(newValue);\r\n                }\r\n                else {\r\n                    o[field] = newValue;\r\n                }\r\n                return newValue;\r\n            },\r\n            readIndexHook: function (o, index) {\r\n                // recognize observable lists\r\n                if (Utils_1.queryInterface(o, IID_1.default.IObservableList)) {\r\n                    // translate indexer to list.get()\r\n                    list = o;\r\n                    result = list.get(index);\r\n                    // add collectionChanged to monitored observables\r\n                    if (captured)\r\n                        captured.add(list.listChanged);\r\n                }\r\n                else {\r\n                    result = o[index];\r\n                }\r\n                // intercept access to observable properties\r\n                if (Utils_1.queryInterface(result, IID_1.default.IObservableProperty)) {\r\n                    var prop_3 = result;\r\n                    // register observable\r\n                    if (captured)\r\n                        captured.add(prop_3.changed);\r\n                    // get the property's real value\r\n                    result = prop_3();\r\n                }\r\n                return result;\r\n            },\r\n            writeIndexHook: function (o, index, newValue) {\r\n                // recognize observable lists\r\n                if (Utils_1.queryInterface(o, IID_1.default.IObservableList)) {\r\n                    // translate indexer to list.get()\r\n                    list = o;\r\n                    target = list.get(index);\r\n                    // add collectionChanged to monitored observables\r\n                    if (captured)\r\n                        captured.add(list.listChanged);\r\n                    // intercept access to observable properties\r\n                    if (Utils_1.isProperty(target)) {\r\n                        prop = target;\r\n                        // register observable\r\n                        if (captured)\r\n                            captured.add(prop.changed);\r\n                        // replace field assignment with property invocation\r\n                        prop(newValue);\r\n                    }\r\n                    else {\r\n                        list.set(index, newValue);\r\n                    }\r\n                }\r\n                else {\r\n                    // intercept access to observable properties\r\n                    if (Utils_1.isProperty(o[index])) {\r\n                        prop = target[index];\r\n                        // register observable\r\n                        if (captured)\r\n                            captured.add(prop.changed);\r\n                        // replace field assignment with property invocation\r\n                        prop(newValue);\r\n                    }\r\n                    else {\r\n                        o[index] = newValue;\r\n                    }\r\n                }\r\n                return newValue;\r\n            }\r\n        };\r\n        // install property interceptor hooks\r\n        this.compiler.setRuntimeHooks(locals, hooks);\r\n        // injected context members into locals\r\n        var keys = Object.keys(ctx);\r\n        var length = keys.length;\r\n        for (var i = 0; i < length; i++) {\r\n            var key = keys[i];\r\n            locals[key] = ctx[key];\r\n        }\r\n        return locals;\r\n    };\r\n    //////////////////////////////////\r\n    // Implementation\r\n    DomManager.bindingAttributeName = \"data-bind\";\r\n    DomManager.paramsAttributename = \"params\";\r\n    return DomManager;\r\n})();\r\nexports.DomManager = DomManager;\r\n/**\r\n* Applies bindings to the specified node and all of its children using the specified data context.\r\n* @param {any} model The model to bind to\r\n* @param {Node} rootNode The node to be bound\r\n*/\r\nfunction applyBindings(model, node) {\r\n    Injector_1.injector.get(res.domManager).applyBindings(model, node || window.document.documentElement);\r\n}\r\nexports.applyBindings = applyBindings;\r\n/**\r\n* Removes and cleans up any binding-related state from the specified node and its descendants.\r\n* @param {Node} rootNode The node to be cleaned\r\n*/\r\nfunction cleanNode(node) {\r\n    Injector_1.injector.get(res.domManager).cleanNode(node);\r\n}\r\nexports.cleanNode = cleanNode;\r\n//# sourceMappingURL=DomManager.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/DomManager.js\n ** module id = 16\n ** module chunks = 0\n **/","var WeakMap_1 = require(\"../Collections/WeakMap\");\r\n\"use strict\";\r\nvar _window = window;\r\nvar userAgent = _window.navigator.userAgent;\r\nvar parseVersion = function (matches) {\r\n    if (matches) {\r\n        return parseFloat(matches[1]);\r\n    }\r\n    return undefined;\r\n};\r\n// Detect Opera\r\nif (_window.opera && _window.opera.version) {\r\n    exports.opera = { version: parseInt(_window.opera.version()) };\r\n}\r\n// Detect wx.IE versions for bug workarounds (uses wx.IE conditionals, not UA string, for robustness)\r\n// Note that, since wx.IE 10 does not support conditional comments, the following logic only detects wx.IE < 10.\r\n// Currently this is by design, since wx.IE 10+ behaves correctly when treated as a standard browser.\r\nvar version = document && (function () {\r\n    var version = 3, div = document.createElement('div'), iElems = div.getElementsByTagName('i');\r\n    // Keep constructing conditional HTML blocks until we hit one that resolves to an empty fragment\r\n    while (div.innerHTML = '<!--[if gt wx.IE ' + (++version) + ']><i></i><![endif]-->',\r\n        iElems[0]) { }\r\n    return version > 4 ? version : undefined;\r\n}());\r\nif (version) {\r\n    exports.ie = { version: version };\r\n    if (version < 10) {\r\n        // for wx.IE9 and lower, provide an accessor for document scoped\r\n        // observables which allow monitoring the selectionchange event\r\n        var map = WeakMap_1.createWeakMap();\r\n        exports.ie.getSelectionChangeObservable = function (el) {\r\n            var doc = el.ownerDocument;\r\n            var result = map.get(doc);\r\n            if (result)\r\n                return result;\r\n            result = Rx.Observable.defer(function () {\r\n                return Rx.Observable.fromEvent(doc, 'selectionchange');\r\n            })\r\n                .select(function (x) { return doc; })\r\n                .publish()\r\n                .refCount();\r\n            map.set(doc, result);\r\n            return result;\r\n        };\r\n    }\r\n}\r\n// Detect Safari (not Chrome or WebKit)\r\nversion = parseVersion(userAgent.match(/^(?:(?!chrome).)*version\\/([^ ]*) safari/i));\r\nif (version) {\r\n    exports.safari = { version: version };\r\n}\r\n// Detect FF\r\nversion = parseVersion(userAgent.match(/Firefox\\/([^ ]*)/));\r\nif (version) {\r\n    exports.firefox = { version: version };\r\n}\r\nvar hasES5 = typeof Array.isArray === \"function\" &&\r\n    typeof [].forEach === \"function\" &&\r\n    typeof [].map === \"function\" &&\r\n    typeof [].some === \"function\" &&\r\n    typeof [].indexOf === \"function\" &&\r\n    typeof Object.keys === \"function\" &&\r\n    typeof Object.defineProperty === \"function\";\r\nexports.isSupported = (!exports.ie || exports.ie.version >= 9) ||\r\n    (!exports.safari || exports.safari.version >= 5) ||\r\n    (!exports.firefox || exports.firefox.version >= 5) &&\r\n        hasES5;\r\n// Special support for jQuery here because it's so commonly used.\r\nexports.jQueryInstance = window[\"jQuery\"];\r\nif (exports.jQueryInstance && (typeof exports.jQueryInstance['cleanData'] === \"function\")) {\r\n    exports.cleanExternalData = function (node) {\r\n        // Many jQuery plugins (including jquery.tmpl) store data using jQuery's equivalent of domData\r\n        // so notify it to tear down any resources associated with the node.\r\n        exports.jQueryInstance['cleanData']([node]);\r\n    };\r\n}\r\nelse {\r\n    exports.cleanExternalData = function (node) { };\r\n}\r\n//# sourceMappingURL=Environment.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Environment.js\n ** module id = 17\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\n\"use strict\";\r\n/**\r\n* Html Template Engine based on JQuery's parseHTML\r\n* NOTE: This version does not support scripts in templates!\r\n*/\r\nvar rsingleTag = /^<([\\w-]+)\\s*\\/?>(?:<\\/\\1>|)$/, rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:-]+)[^>]*)\\/>/gi, rtagName = /<([\\w:-]+)/, rhtml = /<|&#?\\w+;/, rscriptType = /^$|\\/(?:java|ecma)script/i, \r\n// We have to close these tags to support XHTML (#13200)\r\nwrapMap = {\r\n    // Support: IE9\r\n    option: [1, \"<select multiple='multiple'>\", \"</select>\"],\r\n    thead: [1, \"<table>\", \"</table>\"],\r\n    // Some of the following wrappers are not fully defined, because\r\n    // their parent elements (except for \"table\" element) could be omitted\r\n    // since browser parsers are smart enough to auto-insert them\r\n    // Support: Android 2.3\r\n    // Android browser doesn't auto-insert colgroup\r\n    col: [2, \"<table><colgroup>\", \"</colgroup></table>\"],\r\n    // Auto-insert \"tbody\" element\r\n    tr: [2, \"<table>\", \"</table>\"],\r\n    // Auto-insert \"tbody\" and \"tr\" elements\r\n    td: [3, \"<table>\", \"</table>\"],\r\n    _default: [0, \"\", \"\"]\r\n};\r\n// Support: IE9\r\nwrapMap.optgroup = wrapMap.option;\r\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\r\nwrapMap.th = wrapMap.td;\r\nvar supportsCreateHTMLDocument = (function () {\r\n    var doc = document.implementation.createHTMLDocument(\"\");\r\n    // Support: Node with jsdom<=1.5.0+\r\n    // jsdom's document created via the above method doesn't contain the body\r\n    if (!doc.body) {\r\n        return false;\r\n    }\r\n    doc.body.innerHTML = \"<form></form><form></form>\";\r\n    return doc.body.childNodes.length === 2;\r\n})();\r\nfunction merge(first, second) {\r\n    var len = +second.length, j = 0, i = first.length;\r\n    for (; j < len; j++) {\r\n        first[i++] = second[j];\r\n    }\r\n    first.length = i;\r\n    return first;\r\n}\r\nfunction buildFragment(elems, context) {\r\n    var elem, tmp, tag, wrap, j, fragment = context.createDocumentFragment(), nodes = [], i = 0, l = elems.length;\r\n    for (; i < l; i++) {\r\n        elem = elems[i];\r\n        if (elem || elem === 0) {\r\n            // Add nodes directly\r\n            if (typeof elem === \"object\") {\r\n                // Support: Android<4.1, PhantomJS<2\r\n                // push.apply(_, arraylike) throws on ancient WebKit\r\n                merge(nodes, elem.nodeType ? [elem] : elem);\r\n            }\r\n            else if (!rhtml.test(elem)) {\r\n                nodes.push(context.createTextNode(elem));\r\n            }\r\n            else {\r\n                tmp = tmp || fragment.appendChild(context.createElement(\"div\"));\r\n                // Deserialize a standard representation\r\n                tag = (rtagName.exec(elem) || [\"\", \"\"])[1].toLowerCase();\r\n                wrap = wrapMap[tag] || wrapMap._default;\r\n                tmp.innerHTML = wrap[1] + elem.replace(rxhtmlTag, \"<$1></$2>\") + wrap[2];\r\n                // Descend through wrappers to the right content\r\n                j = wrap[0];\r\n                while (j--) {\r\n                    tmp = tmp.lastChild;\r\n                }\r\n                // Support: Android<4.1, PhantomJS<2\r\n                // push.apply(_, arraylike) throws on ancient WebKit\r\n                merge(nodes, tmp.childNodes);\r\n                // Remember the top-level container\r\n                tmp = fragment.firstChild;\r\n                // Ensure the created nodes are orphaned (#12392)\r\n                tmp.textContent = \"\";\r\n            }\r\n        }\r\n    }\r\n    // Remove wrapper from fragment\r\n    fragment.textContent = \"\";\r\n    i = 0;\r\n    while ((elem = nodes[i++])) {\r\n        // filter out scripts\r\n        if (elem.nodeType !== 1 || elem.tagName.toLowerCase() !== \"script\" || !rscriptType.test(elem.type || \"\")) {\r\n            fragment.appendChild(elem);\r\n        }\r\n    }\r\n    return fragment;\r\n}\r\nvar HtmlTemplateEngine = (function () {\r\n    function HtmlTemplateEngine() {\r\n    }\r\n    HtmlTemplateEngine.prototype.parse = function (data) {\r\n        // document.implementation stops scripts or inline event handlers from being executed immediately\r\n        var context = supportsCreateHTMLDocument ? document.implementation.createHTMLDocument(\"\") : document;\r\n        var parsed = rsingleTag.exec(data);\r\n        // Single tag\r\n        if (parsed) {\r\n            return [context.createElement(parsed[1])];\r\n        }\r\n        parsed = buildFragment([data], context);\r\n        var result = merge([], parsed.childNodes);\r\n        return result;\r\n    };\r\n    return HtmlTemplateEngine;\r\n})();\r\nexports.default = HtmlTemplateEngine;\r\n//# sourceMappingURL=HtmlTemplateEngine.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/HtmlTemplateEngine.js\n ** module id = 18\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar Command_1 = require(\"../Core/Command\");\r\n\"use strict\";\r\nvar CommandBinding = (function () {\r\n    function CommandBinding(domManager, app) {\r\n        this.priority = 0;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    CommandBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"command-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var compiled = this.domManager.compileBindingOptions(options, module);\r\n        var el = node;\r\n        var exp;\r\n        var cmdObservable;\r\n        var paramObservable;\r\n        var cleanup;\r\n        var isAnchor = el.tagName.toLowerCase() === \"a\";\r\n        var event = \"click\";\r\n        function doCleanup() {\r\n            if (cleanup) {\r\n                cleanup.dispose();\r\n                cleanup = null;\r\n            }\r\n        }\r\n        if (typeof compiled === \"function\") {\r\n            exp = compiled;\r\n            cmdObservable = this.domManager.expressionToObservable(exp, ctx);\r\n        }\r\n        else {\r\n            var opt = compiled;\r\n            exp = opt.command;\r\n            cmdObservable = this.domManager.expressionToObservable(exp, ctx);\r\n            if (opt.parameter) {\r\n                exp = opt.parameter;\r\n                paramObservable = this.domManager.expressionToObservable(exp, ctx);\r\n            }\r\n        }\r\n        if (paramObservable == null) {\r\n            paramObservable = Rx.Observable.return(undefined);\r\n        }\r\n        state.cleanup.add(Rx.Observable\r\n            .combineLatest(cmdObservable, paramObservable, function (cmd, param) { return ({ cmd: cmd, param: param }); })\r\n            .subscribe(function (x) {\r\n            try {\r\n                doCleanup();\r\n                cleanup = new Rx.CompositeDisposable();\r\n                if (x.cmd != null) {\r\n                    if (!Command_1.isCommand(x.cmd))\r\n                        Utils_1.throwError(\"Command-Binding only supports binding to a command!\");\r\n                    // disabled handling if supported by element\r\n                    if (Utils_1.elementCanBeDisabled(el)) {\r\n                        // initial update\r\n                        el.disabled = !x.cmd.canExecute(x.param);\r\n                        // listen to changes\r\n                        cleanup.add(x.cmd.canExecuteObservable.subscribe(function (canExecute) {\r\n                            el.disabled = !canExecute;\r\n                        }));\r\n                    }\r\n                    // handle input events\r\n                    cleanup.add(Rx.Observable.fromEvent(el, \"click\").subscribe(function (e) {\r\n                        // verify that the command can actually execute since we cannot disable \r\n                        // all elements - only form elements such as buttons \r\n                        if (x.cmd.canExecute(x.param)) {\r\n                            x.cmd.execute(x.param);\r\n                        }\r\n                        // prevent default for anchors\r\n                        if (isAnchor) {\r\n                            e.preventDefault();\r\n                        }\r\n                    }));\r\n                }\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            el = null;\r\n            // nullify locals\r\n            doCleanup();\r\n        }));\r\n    };\r\n    CommandBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    return CommandBinding;\r\n})();\r\nexports.default = CommandBinding;\r\n//# sourceMappingURL=Command.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/Command.js\n ** module id = 19\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") return Reflect.decorate(decorators, target, key, desc);\r\n    switch (arguments.length) {\r\n        case 2: return decorators.reduceRight(function(o, d) { return (d && d(o)) || o; }, target);\r\n        case 3: return decorators.reduceRight(function(o, d) { return (d && d(target, key)), void 0; }, void 0);\r\n        case 4: return decorators.reduceRight(function(o, d) { return (d && d(target, key, o)) || o; }, desc);\r\n    }\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar IID_1 = require(\"./../IID\");\r\nvar Utils_1 = require(\"././Utils\");\r\nvar Reflect_1 = require(\"././Reflect\");\r\nvar Injector_1 = require(\"../Core/Injector\");\r\nvar res = require(\"../Core/Resources\");\r\n\"use strict\";\r\nvar Command = (function () {\r\n    /// <summary>\r\n    /// Don't use this directly, use commandXYZ instead\r\n    /// </summary>\r\n    function Command(canExecute, executeAsync, scheduler) {\r\n        var _this = this;\r\n        this.resultsSubject = new Rx.Subject();\r\n        this.isExecutingSubject = new Rx.Subject();\r\n        this.inflightCount = 0;\r\n        this.canExecuteLatest = false;\r\n        this.canExecuteDisp = null;\r\n        this.scheduler = scheduler || Injector_1.injector.get(res.app).mainThreadScheduler;\r\n        this.func = executeAsync;\r\n        // setup canExecute\r\n        this.canExecuteObs = canExecute\r\n            .combineLatest(this.isExecutingSubject.startWith(false), function (ce, ie) { return ce && !ie; })\r\n            .catch(function (ex) {\r\n            _this.exceptionsSubject.onNext(ex);\r\n            return Rx.Observable.return(false);\r\n        })\r\n            .do(function (x) {\r\n            _this.canExecuteLatest = x;\r\n        })\r\n            .publish();\r\n        if (Utils_1.isInUnitTest()) {\r\n            this.canExecuteObs.connect();\r\n        }\r\n        // setup thrownExceptions\r\n        this.exceptionsSubject = new Rx.Subject();\r\n        this.thrownExceptions = this.exceptionsSubject.asObservable();\r\n        this.exceptionsSubject\r\n            .observeOn(this.scheduler)\r\n            .subscribe(Injector_1.injector.get(res.app).defaultExceptionHandler);\r\n    }\r\n    //////////////////////////////////\r\n    // IDisposable implementation\r\n    Command.prototype.dispose = function () {\r\n        var disp = this.canExecuteDisp;\r\n        if (disp != null)\r\n            disp.dispose();\r\n    };\r\n    Object.defineProperty(Command.prototype, \"canExecuteObservable\", {\r\n        ////////////////////\r\n        /// wx.ICommand\r\n        get: function () {\r\n            var _this = this;\r\n            // setup canExecuteObservable\r\n            var ret = this.canExecuteObs.startWith(this.canExecuteLatest).distinctUntilChanged();\r\n            if (this.canExecuteDisp != null)\r\n                return ret;\r\n            return Rx.Observable.create(function (subj) {\r\n                var disp = ret.subscribe(subj);\r\n                // NB: We intentionally leak the CanExecute disconnect, it's\r\n                // cleaned up by the global Dispose. This is kind of a\r\n                // \"Lazy Subscription\" to CanExecute by the command itself.\r\n                _this.canExecuteDisp = _this.canExecuteObs.connect();\r\n                return disp;\r\n            });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Command.prototype, \"isExecuting\", {\r\n        get: function () {\r\n            return this.isExecutingSubject.startWith(this.inflightCount > 0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Command.prototype, \"results\", {\r\n        get: function () {\r\n            return this.resultsSubject.asObservable();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Command.prototype.canExecute = function (parameter) {\r\n        if (this.canExecuteDisp == null)\r\n            this.canExecuteDisp = this.canExecuteObs.connect();\r\n        return this.canExecuteLatest;\r\n    };\r\n    Command.prototype.execute = function (parameter) {\r\n        this.executeAsync(parameter)\r\n            .catch(Rx.Observable.empty())\r\n            .subscribe();\r\n    };\r\n    Command.prototype.executeAsync = function (parameter) {\r\n        var self = this;\r\n        var ret = Rx.Observable.create(function (subj) {\r\n            if (++self.inflightCount === 1) {\r\n                self.isExecutingSubject.onNext(true);\r\n            }\r\n            var decrement = new Rx.SerialDisposable();\r\n            decrement.setDisposable(Rx.Disposable.create(function () {\r\n                if (--self.inflightCount === 0) {\r\n                    self.isExecutingSubject.onNext(false);\r\n                }\r\n            }));\r\n            var disp = self.func(parameter)\r\n                .observeOn(self.scheduler)\r\n                .do(function (_) { }, function (e) { return decrement.setDisposable(Rx.Disposable.empty); }, function () { return decrement.setDisposable(Rx.Disposable.empty); })\r\n                .do(function (x) { return self.resultsSubject.onNext(x); }, function (x) { return self.exceptionsSubject.onNext(x); })\r\n                .subscribe(subj);\r\n            return new Rx.CompositeDisposable(disp, decrement);\r\n        });\r\n        return ret\r\n            .publish()\r\n            .refCount();\r\n    };\r\n    Command = __decorate([\r\n        Reflect_1.Implements(IID_1.default.ICommand),\r\n        Reflect_1.Implements(IID_1.default.IDisposable), \r\n        __metadata('design:paramtypes', [Rx.Observable, Function, Object])\r\n    ], Command);\r\n    return Command;\r\n})();\r\nexports.Command = Command;\r\nvar internal;\r\n(function (internal) {\r\n    internal.commandConstructor = Command;\r\n})(internal = exports.internal || (exports.internal = {}));\r\n// factory method implementation\r\nfunction command() {\r\n    var args = Utils_1.args2Array(arguments);\r\n    var canExecute;\r\n    var execute;\r\n    var scheduler;\r\n    var thisArg;\r\n    if (Utils_1.isFunction(args[0])) {\r\n        // first overload\r\n        execute = args.shift();\r\n        canExecute = Utils_1.isRxObservable(args[0]) ? args.shift() : Rx.Observable.return(true);\r\n        scheduler = Utils_1.isRxScheduler(args[0]) ? args.shift() : undefined;\r\n        thisArg = args.shift();\r\n        if (thisArg != null)\r\n            execute = execute.bind(thisArg);\r\n        return asyncCommand(canExecute, function (parameter) {\r\n            return Rx.Observable.create(function (obs) {\r\n                try {\r\n                    execute(parameter);\r\n                    obs.onNext(null);\r\n                    obs.onCompleted();\r\n                }\r\n                catch (e) {\r\n                    obs.onError(e);\r\n                }\r\n                return Rx.Disposable.empty;\r\n            });\r\n        }, scheduler);\r\n    }\r\n    // second overload\r\n    canExecute = args.shift() || Rx.Observable.return(true);\r\n    scheduler = Utils_1.isRxScheduler(args[0]) ? args.shift() : undefined;\r\n    return new Command(canExecute, function (x) { return Rx.Observable.return(x); }, scheduler);\r\n}\r\nexports.command = command;\r\n// factory method implementation\r\nfunction asyncCommand() {\r\n    var args = Utils_1.args2Array(arguments);\r\n    var canExecute;\r\n    var executeAsync;\r\n    var scheduler;\r\n    var thisArg;\r\n    if (Utils_1.isFunction(args[0])) {\r\n        // second overload\r\n        executeAsync = args.shift();\r\n        scheduler = Utils_1.isRxScheduler(args[0]) ? args.shift() : undefined;\r\n        thisArg = args.shift();\r\n        if (thisArg != null)\r\n            executeAsync = executeAsync.bind(thisArg);\r\n        return new Command(Rx.Observable.return(true), executeAsync, scheduler);\r\n    }\r\n    // first overload\r\n    canExecute = args.shift();\r\n    executeAsync = args.shift();\r\n    scheduler = Utils_1.isRxScheduler(args[0]) ? args.shift() : undefined;\r\n    return new Command(canExecute, executeAsync, scheduler);\r\n}\r\nexports.asyncCommand = asyncCommand;\r\n// factory method implementation\r\nfunction combinedCommand() {\r\n    var args = Utils_1.args2Array(arguments);\r\n    var commands = args\r\n        .filter(function (x) { return isCommand(x); });\r\n    var canExecute = args\r\n        .filter(function (x) { return Utils_1.isRxObservable(x); })\r\n        .pop();\r\n    if (!canExecute)\r\n        canExecute = Rx.Observable.return(true);\r\n    var childrenCanExecute = Rx.Observable.combineLatest(commands.map(function (x) { return x.canExecuteObservable; }), function () {\r\n        var latestCanExecute = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            latestCanExecute[_i - 0] = arguments[_i];\r\n        }\r\n        return latestCanExecute.every(function (x) { return x; });\r\n    });\r\n    var canExecuteSum = Rx.Observable.combineLatest(canExecute.startWith(true), childrenCanExecute, function (parent, child) { return parent && child; });\r\n    var ret = command(canExecuteSum);\r\n    ret.results.subscribe(function (x) { return commands.forEach(function (cmd) {\r\n        cmd.execute(x);\r\n    }); });\r\n    return ret;\r\n}\r\nexports.combinedCommand = combinedCommand;\r\n/**\r\n* Determines if target is an instance of a ICommand\r\n* @param {any} target\r\n*/\r\nfunction isCommand(target) {\r\n    if (target == null)\r\n        return false;\r\n    return target instanceof Command ||\r\n        Utils_1.queryInterface(target, IID_1.default.ICommand);\r\n}\r\nexports.isCommand = isCommand;\r\n//# sourceMappingURL=Command.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Command.js\n ** module id = 20\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar Module_1 = require(\"../Core/Module\");\r\n\"use strict\";\r\nvar ModuleBinding = (function () {\r\n    function ModuleBinding(domManager, app) {\r\n        this.priority = 100;\r\n        this.controlsDescendants = true;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    ModuleBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"module-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var self = this;\r\n        var exp = this.domManager.compileBindingOptions(options, module);\r\n        var obs = this.domManager.expressionToObservable(exp, ctx);\r\n        var initialApply = true;\r\n        var cleanup;\r\n        function doCleanup() {\r\n            if (cleanup) {\r\n                cleanup.dispose();\r\n                cleanup = null;\r\n            }\r\n        }\r\n        // backup inner HTML\r\n        var template = new Array();\r\n        // subscribe\r\n        state.cleanup.add(obs.subscribe(function (x) {\r\n            try {\r\n                doCleanup();\r\n                cleanup = new Rx.CompositeDisposable();\r\n                var value = Utils_1.unwrapProperty(x);\r\n                var moduleNames;\r\n                var disp = undefined;\r\n                // split names\r\n                if (value) {\r\n                    value = value.trim();\r\n                    moduleNames = value.split(\" \").filter(function (x) { return x; });\r\n                }\r\n                if (moduleNames.length > 0) {\r\n                    var observables = moduleNames.map(function (x) { return Module_1.loadModule(x); });\r\n                    disp = Rx.Observable.combineLatest(observables, function (_) { return Utils_1.args2Array(arguments); }).subscribe(function (modules) {\r\n                        try {\r\n                            // create intermediate module\r\n                            var moduleName = (module || _this.app).name + \"+\" + moduleNames.join(\"+\");\r\n                            var merged = new Module_1.Module(moduleName);\r\n                            // merge modules into intermediate\r\n                            merged.merge(module || _this.app);\r\n                            modules.forEach(function (x) { return merged.merge(x); });\r\n                            // done\r\n                            self.applyValue(el, merged, template, ctx, state, initialApply);\r\n                            initialApply = false;\r\n                        }\r\n                        catch (e) {\r\n                            _this.app.defaultExceptionHandler.onNext(e);\r\n                        }\r\n                    });\r\n                    if (disp != null)\r\n                        cleanup.add(disp);\r\n                }\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            obs = null;\r\n            self = null;\r\n        }));\r\n    };\r\n    ModuleBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    ModuleBinding.prototype.applyValue = function (el, module, template, ctx, state, initialApply) {\r\n        if (initialApply) {\r\n            // clone to template\r\n            for (var i = 0; i < el.childNodes.length; i++) {\r\n                template.push(el.childNodes[i].cloneNode(true));\r\n            }\r\n        }\r\n        state.module = module;\r\n        // clean first\r\n        this.domManager.cleanDescendants(el);\r\n        // clear\r\n        while (el.firstChild) {\r\n            el.removeChild(el.firstChild);\r\n        }\r\n        // clone nodes and inject\r\n        for (var i = 0; i < template.length; i++) {\r\n            var node = template[i].cloneNode(true);\r\n            el.appendChild(node);\r\n        }\r\n        this.domManager.applyBindingsToDescendants(ctx, el);\r\n    };\r\n    return ModuleBinding;\r\n})();\r\nexports.default = ModuleBinding;\r\n//# sourceMappingURL=Module.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/Module.js\n ** module id = 21\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    __.prototype = b.prototype;\r\n    d.prototype = new __();\r\n};\r\nvar Utils_1 = require(\"../Core/Utils\");\r\n\"use strict\";\r\nvar IfBinding = (function () {\r\n    function IfBinding(domManager, app) {\r\n        this.priority = 50;\r\n        this.controlsDescendants = true;\r\n        ////////////////////\r\n        // wx.Implementation\r\n        this.inverse = false;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    IfBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"if-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var compiled = this.domManager.compileBindingOptions(options, module);\r\n        var el = node;\r\n        var self = this;\r\n        var initialApply = true;\r\n        var exp;\r\n        var animations = {};\r\n        var cleanup;\r\n        function doCleanup() {\r\n            if (cleanup) {\r\n                cleanup.dispose();\r\n                cleanup = null;\r\n            }\r\n        }\r\n        if (typeof compiled === \"object\") {\r\n            var opt = compiled;\r\n            exp = opt.condition;\r\n            // extract animations\r\n            if (opt.enter) {\r\n                animations.enter = this.domManager.evaluateExpression(opt.enter, ctx);\r\n                if (typeof animations.enter === \"string\") {\r\n                    animations.enter = module.animation(animations.enter);\r\n                }\r\n            }\r\n            if (opt.leave) {\r\n                animations.leave = this.domManager.evaluateExpression(opt.leave, ctx);\r\n                if (typeof animations.leave === \"string\") {\r\n                    animations.leave = module.animation(animations.leave);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            exp = compiled;\r\n        }\r\n        var obs = this.domManager.expressionToObservable(exp, ctx);\r\n        // backup inner HTML\r\n        var template = new Array();\r\n        // subscribe\r\n        state.cleanup.add(obs.subscribe(function (x) {\r\n            try {\r\n                doCleanup();\r\n                cleanup = new Rx.CompositeDisposable();\r\n                cleanup.add(self.applyValue(el, Utils_1.unwrapProperty(x), template, ctx, animations, initialApply));\r\n                initialApply = false;\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            obs = null;\r\n            el = null;\r\n            self = null;\r\n            // nullify locals\r\n            template = null;\r\n        }));\r\n    };\r\n    IfBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    IfBinding.prototype.applyValue = function (el, value, template, ctx, animations, initialApply) {\r\n        var leaveAnimation = animations.leave;\r\n        var enterAnimation = animations.enter;\r\n        var self = this;\r\n        var obs = undefined;\r\n        if (initialApply) {\r\n            // clone to template\r\n            for (var i = 0; i < el.childNodes.length; i++) {\r\n                template.push(el.childNodes[i].cloneNode(true));\r\n            }\r\n            // clear\r\n            while (el.firstChild) {\r\n                el.removeChild(el.firstChild);\r\n            }\r\n        }\r\n        var oldElements = Utils_1.nodeChildrenToArray(el);\r\n        value = this.inverse ? !value : value;\r\n        function removeOldElements() {\r\n            oldElements.forEach(function (x) {\r\n                self.domManager.cleanNode(x);\r\n                el.removeChild(x);\r\n            });\r\n        }\r\n        if (!value) {\r\n            if (oldElements.length > 0) {\r\n                if (leaveAnimation) {\r\n                    leaveAnimation.prepare(oldElements);\r\n                    obs = leaveAnimation.run(oldElements)\r\n                        .continueWith(function () { return leaveAnimation.complete(oldElements); })\r\n                        .continueWith(removeOldElements);\r\n                }\r\n                else {\r\n                    removeOldElements();\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var nodes = template.map(function (x) { return x.cloneNode(true); });\r\n            if (enterAnimation)\r\n                enterAnimation.prepare(nodes);\r\n            for (var i = 0; i < template.length; i++) {\r\n                el.appendChild(nodes[i]);\r\n            }\r\n            this.domManager.applyBindingsToDescendants(ctx, el);\r\n            if (enterAnimation) {\r\n                obs = enterAnimation.run(nodes)\r\n                    .continueWith(function () { return enterAnimation.complete(nodes); });\r\n            }\r\n        }\r\n        return obs ? (obs.subscribe() || Rx.Disposable.empty) : Rx.Disposable.empty;\r\n    };\r\n    return IfBinding;\r\n})();\r\nexports.IfBinding = IfBinding;\r\nvar NotIfBinding = (function (_super) {\r\n    __extends(NotIfBinding, _super);\r\n    function NotIfBinding(domManager, app) {\r\n        _super.call(this, domManager, app);\r\n        this.inverse = true;\r\n    }\r\n    return NotIfBinding;\r\n})(IfBinding);\r\nexports.NotIfBinding = NotIfBinding;\r\n//# sourceMappingURL=If.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/If.js\n ** module id = 22\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    __.prototype = b.prototype;\r\n    d.prototype = new __();\r\n};\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar BindingBase_1 = require(\"./BindingBase\");\r\n\"use strict\";\r\nvar CssBinding = (function (_super) {\r\n    __extends(CssBinding, _super);\r\n    function CssBinding(domManager, app) {\r\n        _super.call(this, domManager, app, true);\r\n    }\r\n    CssBinding.prototype.applyValue = function (el, value, key) {\r\n        var classes;\r\n        if (key !== \"\") {\r\n            classes = key.split(/\\s+/).map(function (x) { return x.trim(); }).filter(function (x) { return x; });\r\n            if (classes.length) {\r\n                Utils_1.toggleCssClass.apply(null, [el, !!value].concat(classes));\r\n            }\r\n        }\r\n        else {\r\n            var state = this.domManager.getNodeState(el);\r\n            // if we have previously added classes, remove them\r\n            if (state.cssBindingPreviousDynamicClasses != null) {\r\n                Utils_1.toggleCssClass.apply(null, [el, false].concat(state.cssBindingPreviousDynamicClasses));\r\n                state.cssBindingPreviousDynamicClasses = null;\r\n            }\r\n            if (value) {\r\n                classes = value.split(/\\s+/).map(function (x) { return x.trim(); }).filter(function (x) { return x; });\r\n                if (classes.length) {\r\n                    Utils_1.toggleCssClass.apply(null, [el, true].concat(classes));\r\n                    state.cssBindingPreviousDynamicClasses = classes;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return CssBinding;\r\n})(BindingBase_1.MultiOneWayBindingBase);\r\nexports.CssBinding = CssBinding;\r\nvar AttrBinding = (function (_super) {\r\n    __extends(AttrBinding, _super);\r\n    function AttrBinding(domManager, app) {\r\n        _super.call(this, domManager, app);\r\n        this.priority = 5;\r\n    }\r\n    AttrBinding.prototype.applyValue = function (el, value, key) {\r\n        // To cover cases like \"attr: { checked:someProp }\", we want to remove the attribute entirely\r\n        // when someProp is a \"no value\"-like value (strictly null, false, or undefined)\r\n        // (because the absence of the \"checked\" attr is how to mark an element as not checked, etc.)\r\n        var toRemove = (value === false) || (value === null) || (value === undefined);\r\n        if (toRemove)\r\n            el.removeAttribute(key);\r\n        else {\r\n            el.setAttribute(key, value.toString());\r\n        }\r\n    };\r\n    return AttrBinding;\r\n})(BindingBase_1.MultiOneWayBindingBase);\r\nexports.AttrBinding = AttrBinding;\r\nvar StyleBinding = (function (_super) {\r\n    __extends(StyleBinding, _super);\r\n    function StyleBinding(domManager, app) {\r\n        _super.call(this, domManager, app);\r\n    }\r\n    StyleBinding.prototype.applyValue = function (el, value, key) {\r\n        if (value === null || value === undefined || value === false) {\r\n            // Empty string removes the value, whereas null/undefined have no effect\r\n            value = \"\";\r\n        }\r\n        el.style[key] = value;\r\n    };\r\n    return StyleBinding;\r\n})(BindingBase_1.MultiOneWayBindingBase);\r\nexports.StyleBinding = StyleBinding;\r\n//# sourceMappingURL=MultiOneWay.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/MultiOneWay.js\n ** module id = 23\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\n\"use strict\";\r\n/**\r\n* Base class for one-way bindings that take a single expression and apply the result to one or more target elements\r\n* @class\r\n*/\r\nvar SingleOneWayBindingBase = (function () {\r\n    function SingleOneWayBindingBase(domManager, app) {\r\n        this.priority = 0;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    SingleOneWayBindingBase.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var self = this;\r\n        var exp = this.domManager.compileBindingOptions(options, module);\r\n        var obs = this.domManager.expressionToObservable(exp, ctx);\r\n        // subscribe\r\n        state.cleanup.add(obs.subscribe(function (x) {\r\n            try {\r\n                self.applyValue(el, Utils_1.unwrapProperty(x));\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            el = null;\r\n            obs = null;\r\n            self = null;\r\n        }));\r\n    };\r\n    SingleOneWayBindingBase.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    SingleOneWayBindingBase.prototype.applyValue = function (el, value) {\r\n        Utils_1.throwError(\"you need to override this method!\");\r\n    };\r\n    return SingleOneWayBindingBase;\r\n})();\r\nexports.SingleOneWayBindingBase = SingleOneWayBindingBase;\r\n/**\r\n* Base class for one-way bindings that take multiple expressions defined as object literal and apply the result to one or more target elements\r\n* @class\r\n*/\r\nvar MultiOneWayBindingBase = (function () {\r\n    function MultiOneWayBindingBase(domManager, app, supportsDynamicValues) {\r\n        if (supportsDynamicValues === void 0) { supportsDynamicValues = false; }\r\n        this.priority = 0;\r\n        this.supportsDynamicValues = false;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n        this.supportsDynamicValues = supportsDynamicValues;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    MultiOneWayBindingBase.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"binding only operates on elements!\");\r\n        var compiled = this.domManager.compileBindingOptions(options, module);\r\n        if (compiled == null || (typeof compiled !== \"object\" && !this.supportsDynamicValues))\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var observables = new Array();\r\n        var obs;\r\n        var exp;\r\n        var keys = Object.keys(compiled);\r\n        var key;\r\n        if (typeof compiled === \"function\") {\r\n            exp = compiled;\r\n            obs = this.domManager.expressionToObservable(exp, ctx);\r\n            observables.push([\"\", obs]);\r\n        }\r\n        else {\r\n            for (var i = 0; i < keys.length; i++) {\r\n                key = keys[i];\r\n                var value = compiled[key];\r\n                exp = value;\r\n                obs = this.domManager.expressionToObservable(exp, ctx);\r\n                observables.push([key, obs]);\r\n            }\r\n        }\r\n        // subscribe\r\n        for (var i = 0; i < observables.length; i++) {\r\n            key = observables[i][0];\r\n            obs = observables[i][1];\r\n            this.subscribe(el, obs, key, state);\r\n        }\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            el = null;\r\n            keys = null;\r\n            // nullify locals\r\n            observables = null;\r\n        }));\r\n    };\r\n    MultiOneWayBindingBase.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    MultiOneWayBindingBase.prototype.subscribe = function (el, obs, key, state) {\r\n        var _this = this;\r\n        state.cleanup.add(obs.subscribe(function (x) {\r\n            try {\r\n                _this.applyValue(el, Utils_1.unwrapProperty(x), key);\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n    };\r\n    MultiOneWayBindingBase.prototype.applyValue = function (el, key, value) {\r\n        Utils_1.throwError(\"you need to override this method!\");\r\n    };\r\n    return MultiOneWayBindingBase;\r\n})();\r\nexports.MultiOneWayBindingBase = MultiOneWayBindingBase;\r\n//# sourceMappingURL=BindingBase.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/BindingBase.js\n ** module id = 24\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    __.prototype = b.prototype;\r\n    d.prototype = new __();\r\n};\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar BindingBase_1 = require(\"./BindingBase\");\r\n\"use strict\";\r\n////////////////////\r\n// Bindings\r\nvar TextBinding = (function (_super) {\r\n    __extends(TextBinding, _super);\r\n    function TextBinding(domManager, app) {\r\n        _super.call(this, domManager, app);\r\n    }\r\n    TextBinding.prototype.applyValue = function (el, value) {\r\n        if ((value === null) || (value === undefined))\r\n            value = \"\";\r\n        el.textContent = value;\r\n    };\r\n    return TextBinding;\r\n})(BindingBase_1.SingleOneWayBindingBase);\r\nexports.TextBinding = TextBinding;\r\nvar VisibleBinding = (function (_super) {\r\n    __extends(VisibleBinding, _super);\r\n    function VisibleBinding(domManager, app) {\r\n        _super.call(this, domManager, app);\r\n        this.inverse = false;\r\n        this.inverse = false;\r\n        this.priority = 10;\r\n    }\r\n    VisibleBinding.prototype.configure = function (_options) {\r\n        var options = _options;\r\n        VisibleBinding.useCssClass = options.useCssClass;\r\n        VisibleBinding.hiddenClass = options.hiddenClass;\r\n    };\r\n    ////////////////////\r\n    // implementation\r\n    VisibleBinding.prototype.applyValue = function (el, value) {\r\n        value = this.inverse ? !value : value;\r\n        if (!VisibleBinding.useCssClass) {\r\n            if (!value) {\r\n                el.style.display = \"none\";\r\n            }\r\n            else {\r\n                el.style.display = \"\";\r\n            }\r\n        }\r\n        else {\r\n            Utils_1.toggleCssClass(el, !value, VisibleBinding.hiddenClass);\r\n        }\r\n    };\r\n    return VisibleBinding;\r\n})(BindingBase_1.SingleOneWayBindingBase);\r\nexports.VisibleBinding = VisibleBinding;\r\nvar HiddenBinding = (function (_super) {\r\n    __extends(HiddenBinding, _super);\r\n    function HiddenBinding(domManager, app) {\r\n        _super.call(this, domManager, app);\r\n        this.inverse = true;\r\n    }\r\n    return HiddenBinding;\r\n})(VisibleBinding);\r\nexports.HiddenBinding = HiddenBinding;\r\nvar HtmlBinding = (function (_super) {\r\n    __extends(HtmlBinding, _super);\r\n    function HtmlBinding(domManager, app) {\r\n        _super.call(this, domManager, app);\r\n    }\r\n    HtmlBinding.prototype.applyValue = function (el, value) {\r\n        if ((value === null) || (value === undefined))\r\n            value = \"\";\r\n        el.innerHTML = value;\r\n    };\r\n    return HtmlBinding;\r\n})(BindingBase_1.SingleOneWayBindingBase);\r\nexports.HtmlBinding = HtmlBinding;\r\nvar DisableBinding = (function (_super) {\r\n    __extends(DisableBinding, _super);\r\n    function DisableBinding(domManager, app) {\r\n        _super.call(this, domManager, app);\r\n        this.inverse = false;\r\n        this.inverse = false;\r\n    }\r\n    ////////////////////\r\n    // implementation\r\n    DisableBinding.prototype.applyValue = function (el, value) {\r\n        value = this.inverse ? !value : value;\r\n        if (Utils_1.elementCanBeDisabled(el)) {\r\n            el.disabled = value;\r\n        }\r\n    };\r\n    return DisableBinding;\r\n})(BindingBase_1.SingleOneWayBindingBase);\r\nexports.DisableBinding = DisableBinding;\r\nvar EnableBinding = (function (_super) {\r\n    __extends(EnableBinding, _super);\r\n    function EnableBinding(domManager, app) {\r\n        _super.call(this, domManager, app);\r\n        this.inverse = true;\r\n    }\r\n    return EnableBinding;\r\n})(DisableBinding);\r\nexports.EnableBinding = EnableBinding;\r\n//# sourceMappingURL=SingleOneWay.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/SingleOneWay.js\n ** module id = 25\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../RxExtensions.d.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar VirtualChildNodes_1 = require(\"./../Core/VirtualChildNodes\");\r\nvar RefCountDisposeWrapper_1 = require(\"./../Core/RefCountDisposeWrapper\");\r\nvar Injector_1 = require(\"../Core/Injector\");\r\nvar List_1 = require(\"../Collections/List\");\r\n\"use strict\";\r\nvar ForEachBinding = (function () {\r\n    function ForEachBinding(domManager, app) {\r\n        this.priority = 40;\r\n        this.controlsDescendants = true;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n        // hook into getDataContext() to map state['index'] to ctx['$index']\r\n        domManager.registerDataContextExtension(function (node, ctx) {\r\n            var state = domManager.getNodeState(node);\r\n            ctx.$index = state.index;\r\n        });\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    ForEachBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"forEach binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"** invalid binding options!\");\r\n        var compiled = this.domManager.compileBindingOptions(options, module);\r\n        var el = node;\r\n        var self = this;\r\n        var initialApply = true;\r\n        var cleanup = null;\r\n        var hooks;\r\n        var exp;\r\n        var setProxyFunc;\r\n        var animations = {};\r\n        if (typeof compiled === \"object\" && compiled.hasOwnProperty(\"data\")) {\r\n            var opt = compiled;\r\n            exp = opt.data;\r\n            // extract animations\r\n            if (opt.itemEnter) {\r\n                animations.itemEnter = this.domManager.evaluateExpression(opt.itemEnter, ctx);\r\n                if (typeof animations.itemEnter === \"string\") {\r\n                    animations.itemEnter = module.animation(animations.itemEnter);\r\n                }\r\n            }\r\n            if (opt.itemLeave) {\r\n                animations.itemLeave = this.domManager.evaluateExpression(opt.itemLeave, ctx);\r\n                if (typeof animations.itemLeave === \"string\") {\r\n                    animations.itemLeave = module.animation(animations.itemLeave);\r\n                }\r\n            }\r\n            if (opt.hooks) {\r\n                // extract hooks\r\n                hooks = this.domManager.evaluateExpression(opt.hooks, ctx);\r\n            }\r\n            // optionally resolve hooks if passed as string identifier\r\n            if (typeof hooks === \"string\")\r\n                hooks = Injector_1.injector.get(hooks);\r\n            if (opt['debug']) {\r\n                if (opt['debug']['setProxyFunc']) {\r\n                    setProxyFunc = this.domManager.evaluateExpression(opt['debug']['setProxyFunc'], ctx);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            exp = compiled;\r\n        }\r\n        var obs = this.domManager.expressionToObservable(exp, ctx);\r\n        // add own disposables\r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            if (cleanup) {\r\n                cleanup.dispose();\r\n                cleanup = null;\r\n            }\r\n        }));\r\n        // backup inner HTML\r\n        var template = new Array();\r\n        // subscribe\r\n        state.cleanup.add(obs.subscribe(function (x) {\r\n            try {\r\n                if (cleanup) {\r\n                    cleanup.dispose();\r\n                }\r\n                cleanup = new Rx.CompositeDisposable();\r\n                self.applyValue(el, x, hooks, animations, template, ctx, initialApply, cleanup, setProxyFunc);\r\n                initialApply = false;\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            obs = null;\r\n            el = null;\r\n            self = null;\r\n            // nullify locals\r\n            template = null;\r\n            hooks = null;\r\n        }));\r\n    };\r\n    ForEachBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    ForEachBinding.prototype.createIndexPropertyForNode = function (proxy, child, startIndex, trigger, templateLength) {\r\n        return Rx.Observable.defer(function () {\r\n            return Rx.Observable.create(function (obs) {\r\n                return trigger.subscribe(function (_) {\r\n                    // recalculate index from node position within parent\r\n                    var index = proxy.childNodes.indexOf(child);\r\n                    index /= templateLength;\r\n                    obs.onNext(index);\r\n                });\r\n            });\r\n        })\r\n            .toProperty(startIndex);\r\n    };\r\n    ForEachBinding.prototype.appendAllRows = function (proxy, list, ctx, template, hooks, animations, indexTrigger, isInitial) {\r\n        var length = list.length();\r\n        for (var i = 0; i < length; i++) {\r\n            this.appendRow(proxy, i, list.get(i), ctx, template, hooks, animations, indexTrigger, isInitial);\r\n        }\r\n    };\r\n    ForEachBinding.prototype.appendRow = function (proxy, index, item, ctx, template, hooks, animations, indexTrigger, isInitial) {\r\n        var nodes = Utils_1.cloneNodeArray(template);\r\n        var _index = index;\r\n        var enterAnimation = animations.itemEnter;\r\n        var cbData = {\r\n            item: item\r\n        };\r\n        if (indexTrigger) {\r\n            _index = this.createIndexPropertyForNode(proxy, nodes[0], index, indexTrigger, template.length);\r\n            cbData.indexDisp = new RefCountDisposeWrapper_1.default(_index, 0);\r\n        }\r\n        cbData.index = _index;\r\n        if (enterAnimation != null)\r\n            enterAnimation.prepare(nodes);\r\n        proxy.appendChilds(nodes, cbData);\r\n        if (hooks) {\r\n            if (hooks.afterRender)\r\n                hooks.afterRender(nodes, item);\r\n            if (!isInitial && hooks.afterAdd)\r\n                hooks.afterAdd(nodes, item, index);\r\n        }\r\n        if (enterAnimation) {\r\n            var disp = enterAnimation.run(nodes)\r\n                .continueWith(function () { return enterAnimation.complete(nodes); })\r\n                .subscribe(function (x) {\r\n                if (disp != null)\r\n                    disp.dispose();\r\n            });\r\n        }\r\n    };\r\n    ForEachBinding.prototype.insertRow = function (proxy, index, item, ctx, template, hooks, animations, indexTrigger) {\r\n        var templateLength = template.length;\r\n        var enterAnimation = animations.itemEnter;\r\n        var nodes = Utils_1.cloneNodeArray(template);\r\n        var _index = this.createIndexPropertyForNode(proxy, nodes[0], index, indexTrigger, template.length);\r\n        if (enterAnimation != null)\r\n            enterAnimation.prepare(nodes);\r\n        proxy.insertChilds(index * templateLength, nodes, {\r\n            index: _index,\r\n            item: item,\r\n            indexDisp: new RefCountDisposeWrapper_1.default(_index, 0)\r\n        });\r\n        if (hooks) {\r\n            if (hooks.afterRender)\r\n                hooks.afterRender(nodes, item);\r\n            if (hooks.afterAdd)\r\n                hooks.afterAdd(nodes, item, index);\r\n        }\r\n        if (enterAnimation) {\r\n            var disp = enterAnimation.run(nodes)\r\n                .continueWith(function () { return enterAnimation.complete(nodes); })\r\n                .subscribe(function (x) {\r\n                if (disp != null)\r\n                    disp.dispose();\r\n            });\r\n        }\r\n    };\r\n    ForEachBinding.prototype.removeRow = function (proxy, index, item, template, hooks, animations) {\r\n        var templateLength = template.length;\r\n        var el = proxy.targetNode;\r\n        var nodes = proxy.removeChilds(index * templateLength, templateLength, true);\r\n        var leaveAnimation = animations.itemLeave;\r\n        function removeNodes() {\r\n            for (var i = 0; i < templateLength; i++) {\r\n                el.removeChild(nodes[i]);\r\n            }\r\n        }\r\n        if (hooks && hooks.beforeRemove) {\r\n            hooks.beforeRemove(nodes, item, index);\r\n        }\r\n        else {\r\n            if (leaveAnimation != null) {\r\n                leaveAnimation.prepare(nodes);\r\n                var disp = leaveAnimation.run(nodes)\r\n                    .continueWith(function () { return leaveAnimation.complete(nodes); })\r\n                    .continueWith(removeNodes)\r\n                    .subscribe(function (x) {\r\n                    if (disp != null)\r\n                        disp.dispose();\r\n                });\r\n            }\r\n            else {\r\n                removeNodes();\r\n            }\r\n        }\r\n    };\r\n    ForEachBinding.prototype.moveRow = function (proxy, from, to, item, template, hooks, animations, indexTrigger) {\r\n        var templateLength = template.length;\r\n        var el = proxy.targetNode;\r\n        var nodes = proxy.removeChilds(from * templateLength, templateLength, true);\r\n        var leaveAnimation = animations.itemLeave;\r\n        var enterAnimation = animations.itemEnter;\r\n        var combined = [];\r\n        var obs;\r\n        var self = this;\r\n        if (hooks && hooks.beforeMove) {\r\n            hooks.beforeMove(nodes, item, from);\r\n        }\r\n        function removeNodes() {\r\n            for (var i = 0; i < templateLength; i++) {\r\n                el.removeChild(nodes[i]);\r\n            }\r\n        }\r\n        function createRow() {\r\n            // create new row\r\n            nodes = Utils_1.cloneNodeArray(template);\r\n            var _index = self.createIndexPropertyForNode(proxy, nodes[0], from, indexTrigger, template.length);\r\n            if (enterAnimation != null)\r\n                enterAnimation.prepare(nodes);\r\n            proxy.insertChilds(templateLength * to, nodes, {\r\n                index: _index,\r\n                item: item,\r\n                indexDisp: new RefCountDisposeWrapper_1.default(_index, 0)\r\n            });\r\n            if (hooks && hooks.afterMove) {\r\n                hooks.afterMove(nodes, item, from);\r\n            }\r\n        }\r\n        // construct leave-observable\r\n        if (leaveAnimation) {\r\n            leaveAnimation.prepare(nodes);\r\n            obs = leaveAnimation.run(nodes)\r\n                .continueWith(function () { return leaveAnimation.complete(nodes); })\r\n                .continueWith(removeNodes);\r\n        }\r\n        else {\r\n            obs = Rx.Observable.startDeferred(removeNodes);\r\n        }\r\n        combined.push(obs);\r\n        // construct enter-observable\r\n        obs = Rx.Observable.startDeferred(createRow);\r\n        if (enterAnimation) {\r\n            obs = obs.continueWith(enterAnimation.run(nodes))\r\n                .continueWith(function () { return enterAnimation.complete(nodes); });\r\n        }\r\n        combined.push(obs);\r\n        // optimize return\r\n        if (combined.length > 1)\r\n            obs = Rx.Observable.combineLatest(combined, Utils_1.noop).take(1);\r\n        else if (combined.length === 1)\r\n            obs = combined[0].take(1);\r\n        var disp = obs.subscribe(function (x) {\r\n            if (disp != null)\r\n                disp.dispose();\r\n        });\r\n    };\r\n    ForEachBinding.prototype.rebindRow = function (proxy, index, item, template, indexTrigger) {\r\n        var templateLength = template.length;\r\n        var _index = this.createIndexPropertyForNode(proxy, proxy.childNodes[(index * templateLength)], index, indexTrigger, template.length);\r\n        var indexDisp = new RefCountDisposeWrapper_1.default(_index, 0);\r\n        for (var i = 0; i < template.length; i++) {\r\n            var node = proxy.childNodes[(index * templateLength) + i];\r\n            if (node.nodeType === 1) {\r\n                this.domManager.cleanNode(node);\r\n                var state = this.domManager.createNodeState(item);\r\n                state.index = _index;\r\n                indexDisp.addRef();\r\n                state.cleanup.add(indexDisp);\r\n                this.domManager.setNodeState(node, state);\r\n                this.domManager.applyBindings(item, node);\r\n            }\r\n        }\r\n    };\r\n    ForEachBinding.prototype.observeList = function (proxy, ctx, template, cleanup, list, hooks, animations, indexTrigger) {\r\n        var _this = this;\r\n        var i;\r\n        var length;\r\n        cleanup.add(indexTrigger);\r\n        // initial insert\r\n        this.appendAllRows(proxy, list, ctx, template, hooks, animations, indexTrigger, true);\r\n        // track changes\r\n        cleanup.add(list.itemsAdded.subscribe(function (e) {\r\n            length = e.items.length;\r\n            if (e.from === list.length()) {\r\n                for (var i_1 = 0; i_1 < length; i_1++) {\r\n                    _this.appendRow(proxy, i_1 + e.from, e.items[i_1], ctx, template, hooks, animations, indexTrigger, false);\r\n                }\r\n            }\r\n            else {\r\n                for (var i_2 = 0; i_2 < e.items.length; i_2++) {\r\n                    _this.insertRow(proxy, i_2 + e.from, e.items[i_2], ctx, template, hooks, animations, indexTrigger);\r\n                }\r\n            }\r\n            indexTrigger.onNext(true);\r\n        }));\r\n        cleanup.add(list.itemsRemoved.subscribe(function (e) {\r\n            length = e.items.length;\r\n            for (var i_3 = 0; i_3 < length; i_3++) {\r\n                _this.removeRow(proxy, i_3 + e.from, e.items[i_3], template, hooks, animations);\r\n            }\r\n            indexTrigger.onNext(true);\r\n        }));\r\n        cleanup.add(list.itemsMoved.subscribe(function (e) {\r\n            _this.moveRow(proxy, e.from, e.to, e.items[0], template, hooks, animations, indexTrigger);\r\n            indexTrigger.onNext(true);\r\n        }));\r\n        cleanup.add(list.itemReplaced.subscribe(function (e) {\r\n            _this.rebindRow(proxy, e.from, e.items[0], template, indexTrigger);\r\n            indexTrigger.onNext(true);\r\n        }));\r\n        cleanup.add(list.shouldReset.subscribe(function (e) {\r\n            proxy.clear();\r\n            _this.appendAllRows(proxy, list, ctx, template, hooks, animations, indexTrigger, false);\r\n            indexTrigger.onNext(true);\r\n        }));\r\n    };\r\n    ForEachBinding.prototype.applyValue = function (el, value, hooks, animations, template, ctx, initialApply, cleanup, setProxyFunc) {\r\n        var i, length;\r\n        if (initialApply) {\r\n            // clone to template\r\n            length = el.childNodes.length;\r\n            for (var i_4 = 0; i_4 < length; i_4++) {\r\n                template.push(el.childNodes[i_4].cloneNode(true));\r\n            }\r\n        }\r\n        // perform initial clear\r\n        while (el.firstChild) {\r\n            el.removeChild(el.firstChild);\r\n        }\r\n        if (template.length === 0)\r\n            return; // nothing to do\r\n        var proxy;\r\n        var self = this;\r\n        var recalcIndextrigger;\r\n        function nodeInsertCB(node, callbackData) {\r\n            var item = callbackData.item;\r\n            var index = callbackData.index;\r\n            var indexDisp = callbackData.indexDisp;\r\n            if (node.nodeType === 1) {\r\n                // propagate index to state\r\n                var state = (self.domManager.getNodeState(node) || self.domManager.createNodeState());\r\n                state.model = item;\r\n                state.index = index;\r\n                self.domManager.setNodeState(node, state);\r\n                if (recalcIndextrigger != null && indexDisp != null) {\r\n                    indexDisp.addRef();\r\n                    state.cleanup.add(indexDisp);\r\n                }\r\n                self.domManager.applyBindings(item, node);\r\n            }\r\n        }\r\n        function nodeRemoveCB(node) {\r\n            if (node.nodeType === 1) {\r\n                self.domManager.cleanNode(node);\r\n            }\r\n        }\r\n        proxy = new VirtualChildNodes_1.default(el, false, nodeInsertCB, nodeRemoveCB);\r\n        if (setProxyFunc)\r\n            setProxyFunc(proxy);\r\n        cleanup.add(Rx.Disposable.create(function () {\r\n            proxy = null;\r\n        }));\r\n        if (Array.isArray(value)) {\r\n            var arr = value;\r\n            // iterate once and be done with it\r\n            length = arr.length;\r\n            for (var i_5 = 0; i_5 < length; i_5++) {\r\n                this.appendRow(proxy, i_5, arr[i_5], ctx, template, hooks, animations, undefined, true);\r\n            }\r\n        }\r\n        else if (List_1.isList(value)) {\r\n            var list = value;\r\n            recalcIndextrigger = new Rx.Subject();\r\n            this.observeList(proxy, ctx, template, cleanup, list, hooks, animations, recalcIndextrigger);\r\n        }\r\n    };\r\n    return ForEachBinding;\r\n})();\r\nexports.default = ForEachBinding;\r\n//# sourceMappingURL=ForEach.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/ForEach.js\n ** module id = 26\n ** module chunks = 0\n **/","\"use strict\";\r\n/**\r\n* VirtualChildNodes implements consisent and predictable manipulation\r\n* of a DOM Node's childNodes collection regardless its the true contents\r\n* @class\r\n**/\r\nvar VirtualChildNodes = (function () {\r\n    function VirtualChildNodes(targetNode, initialSyncToTarget, insertCB, removeCB) {\r\n        this.childNodes = [];\r\n        this.targetNode = targetNode;\r\n        this.insertCB = insertCB;\r\n        this.removeCB = removeCB;\r\n        if (initialSyncToTarget) {\r\n            for (var i = 0; i < targetNode.childNodes.length; i++) {\r\n                this.childNodes.push(targetNode.childNodes[i]);\r\n            }\r\n        }\r\n    }\r\n    VirtualChildNodes.prototype.appendChilds = function (nodes, callbackData) {\r\n        var length = nodes.length;\r\n        // append to proxy array\r\n        if (nodes.length > 1)\r\n            Array.prototype.push.apply(this.childNodes, nodes);\r\n        else\r\n            this.childNodes.push(nodes[0]);\r\n        // append to DOM\r\n        for (var i = 0; i < length; i++) {\r\n            this.targetNode.appendChild(nodes[i]);\r\n        }\r\n        // callback\r\n        if (this.insertCB) {\r\n            for (var i = 0; i < length; i++) {\r\n                this.insertCB(nodes[i], callbackData);\r\n            }\r\n        }\r\n    };\r\n    VirtualChildNodes.prototype.insertChilds = function (index, nodes, callbackData) {\r\n        if (index === this.childNodes.length) {\r\n            this.appendChilds(nodes, callbackData);\r\n        }\r\n        else {\r\n            var refNode = this.childNodes[index];\r\n            var length_1 = nodes.length;\r\n            // insert into proxy array\r\n            Array.prototype.splice.apply(this.childNodes, [index, 0].concat(nodes));\r\n            // insert into DOM\r\n            for (var i = 0; i < length_1; i++) {\r\n                this.targetNode.insertBefore(nodes[i], refNode);\r\n            }\r\n            // callback\r\n            if (this.insertCB) {\r\n                for (var i = 0; i < length_1; i++) {\r\n                    this.insertCB(nodes[i], callbackData);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    VirtualChildNodes.prototype.removeChilds = function (index, count, keepDom) {\r\n        var node;\r\n        if (count === 0)\r\n            return [];\r\n        // extract removed nodes\r\n        var nodes = this.childNodes.slice(index, index + count);\r\n        // remove from proxy array\r\n        this.childNodes.splice(index, count);\r\n        if (!keepDom) {\r\n            // remove from DOM\r\n            var length_2 = nodes.length;\r\n            for (var i = 0; i < length_2; i++) {\r\n                node = nodes[i];\r\n                if (this.removeCB)\r\n                    this.removeCB(node);\r\n                this.targetNode.removeChild(node);\r\n            }\r\n        }\r\n        return nodes;\r\n    };\r\n    VirtualChildNodes.prototype.clear = function () {\r\n        // remove from DOM\r\n        var length = this.childNodes.length;\r\n        var node;\r\n        for (var i = 0; i < length; i++) {\r\n            node = this.childNodes[i];\r\n            if (this.removeCB)\r\n                this.removeCB(node);\r\n            this.targetNode.removeChild(node);\r\n        }\r\n        // reset proxy array\r\n        this.childNodes = [];\r\n    };\r\n    return VirtualChildNodes;\r\n})();\r\nexports.default = VirtualChildNodes;\r\n//# sourceMappingURL=VirtualChildNodes.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/VirtualChildNodes.js\n ** module id = 27\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\n\"use strict\";\r\nvar RefCountDisposeWrapper = (function () {\r\n    function RefCountDisposeWrapper(inner, initialRefCount) {\r\n        if (initialRefCount === void 0) { initialRefCount = 1; }\r\n        this.inner = inner;\r\n        this.refCount = initialRefCount;\r\n    }\r\n    RefCountDisposeWrapper.prototype.addRef = function () {\r\n        this.refCount++;\r\n    };\r\n    RefCountDisposeWrapper.prototype.release = function () {\r\n        if (--this.refCount === 0) {\r\n            this.inner.dispose();\r\n            this.inner = null;\r\n        }\r\n        return this.refCount;\r\n    };\r\n    RefCountDisposeWrapper.prototype.dispose = function () {\r\n        this.release();\r\n    };\r\n    return RefCountDisposeWrapper;\r\n})();\r\nexports.default = RefCountDisposeWrapper;\r\n//# sourceMappingURL=RefCountDisposeWrapper.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/RefCountDisposeWrapper.js\n ** module id = 28\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    __.prototype = b.prototype;\r\n    d.prototype = new __();\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") return Reflect.decorate(decorators, target, key, desc);\r\n    switch (arguments.length) {\r\n        case 2: return decorators.reduceRight(function(o, d) { return (d && d(o)) || o; }, target);\r\n        case 3: return decorators.reduceRight(function(o, d) { return (d && d(target, key)), void 0; }, void 0);\r\n        case 4: return decorators.reduceRight(function(o, d) { return (d && d(target, key, o)) || o; }, desc);\r\n    }\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar Oid_1 = require(\"../Core/Oid\");\r\nvar IID_1 = require(\"./../IID\");\r\nvar Lazy_1 = require(\"./../Core/Lazy\");\r\nvar ScheduledSubject_1 = require(\"./../Core/ScheduledSubject\");\r\nvar Events_1 = require(\"../Core/Events\");\r\nvar RefCountDisposeWrapper_1 = require(\"./../Core/RefCountDisposeWrapper\");\r\nvar log = require(\"./../Core/Log\");\r\nvar Reflect_1 = require(\"./../Core/Reflect\");\r\nvar Injector_1 = require(\"../Core/Injector\");\r\nvar res = require(\"../Core/Resources\");\r\n\"use strict\";\r\n/**\r\n* ReactiveUI's awesome ReactiveList ported to Typescript\r\n* @class\r\n*/\r\nvar ObservableList = (function () {\r\n    function ObservableList(initialContents, resetChangeThreshold, scheduler) {\r\n        if (resetChangeThreshold === void 0) { resetChangeThreshold = 0.3; }\r\n        if (scheduler === void 0) { scheduler = null; }\r\n        //////////////////////////\r\n        // Some array convenience members\r\n        this.push = this.add;\r\n        this.changeNotificationsSuppressed = 0;\r\n        this.propertyChangeWatchers = null;\r\n        this.resetChangeThreshold = 0;\r\n        this.resetSubCount = 0;\r\n        this.hasWhinedAboutNoResetSub = false;\r\n        this.app = Injector_1.injector.get(res.app);\r\n        this.setupRx(initialContents, resetChangeThreshold, scheduler);\r\n    }\r\n    //////////////////////////////////\r\n    // wx.IDisposable implementation\r\n    ObservableList.prototype.dispose = function () {\r\n        this.clearAllPropertyChangeWatchers();\r\n    };\r\n    Object.defineProperty(ObservableList.prototype, \"isReadOnly\", {\r\n        ////////////////////\r\n        /// wx.IObservableList<T>\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"itemsAdded\", {\r\n        get: function () {\r\n            if (!this._itemsAdded)\r\n                this._itemsAdded = this.itemsAddedSubject.value.asObservable();\r\n            return this._itemsAdded;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"beforeItemsAdded\", {\r\n        get: function () {\r\n            if (!this._beforeItemsAdded)\r\n                this._beforeItemsAdded = this.beforeItemsAddedSubject.value.asObservable();\r\n            return this._beforeItemsAdded;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"itemsRemoved\", {\r\n        get: function () {\r\n            if (!this._itemsRemoved)\r\n                this._itemsRemoved = this.itemsRemovedSubject.value.asObservable();\r\n            return this._itemsRemoved;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"beforeItemsRemoved\", {\r\n        get: function () {\r\n            if (!this._beforeItemsRemoved)\r\n                this._beforeItemsRemoved = this.beforeItemsRemovedSubject.value.asObservable();\r\n            return this._beforeItemsRemoved;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"itemReplaced\", {\r\n        get: function () {\r\n            if (!this._itemReplaced)\r\n                this._itemReplaced = this.itemReplacedSubject.value.asObservable();\r\n            return this._itemReplaced;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"beforeItemReplaced\", {\r\n        get: function () {\r\n            if (!this._beforeItemReplaced)\r\n                this._beforeItemReplaced = this.beforeItemReplacedSubject.value.asObservable();\r\n            return this._beforeItemReplaced;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"beforeItemsMoved\", {\r\n        get: function () {\r\n            if (!this._beforeItemsMoved)\r\n                this._beforeItemsMoved = this.beforeItemsMovedSubject.value.asObservable();\r\n            return this._beforeItemsMoved;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"itemsMoved\", {\r\n        get: function () {\r\n            if (!this._itemsMoved)\r\n                this._itemsMoved = this.itemsMovedSubject.value.asObservable();\r\n            return this._itemsMoved;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"lengthChanging\", {\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._lengthChanging)\r\n                this._lengthChanging = this.listChanging.select(function (_) {\r\n                    return _this.inner.length;\r\n                }).distinctUntilChanged();\r\n            return this._lengthChanging;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"lengthChanged\", {\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._lengthChanged)\r\n                this._lengthChanged = this.listChanged.select(function (_) {\r\n                    return _this.inner.length;\r\n                }).distinctUntilChanged();\r\n            return this._lengthChanged;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"itemChanging\", {\r\n        get: function () {\r\n            if (!this._itemChanging)\r\n                this._itemChanging = this.itemChangingSubject.value.asObservable();\r\n            return this._itemChanging;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"itemChanged\", {\r\n        get: function () {\r\n            if (!this._itemChanged)\r\n                this._itemChanged = this.itemChangedSubject.value.asObservable();\r\n            return this._itemChanged;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"shouldReset\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return this.refcountSubscribers(this.listChanged.selectMany(function (x) { return !x ? Rx.Observable.empty() :\r\n                Rx.Observable.return(null); }), function (x) { return _this.resetSubCount += x; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ObservableList.prototype, \"changeTrackingEnabled\", {\r\n        get: function () {\r\n            return this.propertyChangeWatchers != null;\r\n        },\r\n        set: function (newValue) {\r\n            var _this = this;\r\n            if (this.propertyChangeWatchers != null && newValue)\r\n                return;\r\n            if (this.propertyChangeWatchers == null && !newValue)\r\n                return;\r\n            if (newValue) {\r\n                this.propertyChangeWatchers = {};\r\n                this.inner.forEach(function (x) { return _this.addItemToPropertyTracking(x); });\r\n            }\r\n            else {\r\n                this.clearAllPropertyChangeWatchers();\r\n                this.propertyChangeWatchers = null;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ObservableList.prototype.addRange = function (items) {\r\n        var _this = this;\r\n        if (items == null) {\r\n            Utils_1.throwError(\"items\");\r\n        }\r\n        var disp = this.isLengthAboveResetThreshold(items.length) ? this.suppressChangeNotifications() : Rx.Disposable.empty;\r\n        Utils_1.using(disp, function () {\r\n            // reset notification\r\n            if (!_this.areChangeNotificationsEnabled()) {\r\n                // this._inner.splice(this._inner.length, 0, items)\r\n                Array.prototype.push.apply(_this.inner, items);\r\n                if (_this.changeTrackingEnabled) {\r\n                    items.forEach(function (x) {\r\n                        _this.addItemToPropertyTracking(x);\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                var from = _this.inner.length; // need to capture this before \"inner\" gets modified \r\n                if (_this.beforeItemsAddedSubject.isValueCreated) {\r\n                    _this.beforeItemsAddedSubject.value.onNext({ items: items, from: from });\r\n                }\r\n                Array.prototype.push.apply(_this.inner, items);\r\n                if (_this.itemsAddedSubject.isValueCreated) {\r\n                    _this.itemsAddedSubject.value.onNext({ items: items, from: from });\r\n                }\r\n                if (_this.changeTrackingEnabled) {\r\n                    items.forEach(function (x) {\r\n                        _this.addItemToPropertyTracking(x);\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n    ObservableList.prototype.insertRange = function (index, items) {\r\n        var _this = this;\r\n        if (items == null) {\r\n            Utils_1.throwError(\"collection\");\r\n        }\r\n        if (index > this.inner.length) {\r\n            Utils_1.throwError(\"index\");\r\n        }\r\n        var disp = this.isLengthAboveResetThreshold(items.length) ? this.suppressChangeNotifications() : Rx.Disposable.empty;\r\n        Utils_1.using(disp, function () {\r\n            // reset notification\r\n            if (!_this.areChangeNotificationsEnabled()) {\r\n                // this._inner.splice(index, 0, items)\r\n                Array.prototype.splice.apply(_this.inner, [index, 0].concat(items));\r\n                if (_this.changeTrackingEnabled) {\r\n                    items.forEach(function (x) {\r\n                        _this.addItemToPropertyTracking(x);\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                if (_this.beforeItemsAddedSubject.isValueCreated) {\r\n                    items.forEach(function (x) {\r\n                        _this.beforeItemsAddedSubject.value.onNext({ items: items, from: index });\r\n                    });\r\n                }\r\n                Array.prototype.splice.apply(_this.inner, [index, 0].concat(items));\r\n                if (_this.itemsAddedSubject.isValueCreated) {\r\n                    _this.itemsAddedSubject.value.onNext({ items: items, from: index });\r\n                }\r\n                if (_this.changeTrackingEnabled) {\r\n                    items.forEach(function (x) {\r\n                        _this.addItemToPropertyTracking(x);\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n    ObservableList.prototype.removeAll = function (items) {\r\n        var _this = this;\r\n        if (items == null) {\r\n            Utils_1.throwError(\"items\");\r\n        }\r\n        var disp = this.isLengthAboveResetThreshold(items.length) ?\r\n            this.suppressChangeNotifications() : Rx.Disposable.empty;\r\n        Utils_1.using(disp, function () {\r\n            // NB: wx.If we don't do this, we'll break Collection<T>'s\r\n            // accounting of the length\r\n            items.forEach(function (x) { return _this.remove(x); });\r\n        });\r\n    };\r\n    ObservableList.prototype.removeRange = function (index, count) {\r\n        var _this = this;\r\n        var disp = this.isLengthAboveResetThreshold(count) ? this.suppressChangeNotifications() : Rx.Disposable.empty;\r\n        Utils_1.using(disp, function () {\r\n            // construct items\r\n            var items = _this.inner.slice(index, index + count);\r\n            // reset notification\r\n            if (!_this.areChangeNotificationsEnabled()) {\r\n                _this.inner.splice(index, count);\r\n                if (_this.changeTrackingEnabled) {\r\n                    items.forEach(function (x) {\r\n                        _this.removeItemFromPropertyTracking(x);\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                if (_this.beforeItemsRemovedSubject.isValueCreated) {\r\n                    items.forEach(function (x) {\r\n                        _this.beforeItemsRemovedSubject.value.onNext({ items: items, from: index });\r\n                    });\r\n                }\r\n                _this.inner.splice(index, count);\r\n                if (_this.changeTrackingEnabled) {\r\n                    items.forEach(function (x) {\r\n                        _this.removeItemFromPropertyTracking(x);\r\n                    });\r\n                }\r\n                if (_this.itemsRemovedSubject.isValueCreated) {\r\n                    items.forEach(function (x) {\r\n                        _this.itemsRemovedSubject.value.onNext({ items: items, from: index });\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    };\r\n    ObservableList.prototype.toArray = function () {\r\n        return this.inner;\r\n    };\r\n    ObservableList.prototype.reset = function () {\r\n        this.publishResetNotification();\r\n    };\r\n    ObservableList.prototype.add = function (item) {\r\n        this.insertItem(this.inner.length, item);\r\n    };\r\n    ObservableList.prototype.clear = function () {\r\n        this.clearItems();\r\n    };\r\n    ObservableList.prototype.contains = function (item) {\r\n        return this.inner.indexOf(item) !== -1;\r\n    };\r\n    ObservableList.prototype.remove = function (item) {\r\n        var index = this.inner.indexOf(item);\r\n        if (index === -1)\r\n            return false;\r\n        this.removeItem(index);\r\n        return true;\r\n    };\r\n    ObservableList.prototype.indexOf = function (item) {\r\n        return this.inner.indexOf(item);\r\n    };\r\n    ObservableList.prototype.insert = function (index, item) {\r\n        this.insertItem(index, item);\r\n    };\r\n    ObservableList.prototype.removeAt = function (index) {\r\n        this.removeItem(index);\r\n    };\r\n    ObservableList.prototype.move = function (oldIndex, newIndex) {\r\n        this.moveItem(oldIndex, newIndex);\r\n    };\r\n    ObservableList.prototype.project = function () {\r\n        var args = Utils_1.args2Array(arguments);\r\n        var filter = args.shift();\r\n        if (filter != null && Utils_1.isRxObservable(filter)) {\r\n            return new ObservableListProjection(this, undefined, undefined, undefined, filter, args.shift());\r\n        }\r\n        var orderer = args.shift();\r\n        if (orderer != null && Utils_1.isRxObservable(orderer)) {\r\n            return new ObservableListProjection(this, filter, undefined, undefined, orderer, args.shift());\r\n        }\r\n        var selector = args.shift();\r\n        if (selector != null && Utils_1.isRxObservable(selector)) {\r\n            return new ObservableListProjection(this, filter, orderer, undefined, selector, args.shift());\r\n        }\r\n        return new ObservableListProjection(this, filter, orderer, selector, args.shift(), args.shift());\r\n    };\r\n    ObservableList.prototype.suppressChangeNotifications = function () {\r\n        var _this = this;\r\n        this.changeNotificationsSuppressed++;\r\n        if (!this.hasWhinedAboutNoResetSub && this.resetSubCount === 0 && !Utils_1.isInUnitTest()) {\r\n            log.info(\"suppressChangeNotifications was called (perhaps via addRange), yet you do not have a subscription to shouldReset. This probably isn't what you want, as itemsAdded and friends will appear to 'miss' items\");\r\n            this.hasWhinedAboutNoResetSub = true;\r\n        }\r\n        return Rx.Disposable.create(function () {\r\n            _this.changeNotificationsSuppressed--;\r\n            if (_this.changeNotificationsSuppressed === 0) {\r\n                _this.publishBeforeResetNotification();\r\n                _this.publishResetNotification();\r\n            }\r\n        });\r\n    };\r\n    ObservableList.prototype.get = function (index) {\r\n        return this.inner[index];\r\n    };\r\n    ObservableList.prototype.set = function (index, item) {\r\n        if (!this.areChangeNotificationsEnabled()) {\r\n            if (this.changeTrackingEnabled) {\r\n                this.removeItemFromPropertyTracking(this.inner[index]);\r\n                this.addItemToPropertyTracking(item);\r\n            }\r\n            this.inner[index] = item;\r\n            return;\r\n        }\r\n        if (this.beforeItemReplacedSubject.isValueCreated)\r\n            this.beforeItemReplacedSubject.value.onNext({ from: index, items: [item] });\r\n        if (this.changeTrackingEnabled) {\r\n            this.removeItemFromPropertyTracking(this.inner[index]);\r\n            this.addItemToPropertyTracking(item);\r\n        }\r\n        this.inner[index] = item;\r\n        if (this.itemReplacedSubject.isValueCreated)\r\n            this.itemReplacedSubject.value.onNext({ from: index, items: [item] });\r\n    };\r\n    ObservableList.prototype.sort = function (comparison) {\r\n        this.publishBeforeResetNotification();\r\n        this.inner.sort(comparison);\r\n        this.publishResetNotification();\r\n    };\r\n    ObservableList.prototype.forEach = function (callbackfn, thisArg) {\r\n        this.inner.forEach(callbackfn, thisArg);\r\n    };\r\n    ObservableList.prototype.map = function (callbackfn, thisArg) {\r\n        return this.inner.map(callbackfn, thisArg);\r\n    };\r\n    ObservableList.prototype.filter = function (callbackfn, thisArg) {\r\n        return this.inner.filter(callbackfn, thisArg);\r\n    };\r\n    ObservableList.prototype.some = function (callbackfn, thisArg) {\r\n        return this.inner.some(callbackfn, thisArg);\r\n    };\r\n    ObservableList.prototype.every = function (callbackfn, thisArg) {\r\n        return this.inner.every(callbackfn, thisArg);\r\n    };\r\n    ObservableList.prototype.setupRx = function (initialContents, resetChangeThreshold, scheduler) {\r\n        if (resetChangeThreshold === void 0) { resetChangeThreshold = 0.3; }\r\n        if (scheduler === void 0) { scheduler = null; }\r\n        scheduler = scheduler || Injector_1.injector.get(res.app).mainThreadScheduler;\r\n        this.resetChangeThreshold = resetChangeThreshold;\r\n        if (this.inner === undefined)\r\n            this.inner = new Array();\r\n        this.beforeItemsAddedSubject = new Lazy_1.default(function () { return new Rx.Subject(); });\r\n        this.itemsAddedSubject = new Lazy_1.default(function () { return new Rx.Subject(); });\r\n        this.beforeItemsRemovedSubject = new Lazy_1.default(function () { return new Rx.Subject(); });\r\n        this.itemsRemovedSubject = new Lazy_1.default(function () { return new Rx.Subject(); });\r\n        this.beforeItemReplacedSubject = new Lazy_1.default(function () { return new Rx.Subject(); });\r\n        this.itemReplacedSubject = new Lazy_1.default(function () { return new Rx.Subject(); });\r\n        this.resetSubject = new Rx.Subject();\r\n        this.beforeResetSubject = new Rx.Subject();\r\n        this.itemChangingSubject = new Lazy_1.default(function () {\r\n            return ScheduledSubject_1.createScheduledSubject(scheduler);\r\n        });\r\n        this.itemChangedSubject = new Lazy_1.default(function () {\r\n            return ScheduledSubject_1.createScheduledSubject(scheduler);\r\n        });\r\n        this.beforeItemsMovedSubject = new Lazy_1.default(function () { return new Rx.Subject(); });\r\n        this.itemsMovedSubject = new Lazy_1.default(function () { return new Rx.Subject(); });\r\n        this.listChanged = Rx.Observable.merge(this.itemsAdded.select(function (x) { return false; }), this.itemsRemoved.select(function (x) { return false; }), this.itemReplaced.select(function (x) { return false; }), this.itemsMoved.select(function (x) { return false; }), this.resetSubject.select(function (x) { return true; }))\r\n            .publish()\r\n            .refCount();\r\n        this.listChanging = Rx.Observable.merge(this.beforeItemsAdded.select(function (x) { return false; }), this.beforeItemsRemoved.select(function (x) { return false; }), this.beforeItemReplaced.select(function (x) { return false; }), this.beforeItemsMoved.select(function (x) { return false; }), this.beforeResetSubject.select(function (x) { return true; }))\r\n            .publish()\r\n            .refCount();\r\n        if (initialContents) {\r\n            Array.prototype.splice.apply(this.inner, [0, 0].concat(initialContents));\r\n        }\r\n        this.length = this.lengthChanged.toProperty(this.inner.length);\r\n        this.isEmpty = this.lengthChanged\r\n            .select(function (x) { return (x === 0); })\r\n            .toProperty(this.inner.length === 0);\r\n    };\r\n    ObservableList.prototype.areChangeNotificationsEnabled = function () {\r\n        return this.changeNotificationsSuppressed === 0;\r\n    };\r\n    ObservableList.prototype.insertItem = function (index, item) {\r\n        if (!this.areChangeNotificationsEnabled()) {\r\n            this.inner.splice(index, 0, item);\r\n            if (this.changeTrackingEnabled)\r\n                this.addItemToPropertyTracking(item);\r\n            return;\r\n        }\r\n        if (this.beforeItemsAddedSubject.isValueCreated)\r\n            this.beforeItemsAddedSubject.value.onNext({ items: [item], from: index });\r\n        this.inner.splice(index, 0, item);\r\n        if (this.itemsAddedSubject.isValueCreated)\r\n            this.itemsAddedSubject.value.onNext({ items: [item], from: index });\r\n        if (this.changeTrackingEnabled)\r\n            this.addItemToPropertyTracking(item);\r\n    };\r\n    ObservableList.prototype.removeItem = function (index) {\r\n        var item = this.inner[index];\r\n        if (!this.areChangeNotificationsEnabled()) {\r\n            this.inner.splice(index, 1);\r\n            if (this.changeTrackingEnabled)\r\n                this.removeItemFromPropertyTracking(item);\r\n            return;\r\n        }\r\n        if (this.beforeItemsRemovedSubject.isValueCreated)\r\n            this.beforeItemsRemovedSubject.value.onNext({ items: [item], from: index });\r\n        this.inner.splice(index, 1);\r\n        if (this.itemsRemovedSubject.isValueCreated)\r\n            this.itemsRemovedSubject.value.onNext({ items: [item], from: index });\r\n        if (this.changeTrackingEnabled)\r\n            this.removeItemFromPropertyTracking(item);\r\n    };\r\n    ObservableList.prototype.moveItem = function (oldIndex, newIndex) {\r\n        var item = this.inner[oldIndex];\r\n        if (!this.areChangeNotificationsEnabled()) {\r\n            this.inner.splice(oldIndex, 1);\r\n            this.inner.splice(newIndex, 0, item);\r\n            return;\r\n        }\r\n        var mi = { items: [item], from: oldIndex, to: newIndex };\r\n        if (this.beforeItemsMovedSubject.isValueCreated)\r\n            this.beforeItemsMovedSubject.value.onNext(mi);\r\n        this.inner.splice(oldIndex, 1);\r\n        this.inner.splice(newIndex, 0, item);\r\n        if (this.itemsMovedSubject.isValueCreated)\r\n            this.itemsMovedSubject.value.onNext(mi);\r\n    };\r\n    ObservableList.prototype.clearItems = function () {\r\n        if (!this.areChangeNotificationsEnabled()) {\r\n            this.inner.length = 0; // see http://stackoverflow.com/a/1232046/88513\r\n            if (this.changeTrackingEnabled)\r\n                this.clearAllPropertyChangeWatchers();\r\n            return;\r\n        }\r\n        this.publishBeforeResetNotification();\r\n        this.inner.length = 0; // see http://stackoverflow.com/a/1232046/88513\r\n        this.publishResetNotification();\r\n        if (this.changeTrackingEnabled)\r\n            this.clearAllPropertyChangeWatchers();\r\n    };\r\n    ObservableList.prototype.addItemToPropertyTracking = function (toTrack) {\r\n        var rcd = this.propertyChangeWatchers[Oid_1.getOid(toTrack)];\r\n        var self = this;\r\n        if (rcd) {\r\n            rcd.addRef();\r\n            return;\r\n        }\r\n        var changing = Utils_1.observeObject(toTrack, this.app.defaultExceptionHandler, true)\r\n            .select(function (i) { return new Events_1.PropertyChangedEventArgs(toTrack, i.propertyName); });\r\n        var changed = Utils_1.observeObject(toTrack, this.app.defaultExceptionHandler, false)\r\n            .select(function (i) { return new Events_1.PropertyChangedEventArgs(toTrack, i.propertyName); });\r\n        var disp = new Rx.CompositeDisposable(changing.where(function (_) { return self.areChangeNotificationsEnabled(); }).subscribe(function (x) { return self.itemChangingSubject.value.onNext(x); }), changed.where(function (_) { return self.areChangeNotificationsEnabled(); }).subscribe(function (x) { return self.itemChangedSubject.value.onNext(x); }));\r\n        this.propertyChangeWatchers[Oid_1.getOid(toTrack)] = new RefCountDisposeWrapper_1.default(Rx.Disposable.create(function () {\r\n            disp.dispose();\r\n            delete self.propertyChangeWatchers[Oid_1.getOid(toTrack)];\r\n        }));\r\n    };\r\n    ObservableList.prototype.removeItemFromPropertyTracking = function (toUntrack) {\r\n        var rcd = this.propertyChangeWatchers[Oid_1.getOid(toUntrack)];\r\n        if (rcd) {\r\n            rcd.release();\r\n        }\r\n    };\r\n    ObservableList.prototype.clearAllPropertyChangeWatchers = function () {\r\n        var _this = this;\r\n        if (this.propertyChangeWatchers != null) {\r\n            Object.keys(this.propertyChangeWatchers).forEach(function (x) {\r\n                _this.propertyChangeWatchers[x].release();\r\n            });\r\n            this.propertyChangeWatchers = null;\r\n        }\r\n    };\r\n    ObservableList.prototype.refcountSubscribers = function (input, block) {\r\n        return Rx.Observable.create(function (subj) {\r\n            block(1);\r\n            return new Rx.CompositeDisposable(input.subscribe(subj), Rx.Disposable.create(function () { return block(-1); }));\r\n        });\r\n    };\r\n    ObservableList.prototype.publishResetNotification = function () {\r\n        this.resetSubject.onNext(true);\r\n    };\r\n    ObservableList.prototype.publishBeforeResetNotification = function () {\r\n        this.beforeResetSubject.onNext(true);\r\n    };\r\n    ObservableList.prototype.isLengthAboveResetThreshold = function (toChangeLength) {\r\n        return toChangeLength / this.inner.length > this.resetChangeThreshold && toChangeLength > 10;\r\n    };\r\n    ObservableList = __decorate([\r\n        Reflect_1.Implements(IID_1.default.IObservableList),\r\n        Reflect_1.Implements(IID_1.default.IDisposable), \r\n        __metadata('design:paramtypes', [Array, Number, Object])\r\n    ], ObservableList);\r\n    return ObservableList;\r\n})();\r\nexports.ObservableList = ObservableList;\r\nvar ObservableListProjection = (function (_super) {\r\n    __extends(ObservableListProjection, _super);\r\n    function ObservableListProjection(source, filter, orderer, selector, refreshTrigger, scheduler) {\r\n        _super.call(this);\r\n        ////////////////////\r\n        // wx.Implementation\r\n        this.readonlyExceptionMessage = \"Derived collections cannot be modified.\";\r\n        // This list maps indices in this collection to their corresponding indices in the source collection.\r\n        this.indexToSourceIndexMap = [];\r\n        this.sourceCopy = [];\r\n        this.disp = new Rx.CompositeDisposable();\r\n        this.source = source;\r\n        this.selector = selector || (function (x) { return x; });\r\n        this._filter = filter;\r\n        this.orderer = orderer;\r\n        this.refreshTrigger = refreshTrigger;\r\n        this.scheduler = scheduler || Rx.Scheduler.immediate;\r\n        this.addAllItemsFromSourceCollection();\r\n        this.wireUpChangeNotifications();\r\n    }\r\n    Object.defineProperty(ObservableListProjection.prototype, \"isReadOnly\", {\r\n        //////////////////////////////////\r\n        // ObservableList overrides to enforce readonly contract\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ObservableListProjection.prototype.set = function (index, item) {\r\n        Utils_1.throwError(this.readonlyExceptionMessage);\r\n    };\r\n    ObservableListProjection.prototype.addRange = function (items) {\r\n        Utils_1.throwError(this.readonlyExceptionMessage);\r\n    };\r\n    ObservableListProjection.prototype.insertRange = function (index, items) {\r\n        Utils_1.throwError(this.readonlyExceptionMessage);\r\n    };\r\n    ObservableListProjection.prototype.removeAll = function (items) {\r\n        Utils_1.throwError(this.readonlyExceptionMessage);\r\n    };\r\n    ObservableListProjection.prototype.removeRange = function (index, count) {\r\n        Utils_1.throwError(this.readonlyExceptionMessage);\r\n    };\r\n    ObservableListProjection.prototype.add = function (item) {\r\n        Utils_1.throwError(this.readonlyExceptionMessage);\r\n    };\r\n    ObservableListProjection.prototype.clear = function () {\r\n        Utils_1.throwError(this.readonlyExceptionMessage);\r\n    };\r\n    ObservableListProjection.prototype.remove = function (item) {\r\n        Utils_1.throwError(this.readonlyExceptionMessage);\r\n        return undefined;\r\n    };\r\n    ObservableListProjection.prototype.insert = function (index, item) {\r\n        Utils_1.throwError(this.readonlyExceptionMessage);\r\n    };\r\n    ObservableListProjection.prototype.removeAt = function (index) {\r\n        Utils_1.throwError(this.readonlyExceptionMessage);\r\n    };\r\n    ObservableListProjection.prototype.move = function (oldIndex, newIndex) {\r\n        Utils_1.throwError(this.readonlyExceptionMessage);\r\n    };\r\n    ObservableListProjection.prototype.sort = function (comparison) {\r\n        Utils_1.throwError(this.readonlyExceptionMessage);\r\n    };\r\n    ObservableListProjection.prototype.reset = function () {\r\n        var _this = this;\r\n        Utils_1.using(_super.prototype.suppressChangeNotifications.call(this), function () {\r\n            _super.prototype.clear.call(_this);\r\n            _this.addAllItemsFromSourceCollection();\r\n        });\r\n    };\r\n    //////////////////////////////////\r\n    // wx.IDisposable implementation\r\n    ObservableListProjection.prototype.dispose = function () {\r\n        this.disp.dispose();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ObservableListProjection.prototype.referenceEquals = function (a, b) {\r\n        return Oid_1.getOid(a) === Oid_1.getOid(b);\r\n    };\r\n    ObservableListProjection.prototype.refresh = function () {\r\n        var length = this.sourceCopy.length;\r\n        for (var i = 0; i < length; i++) {\r\n            this.onItemChanged(this.sourceCopy[i]);\r\n        }\r\n    };\r\n    ObservableListProjection.prototype.wireUpChangeNotifications = function () {\r\n        var _this = this;\r\n        this.disp.add(this.source.itemsAdded.observeOn(this.scheduler).subscribe(function (e) {\r\n            _this.onItemsAdded(e);\r\n        }));\r\n        this.disp.add(this.source.itemsRemoved.observeOn(this.scheduler).subscribe(function (e) {\r\n            _this.onItemsRemoved(e);\r\n        }));\r\n        this.disp.add(this.source.itemsMoved.observeOn(this.scheduler).subscribe(function (e) {\r\n            _this.onItemsMoved(e);\r\n        }));\r\n        this.disp.add(this.source.itemReplaced.observeOn(this.scheduler).subscribe(function (e) {\r\n            _this.onItemsReplaced(e);\r\n        }));\r\n        this.disp.add(this.source.shouldReset.observeOn(this.scheduler).subscribe(function (e) {\r\n            _this.reset();\r\n        }));\r\n        this.disp.add(this.source.itemChanged.select(function (x) { return x.sender; }).observeOn(this.scheduler).subscribe(function (x) { return _this.onItemChanged(x); }));\r\n        if (this.refreshTrigger != null) {\r\n            this.disp.add(this.refreshTrigger.observeOn(this.scheduler).subscribe(function (_) { return _this.refresh(); }));\r\n        }\r\n    };\r\n    ObservableListProjection.prototype.onItemsAdded = function (e) {\r\n        this.shiftIndicesAtOrOverThreshold(e.from, e.items.length);\r\n        for (var i = 0; i < e.items.length; i++) {\r\n            var sourceItem = e.items[i];\r\n            this.sourceCopy.splice(e.from + i, 0, sourceItem);\r\n            if (this._filter && !this._filter(sourceItem)) {\r\n                continue;\r\n            }\r\n            var destinationItem = this.selector(sourceItem);\r\n            this.nsertAndMap(e.from + i, destinationItem);\r\n        }\r\n    };\r\n    ObservableListProjection.prototype.onItemsRemoved = function (e) {\r\n        this.sourceCopy.splice(e.from, e.items.length);\r\n        for (var i = 0; i < e.items.length; i++) {\r\n            var destinationIndex = this.getIndexFromSourceIndex(e.from + i);\r\n            if (destinationIndex !== -1) {\r\n                this.emoveAt(destinationIndex);\r\n            }\r\n        }\r\n        var removedCount = e.items.length;\r\n        this.shiftIndicesAtOrOverThreshold(e.from + removedCount, -removedCount);\r\n    };\r\n    ObservableListProjection.prototype.onItemsMoved = function (e) {\r\n        if (e.items.length > 1) {\r\n            Utils_1.throwError(\"Derived collections doesn't support multi-item moves\");\r\n        }\r\n        if (e.from === e.to) {\r\n            return;\r\n        }\r\n        var oldSourceIndex = e.from;\r\n        var newSourceIndex = e.to;\r\n        this.sourceCopy.splice(oldSourceIndex, 1);\r\n        this.sourceCopy.splice(newSourceIndex, 0, e.items[0]);\r\n        var currentDestinationIndex = this.getIndexFromSourceIndex(oldSourceIndex);\r\n        this.moveSourceIndexInMap(oldSourceIndex, newSourceIndex);\r\n        if (currentDestinationIndex === -1) {\r\n            return;\r\n        }\r\n        if (this.orderer == null) {\r\n            // We mirror the order of the source collection so we'll perform the same move operation\r\n            // as the source. As is the case with when we have an orderer we don't test whether or not\r\n            // the item should be included or not here. wx.If it has been included at some point it'll\r\n            // stay included until onItemChanged picks up a change which filters it.\r\n            var newDestinationIndex = ObservableListProjection.newPositionForExistingItem2(this.indexToSourceIndexMap, newSourceIndex, currentDestinationIndex);\r\n            if (newDestinationIndex !== currentDestinationIndex) {\r\n                this.indexToSourceIndexMap.splice(currentDestinationIndex, 1);\r\n                this.indexToSourceIndexMap.splice(newDestinationIndex, 0, newSourceIndex);\r\n                _super.prototype.move.call(this, currentDestinationIndex, newDestinationIndex);\r\n            }\r\n            else {\r\n                this.indexToSourceIndexMap[currentDestinationIndex] = newSourceIndex;\r\n            }\r\n        }\r\n        else {\r\n            // TODO: Conceptually wx.I feel like we shouldn't concern ourselves with ordering when we \r\n            // receive a Move notification. wx.If it affects ordering it should be picked up by the\r\n            // onItemChange and resorted there instead.\r\n            this.indexToSourceIndexMap[currentDestinationIndex] = newSourceIndex;\r\n        }\r\n    };\r\n    ObservableListProjection.prototype.onItemsReplaced = function (e) {\r\n        for (var i = 0; i < e.items.length; i++) {\r\n            var sourceItem = e.items[i];\r\n            this.sourceCopy[e.from + i] = sourceItem;\r\n            this.onItemChanged(sourceItem);\r\n        }\r\n    };\r\n    ObservableListProjection.prototype.onItemChanged = function (changedItem) {\r\n        var _this = this;\r\n        var sourceIndices = this.indexOfAll(this.sourceCopy, changedItem);\r\n        var shouldBeIncluded = !this._filter || this._filter(changedItem);\r\n        sourceIndices.forEach(function (sourceIndex) {\r\n            var currentDestinationIndex = _this.getIndexFromSourceIndex(sourceIndex);\r\n            var isIncluded = currentDestinationIndex >= 0;\r\n            if (isIncluded && !shouldBeIncluded) {\r\n                _this.emoveAt(currentDestinationIndex);\r\n            }\r\n            else if (!isIncluded && shouldBeIncluded) {\r\n                _this.nsertAndMap(sourceIndex, _this.selector(changedItem));\r\n            }\r\n            else if (isIncluded && shouldBeIncluded) {\r\n                // The item is already included and it should stay there but it's possible that the change that\r\n                // caused this event affects the ordering. This gets a little tricky so let's be verbose.\r\n                var newItem = _this.selector(changedItem);\r\n                if (_this.orderer == null) {\r\n                    // We don't have an orderer so we're currently using the source collection index for sorting \r\n                    // meaning that no item change will affect ordering. Look at our current item and see if it's\r\n                    // the exact (reference-wise) same object. wx.If it is then we're done, if it's not (for example \r\n                    // if it's an integer) we'll issue a replace event so that subscribers get the new value.\r\n                    if (!_this.referenceEquals(newItem, _this.get(currentDestinationIndex))) {\r\n                        _super.prototype.set.call(_this, currentDestinationIndex, newItem);\r\n                    }\r\n                }\r\n                else {\r\n                    // Don't be tempted to just use the orderer to compare the new item with the previous since\r\n                    // they'll almost certainly be equal (for reference types). We need to test whether or not the\r\n                    // new item can stay in the same position that the current item is in without comparing them.\r\n                    if (_this.canItemStayAtPosition(newItem, currentDestinationIndex)) {\r\n                        // The new item should be in the same position as the current but there's no need to signal\r\n                        // that in case they are the same object.\r\n                        if (!_this.referenceEquals(newItem, _this.get(currentDestinationIndex))) {\r\n                            _super.prototype.set.call(_this, currentDestinationIndex, newItem);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // The change is forcing us to reorder. We'll use a move operation if the item hasn't \r\n                        // changed (ie it's the same object) and we'll implement it as a remove and add if the\r\n                        // object has changed (ie the selector is not an identity function).\r\n                        if (_this.referenceEquals(newItem, _this.get(currentDestinationIndex))) {\r\n                            var newDestinationIndex = _this.newPositionForExistingItem(sourceIndex, currentDestinationIndex, newItem);\r\n                            // Debug.Assert(newDestinationIndex != currentDestinationIndex, \"This can't be, canItemStayAtPosition said it this couldn't happen\");\r\n                            _this.indexToSourceIndexMap.splice(currentDestinationIndex, 1);\r\n                            _this.indexToSourceIndexMap.splice(newDestinationIndex, 0, sourceIndex);\r\n                            _super.prototype.move.call(_this, currentDestinationIndex, newDestinationIndex);\r\n                        }\r\n                        else {\r\n                            _this.emoveAt(currentDestinationIndex);\r\n                            _this.nsertAndMap(sourceIndex, newItem);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /// <summary>\r\n    /// Gets a value indicating whether or not the item fits (sort-wise) at the provided index. The determination\r\n    /// is made by checking whether or not it's considered larger than or equal to the preceeding item and if\r\n    /// it's less than or equal to the succeeding item.\r\n    /// </summary>\r\n    ObservableListProjection.prototype.canItemStayAtPosition = function (item, currentIndex) {\r\n        var hasPrecedingItem = currentIndex > 0;\r\n        if (hasPrecedingItem) {\r\n            var isGreaterThanOrEqualToPrecedingItem = this.orderer(item, this[currentIndex - 1]) >= 0;\r\n            if (!isGreaterThanOrEqualToPrecedingItem) {\r\n                return false;\r\n            }\r\n        }\r\n        var hasSucceedingItem = currentIndex < this.length() - 1;\r\n        if (hasSucceedingItem) {\r\n            var isLessThanOrEqualToSucceedingItem = this.orderer(item, this[currentIndex + 1]) <= 0;\r\n            if (!isLessThanOrEqualToSucceedingItem) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /// <summary>\r\n    /// Gets the index of the dervived item super. on it's originating element index in the source collection.\r\n    /// </summary>\r\n    ObservableListProjection.prototype.getIndexFromSourceIndex = function (sourceIndex) {\r\n        return this.indexToSourceIndexMap.indexOf(sourceIndex);\r\n    };\r\n    /// <summary>\r\n    /// Returns one or more positions in the source collection where the given item is found super. on the\r\n    /// provided equality comparer.\r\n    /// </summary>\r\n    ObservableListProjection.prototype.indexOfAll = function (source, item) {\r\n        var _this = this;\r\n        var indices = [];\r\n        var sourceIndex = 0;\r\n        source.forEach(function (x) {\r\n            if (_this.referenceEquals(x, item)) {\r\n                indices.push(sourceIndex);\r\n            }\r\n            sourceIndex++;\r\n        });\r\n        return indices;\r\n    };\r\n    /// <summary>\r\n    /// wx.Increases (or decreases depending on move direction) all source indices between the source and destination\r\n    /// move indices.\r\n    /// </summary>\r\n    ObservableListProjection.prototype.moveSourceIndexInMap = function (oldSourceIndex, newSourceIndex) {\r\n        if (newSourceIndex > oldSourceIndex) {\r\n            // wx.Item is moving towards the end of the list, everything between its current position and its \r\n            // new position needs to be shifted down one index\r\n            this.shiftSourceIndicesInRange(oldSourceIndex + 1, newSourceIndex + 1, -1);\r\n        }\r\n        else {\r\n            // wx.Item is moving towards the front of the list, everything between its current position and its\r\n            // new position needs to be shifted up one index\r\n            this.shiftSourceIndicesInRange(newSourceIndex, oldSourceIndex, 1);\r\n        }\r\n    };\r\n    /// <summary>\r\n    /// wx.Increases (or decreases) all source indices equal to or higher than the threshold. Represents an\r\n    /// insert or remove of one or more items in the source list thus causing all subsequent items to shift\r\n    /// up or down.\r\n    /// </summary>\r\n    ObservableListProjection.prototype.shiftIndicesAtOrOverThreshold = function (threshold, value) {\r\n        for (var i = 0; i < this.indexToSourceIndexMap.length; i++) {\r\n            if (this.indexToSourceIndexMap[i] >= threshold) {\r\n                this.indexToSourceIndexMap[i] += value;\r\n            }\r\n        }\r\n    };\r\n    /// <summary>\r\n    /// wx.Increases (or decreases) all source indices within the range (lower inclusive, upper exclusive). \r\n    /// </summary>\r\n    ObservableListProjection.prototype.shiftSourceIndicesInRange = function (rangeStart, rangeStop, value) {\r\n        for (var i = 0; i < this.indexToSourceIndexMap.length; i++) {\r\n            var sourceIndex = this.indexToSourceIndexMap[i];\r\n            if (sourceIndex >= rangeStart && sourceIndex < rangeStop) {\r\n                this.indexToSourceIndexMap[i] += value;\r\n            }\r\n        }\r\n    };\r\n    ObservableListProjection.prototype.addAllItemsFromSourceCollection = function () {\r\n        var _this = this;\r\n        // Debug.Assert(sourceCopy.length == 0, \"Expected source copy to be empty\");\r\n        var sourceIndex = 0;\r\n        this.source.forEach(function (sourceItem) {\r\n            _this.sourceCopy.push(sourceItem);\r\n            if (!_this._filter || _this._filter(sourceItem)) {\r\n                var destinationItem = _this.selector(sourceItem);\r\n                _this.nsertAndMap(sourceIndex, destinationItem);\r\n            }\r\n            sourceIndex++;\r\n        });\r\n    };\r\n    ObservableListProjection.prototype.lear = function () {\r\n        this.indexToSourceIndexMap = [];\r\n        this.sourceCopy = [];\r\n        _super.prototype.clear.call(this);\r\n    };\r\n    ObservableListProjection.prototype.nsertAndMap = function (sourceIndex, value) {\r\n        var destinationIndex = this.positionForNewItem(sourceIndex, value);\r\n        this.indexToSourceIndexMap.splice(destinationIndex, 0, sourceIndex);\r\n        _super.prototype.insert.call(this, destinationIndex, value);\r\n    };\r\n    ObservableListProjection.prototype.emoveAt = function (destinationIndex) {\r\n        this.indexToSourceIndexMap.splice(destinationIndex, 1);\r\n        _super.prototype.removeAt.call(this, destinationIndex);\r\n    };\r\n    ObservableListProjection.prototype.positionForNewItem = function (sourceIndex, value) {\r\n        // wx.If we haven't got an orderer we'll simply match our items to that of the source collection.\r\n        return this.orderer == null\r\n            ? ObservableListProjection.positionForNewItemArray(this.indexToSourceIndexMap, sourceIndex, ObservableListProjection.defaultOrderer)\r\n            : ObservableListProjection.positionForNewItemArray2(this.inner, 0, this.inner.length, value, this.orderer);\r\n    };\r\n    ObservableListProjection.positionForNewItemArray = function (array, item, orderer) {\r\n        return ObservableListProjection.positionForNewItemArray2(array, 0, array.length, item, orderer);\r\n    };\r\n    ObservableListProjection.positionForNewItemArray2 = function (array, index, count, item, orderer) {\r\n        // Debug.Assert(index >= 0);\r\n        // Debug.Assert(count >= 0);\r\n        // Debug.Assert((list.length - index) >= count);\r\n        if (count === 0) {\r\n            return index;\r\n        }\r\n        if (count === 1) {\r\n            return orderer(array[index], item) >= 0 ? index : index + 1;\r\n        }\r\n        if (orderer(array[index], item) >= 1)\r\n            return index;\r\n        var low = index, hi = index + count - 1;\r\n        var cmp;\r\n        while (low <= hi) {\r\n            var mid = Math.floor(low + (hi - low) / 2);\r\n            cmp = orderer(array[mid], item);\r\n            if (cmp === 0) {\r\n                return mid;\r\n            }\r\n            if (cmp < 0) {\r\n                low = mid + 1;\r\n            }\r\n            else {\r\n                hi = mid - 1;\r\n            }\r\n        }\r\n        return low;\r\n    };\r\n    /// <summary>\r\n    /// Calculates a new destination for an updated item that's already in the list.\r\n    /// </summary>\r\n    ObservableListProjection.prototype.newPositionForExistingItem = function (sourceIndex, currentIndex, item) {\r\n        // wx.If we haven't got an orderer we'll simply match our items to that of the source collection.\r\n        return this.orderer == null\r\n            ? ObservableListProjection.newPositionForExistingItem2(this.indexToSourceIndexMap, sourceIndex, currentIndex)\r\n            : ObservableListProjection.newPositionForExistingItem2(this.inner, item, currentIndex, this.orderer);\r\n    };\r\n    /// <summary>\r\n    /// Calculates a new destination for an updated item that's already in the list.\r\n    /// </summary>\r\n    ObservableListProjection.newPositionForExistingItem2 = function (array, item, currentIndex, orderer) {\r\n        // Since the item changed is most likely a value type we must refrain from ever comparing it to itself.\r\n        // We do this by figuring out how the updated item compares to its neighbors. By knowing if it's\r\n        // less than or greater than either one of its neighbors we can limit the search range to a range exlusive\r\n        // of the current index.\r\n        // Debug.Assert(list.length > 0);\r\n        if (array.length === 1) {\r\n            return 0;\r\n        }\r\n        var precedingIndex = currentIndex - 1;\r\n        var succeedingIndex = currentIndex + 1;\r\n        // The item on the preceding or succeeding index relative to currentIndex.\r\n        var comparand = array[precedingIndex >= 0 ? precedingIndex : succeedingIndex];\r\n        if (orderer == null) {\r\n            orderer = ObservableListProjection.defaultOrderer;\r\n        }\r\n        // Compare that to the (potentially) new value.\r\n        var cmp = orderer(item, comparand);\r\n        var min = 0;\r\n        var max = array.length;\r\n        if (cmp === 0) {\r\n            // The new value is equal to the preceding or succeeding item, it may stay at the current position\r\n            return currentIndex;\r\n        }\r\n        else if (cmp > 0) {\r\n            // The new value is greater than the preceding or succeeding item, limit the search to indices after\r\n            // the succeeding item.\r\n            min = succeedingIndex;\r\n        }\r\n        else {\r\n            // The new value is less than the preceding or succeeding item, limit the search to indices before\r\n            // the preceding item.\r\n            max = precedingIndex;\r\n        }\r\n        // Bail if the search range is invalid.\r\n        if (min === array.length || max < 0) {\r\n            return currentIndex;\r\n        }\r\n        var ix = ObservableListProjection.positionForNewItemArray2(array, min, max - min, item, orderer);\r\n        // wx.If the item moves 'forward' in the collection we have to account for the index where\r\n        // the item currently resides getting removed first.\r\n        return ix >= currentIndex ? ix - 1 : ix;\r\n    };\r\n    ObservableListProjection.defaultOrderer = function (a, b) {\r\n        var result;\r\n        if (a == null && b == null)\r\n            result = 0;\r\n        else if (a == null)\r\n            result = -1;\r\n        else if (b == null)\r\n            result = 1;\r\n        else\r\n            result = a - b;\r\n        return result;\r\n    };\r\n    return ObservableListProjection;\r\n})(ObservableList);\r\n/**\r\n* Creates a new observable list with optional default contents\r\n* @param {Array<T>} initialContents The initial contents of the list\r\n* @param {number = 0.3} resetChangeThreshold\r\n*/\r\nfunction list(initialContents, resetChangeThreshold, scheduler) {\r\n    if (resetChangeThreshold === void 0) { resetChangeThreshold = 0.3; }\r\n    if (scheduler === void 0) { scheduler = null; }\r\n    return new ObservableList(initialContents, resetChangeThreshold, scheduler);\r\n}\r\nexports.list = list;\r\n/**\r\n* Determines if target is an instance of a IObservableList\r\n* @param {any} target\r\n*/\r\nfunction isList(target) {\r\n    if (target == null)\r\n        return false;\r\n    return target instanceof ObservableList;\r\n}\r\nexports.isList = isList;\r\n//# sourceMappingURL=List.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Collections/List.js\n ** module id = 29\n ** module chunks = 0\n **/","\"use strict\";\r\n/**\r\n* .Net's Lazy<T>\r\n* @class\r\n*/\r\nvar Lazy = (function () {\r\n    function Lazy(createValue) {\r\n        this.createValue = createValue;\r\n    }\r\n    Object.defineProperty(Lazy.prototype, \"value\", {\r\n        get: function () {\r\n            if (!this.isValueCreated) {\r\n                this.createdValue = this.createValue();\r\n                this.isValueCreated = true;\r\n            }\r\n            return this.createdValue;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Lazy;\r\n})();\r\nexports.default = Lazy;\r\n//# sourceMappingURL=Lazy.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Lazy.js\n ** module id = 30\n ** module chunks = 0\n **/","var Utils_1 = require(\"../Core/Utils\");\r\n\"use strict\";\r\nvar ScheduledSubject = (function () {\r\n    function ScheduledSubject(scheduler, defaultObserver, defaultSubject) {\r\n        this._observerRefCount = 0;\r\n        this._defaultObserverSub = Rx.Disposable.empty;\r\n        this._scheduler = scheduler;\r\n        this._defaultObserver = defaultObserver;\r\n        this._subject = defaultSubject || new Rx.Subject();\r\n        if (defaultObserver != null) {\r\n            this._defaultObserverSub = this._subject\r\n                .observeOn(this._scheduler)\r\n                .subscribe(this._defaultObserver);\r\n        }\r\n    }\r\n    ScheduledSubject.prototype.dispose = function () {\r\n        if (Utils_1.isDisposable(this._subject)) {\r\n            this._subject.dispose();\r\n        }\r\n    };\r\n    ScheduledSubject.prototype.onCompleted = function () {\r\n        this._subject.onCompleted();\r\n    };\r\n    ScheduledSubject.prototype.onError = function (error) {\r\n        this._subject.onError(error);\r\n    };\r\n    ScheduledSubject.prototype.onNext = function (value) {\r\n        this._subject.onNext(value);\r\n    };\r\n    ScheduledSubject.prototype.subscribe = function (observer) {\r\n        var _this = this;\r\n        if (this._defaultObserverSub)\r\n            this._defaultObserverSub.dispose();\r\n        this._observerRefCount++;\r\n        return new Rx.CompositeDisposable(this._subject.observeOn(this._scheduler).subscribe(observer), Rx.Disposable.create(function () {\r\n            if ((--_this._observerRefCount) <= 0 && _this._defaultObserver != null) {\r\n                _this._defaultObserverSub = _this._subject.observeOn(_this._scheduler).subscribe(_this._defaultObserver);\r\n            }\r\n        }));\r\n    };\r\n    return ScheduledSubject;\r\n})();\r\nfunction createScheduledSubject(scheduler, defaultObserver, defaultSubject) {\r\n    var scheduled = new ScheduledSubject(scheduler, defaultObserver, defaultSubject);\r\n    var result = Utils_1.extend(scheduled, new Rx.Subject(), true);\r\n    return result;\r\n}\r\nexports.createScheduledSubject = createScheduledSubject;\r\n//# sourceMappingURL=ScheduledSubject.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/ScheduledSubject.js\n ** module id = 31\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar Command_1 = require(\"../Core/Command\");\r\n\"use strict\";\r\nvar EventBinding = (function () {\r\n    function EventBinding(domManager, app) {\r\n        this.priority = 0;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    EventBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"event-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        // create an observable for each event handler value\r\n        var tokens = this.domManager.getObjectLiteralTokens(options);\r\n        tokens.forEach(function (token) {\r\n            _this.wireEvent(el, token.value, token.key, ctx, state, module);\r\n        });\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            el = null;\r\n            // nullify locals\r\n        }));\r\n    };\r\n    EventBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    EventBinding.prototype.wireEvent = function (el, value, eventName, ctx, state, module) {\r\n        var _this = this;\r\n        var exp = this.domManager.compileBindingOptions(value, module);\r\n        var command;\r\n        var commandParameter = undefined;\r\n        var obs = Rx.Observable.fromEvent(el, eventName);\r\n        if (typeof exp === \"function\") {\r\n            var handler = this.domManager.evaluateExpression(exp, ctx);\r\n            handler = Utils_1.unwrapProperty(handler);\r\n            if (Utils_1.isFunction(handler)) {\r\n                state.cleanup.add(obs.subscribe(function (e) {\r\n                    handler.apply(ctx.$data, [ctx, e]);\r\n                }));\r\n            }\r\n            else {\r\n                if (Command_1.isCommand(handler)) {\r\n                    command = handler;\r\n                    state.cleanup.add(obs.subscribe(function (_) {\r\n                        command.execute(undefined);\r\n                    }));\r\n                }\r\n                else {\r\n                    // assumed to be an Rx.Observer\r\n                    var observer = handler;\r\n                    // subscribe event directly to observer\r\n                    state.cleanup.add(obs.subscribe(observer));\r\n                }\r\n            }\r\n        }\r\n        else if (typeof exp === \"object\") {\r\n            var opt = exp;\r\n            command = this.domManager.evaluateExpression(opt.command, ctx);\r\n            command = Utils_1.unwrapProperty(command);\r\n            if (exp.hasOwnProperty(\"parameter\"))\r\n                commandParameter = this.domManager.evaluateExpression(opt.parameter, ctx);\r\n            state.cleanup.add(obs.subscribe(function (_) {\r\n                try {\r\n                    command.execute(commandParameter);\r\n                }\r\n                catch (e) {\r\n                    _this.app.defaultExceptionHandler.onNext(e);\r\n                }\r\n            }));\r\n        }\r\n        else {\r\n            Utils_1.throwError(\"invalid binding options\");\r\n        }\r\n    };\r\n    return EventBinding;\r\n})();\r\nexports.default = EventBinding;\r\n//# sourceMappingURL=Event.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/Event.js\n ** module id = 32\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar res = require(\"../Core/Resources\");\r\n\"use strict\";\r\nvar ValueBinding = (function () {\r\n    function ValueBinding(domManager, app) {\r\n        this.priority = 5;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    ValueBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"value-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var tag = el.tagName.toLowerCase();\r\n        if (tag !== 'input' && tag !== 'option' && tag !== 'select' && tag !== 'textarea')\r\n            Utils_1.throwError(\"value-binding only operates on checkboxes and radio-buttons\");\r\n        var useDomManagerForValueUpdates = (tag === 'input' && el.type === 'radio') || tag === 'option';\r\n        var prop;\r\n        var cleanup;\r\n        var exp = this.domManager.compileBindingOptions(options, module);\r\n        function doCleanup() {\r\n            if (cleanup) {\r\n                cleanup.dispose();\r\n                cleanup = null;\r\n            }\r\n        }\r\n        function updateElement(domManager, value) {\r\n            if (useDomManagerForValueUpdates)\r\n                setNodeValue(el, value, domManager);\r\n            else {\r\n                if ((value === null) || (value === undefined))\r\n                    value = \"\";\r\n                el.value = value;\r\n            }\r\n        }\r\n        // options is supposed to be a field-access path\r\n        state.cleanup.add(this.domManager.expressionToObservable(exp, ctx).subscribe(function (model) {\r\n            try {\r\n                if (!Utils_1.isProperty(model)) {\r\n                    // initial and final update\r\n                    updateElement(_this.domManager, model);\r\n                }\r\n                else {\r\n                    doCleanup();\r\n                    cleanup = new Rx.CompositeDisposable();\r\n                    // update on property change\r\n                    prop = model;\r\n                    cleanup.add(prop.changed.subscribe(function (x) {\r\n                        updateElement(_this.domManager, x);\r\n                    }));\r\n                    // initial update\r\n                    updateElement(_this.domManager, prop());\r\n                    // don't attempt to updated computed properties\r\n                    if (!prop.source) {\r\n                        cleanup.add(Rx.Observable.fromEvent(el, 'change').subscribe(function (e) {\r\n                            try {\r\n                                if (useDomManagerForValueUpdates)\r\n                                    prop(getNodeValue(el, _this.domManager));\r\n                                else\r\n                                    prop(el.value);\r\n                            }\r\n                            catch (e) {\r\n                                _this.app.defaultExceptionHandler.onNext(e);\r\n                            }\r\n                        }));\r\n                    }\r\n                }\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            el = null;\r\n            // nullify locals\r\n            doCleanup();\r\n        }));\r\n    };\r\n    ValueBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    return ValueBinding;\r\n})();\r\nexports.default = ValueBinding;\r\n/**\r\n * For certain elements such as select and input type=radio we store\r\n * the real element value in NodeState if it is anything other than a\r\n * string. This method returns that value.\r\n * @param {Node} node\r\n * @param {IDomManager} domManager\r\n */\r\nfunction getNodeValue(node, domManager) {\r\n    var state = domManager.getNodeState(node);\r\n    if (state != null && state[res.hasValueBindingValue]) {\r\n        return state[res.valueBindingValue];\r\n    }\r\n    return node.value;\r\n}\r\nexports.getNodeValue = getNodeValue;\r\n/**\r\n * Associate a value with an element. Either by using its value-attribute\r\n * or storing it in NodeState\r\n * @param {Node} node\r\n * @param {any} value\r\n * @param {IDomManager} domManager\r\n */\r\nfunction setNodeValue(node, value, domManager) {\r\n    if ((value === null) || (value === undefined))\r\n        value = \"\";\r\n    var state = domManager.getNodeState(node);\r\n    if (typeof value === \"string\") {\r\n        // Update the element only if the element and model are different. On some browsers, updating the value\r\n        // will move the cursor to the end of the input, which would be bad while the user is typing.\r\n        if (node.value !== value) {\r\n            node.value = value;\r\n            // clear state since value is stored in attribute\r\n            if (state != null && state[res.hasValueBindingValue]) {\r\n                state[res.hasValueBindingValue] = false;\r\n                state[res.valueBindingValue] = undefined;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // get or create state\r\n        if (state == null) {\r\n            state = this.createNodeState();\r\n            this.setNodeState(node, state);\r\n        }\r\n        // store value\r\n        state[res.valueBindingValue] = value;\r\n        state[res.hasValueBindingValue] = true;\r\n    }\r\n}\r\nexports.setNodeValue = setNodeValue;\r\n//# sourceMappingURL=Value.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/Value.js\n ** module id = 33\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\n\"use strict\";\r\nvar HasFocusBinding = (function () {\r\n    function HasFocusBinding(domManager, app) {\r\n        this.priority = -1;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    HasFocusBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"hasFocus-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var prop;\r\n        var cleanup;\r\n        var compiled = this.domManager.compileBindingOptions(options, module);\r\n        var exp;\r\n        var delay = 0;\r\n        if (typeof compiled === \"object\" && compiled.hasOwnProperty(\"property\")) {\r\n            var opt = compiled;\r\n            exp = opt.property;\r\n            delay = this.domManager.evaluateExpression(opt.delay, ctx);\r\n            // convert boolean to number\r\n            if (typeof delay === \"boolean\")\r\n                delay = delay ? 1 : 0;\r\n        }\r\n        else {\r\n            exp = compiled;\r\n        }\r\n        function doCleanup() {\r\n            if (cleanup) {\r\n                cleanup.dispose();\r\n                cleanup = null;\r\n            }\r\n        }\r\n        function handleElementFocusChange(isFocused) {\r\n            // wx.If possible, ignore which event was raised and determine focus state using activeElement,\r\n            // as this avoids phantom focus/blur events raised when changing tabs in modern browsers.\r\n            var ownerDoc = el.ownerDocument;\r\n            if (\"activeElement\" in ownerDoc) {\r\n                var active;\r\n                try {\r\n                    active = ownerDoc.activeElement;\r\n                }\r\n                catch (e) {\r\n                    // wx.IE9 throws if you access activeElement during page load (see issue #703)\r\n                    active = ownerDoc.body;\r\n                }\r\n                isFocused = (active === el);\r\n            }\r\n            prop(isFocused);\r\n        }\r\n        function updateElement(value) {\r\n            if (value) {\r\n                // Note: wx.If the element is currently hidden, we schedule the focus change\r\n                // to occur \"soonish\". Technically this is a hack because it hides the fact\r\n                // that we make tricky assumption about the presence of a \"visible\" binding \r\n                // on the same element who's subscribe handler runs after us \r\n                if (delay === 0 && el.style.display !== 'none') {\r\n                    el.focus();\r\n                }\r\n                else {\r\n                    Rx.Observable.timer(delay).subscribe(function () {\r\n                        el.focus();\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                el.blur();\r\n            }\r\n        }\r\n        // options is supposed to be a @propref\r\n        state.cleanup.add(this.domManager.expressionToObservable(exp, ctx).subscribe(function (model) {\r\n            try {\r\n                if (!Utils_1.isProperty(model)) {\r\n                    // initial and final update\r\n                    updateElement(model);\r\n                }\r\n                else {\r\n                    doCleanup();\r\n                    cleanup = new Rx.CompositeDisposable();\r\n                    // update on property change\r\n                    prop = model;\r\n                    cleanup.add(prop.changed.subscribe(function (x) {\r\n                        updateElement(x);\r\n                    }));\r\n                    // initial update\r\n                    updateElement(prop());\r\n                    // don't attempt to updated computed properties\r\n                    if (!prop.source) {\r\n                        cleanup.add(Rx.Observable.merge(_this.getFocusEventObservables(el)).subscribe(function (hasFocus) {\r\n                            handleElementFocusChange(hasFocus);\r\n                        }));\r\n                    }\r\n                }\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            el = null;\r\n            // nullify locals\r\n            doCleanup();\r\n        }));\r\n    };\r\n    HasFocusBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    HasFocusBinding.prototype.getFocusEventObservables = function (el) {\r\n        var result = [];\r\n        result.push(Rx.Observable.fromEvent(el, 'focus').select(function (x) { return true; }));\r\n        result.push(Rx.Observable.fromEvent(el, 'focusin').select(function (x) { return true; }));\r\n        result.push(Rx.Observable.fromEvent(el, 'blur').select(function (x) { return false; }));\r\n        result.push(Rx.Observable.fromEvent(el, 'focusout').select(function (x) { return false; }));\r\n        return result;\r\n    };\r\n    return HasFocusBinding;\r\n})();\r\nexports.default = HasFocusBinding;\r\n//# sourceMappingURL=HasFocus.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/HasFocus.js\n ** module id = 34\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\n\"use strict\";\r\nvar WithBinding = (function () {\r\n    function WithBinding(domManager, app) {\r\n        this.priority = 50;\r\n        this.controlsDescendants = true;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    WithBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"with-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var self = this;\r\n        var exp = this.domManager.compileBindingOptions(options, module);\r\n        var obs = this.domManager.expressionToObservable(exp, ctx);\r\n        // subscribe\r\n        state.cleanup.add(obs.subscribe(function (x) {\r\n            try {\r\n                self.applyValue(el, Utils_1.unwrapProperty(x), state);\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            obs = null;\r\n            el = null;\r\n            self = null;\r\n            // nullify locals\r\n        }));\r\n    };\r\n    WithBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    WithBinding.prototype.applyValue = function (el, value, state) {\r\n        state.model = value;\r\n        var ctx = this.domManager.getDataContext(el);\r\n        this.domManager.cleanDescendants(el);\r\n        this.domManager.applyBindingsToDescendants(ctx, el);\r\n    };\r\n    return WithBinding;\r\n})();\r\nexports.default = WithBinding;\r\n//# sourceMappingURL=With.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/With.js\n ** module id = 35\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\n\"use strict\";\r\nvar CheckedBinding = (function () {\r\n    function CheckedBinding(domManager, app) {\r\n        this.priority = 0;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    CheckedBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"checked-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var tag = el.tagName.toLowerCase();\r\n        var isCheckBox = el.type === 'checkbox';\r\n        var isRadioButton = el.type === 'radio';\r\n        if (tag !== 'input' || (!isCheckBox && !isRadioButton))\r\n            Utils_1.throwError(\"checked-binding only operates on checkboxes and radio-buttons\");\r\n        var exp = this.domManager.compileBindingOptions(options, module);\r\n        var prop;\r\n        var cleanup;\r\n        function doCleanup() {\r\n            if (cleanup) {\r\n                cleanup.dispose();\r\n                cleanup = null;\r\n            }\r\n        }\r\n        function updateElement(value) {\r\n            el.checked = value;\r\n        }\r\n        state.cleanup.add(this.domManager.expressionToObservable(exp, ctx).subscribe(function (model) {\r\n            try {\r\n                if (!Utils_1.isProperty(model)) {\r\n                    // initial and final update\r\n                    updateElement(model);\r\n                }\r\n                else {\r\n                    doCleanup();\r\n                    cleanup = new Rx.CompositeDisposable();\r\n                    // update on property change\r\n                    prop = model;\r\n                    cleanup.add(prop.changed.subscribe(function (x) {\r\n                        updateElement(x);\r\n                    }));\r\n                    // initial update\r\n                    updateElement(prop());\r\n                    // don't attempt to updated computed properties\r\n                    if (!prop.source) {\r\n                        // wire change-events depending on browser and version\r\n                        var events = _this.getCheckedEventObservables(el);\r\n                        cleanup.add(Rx.Observable.merge(events).subscribe(function (e) {\r\n                            try {\r\n                                prop(el.checked);\r\n                            }\r\n                            catch (e) {\r\n                                _this.app.defaultExceptionHandler.onNext(e);\r\n                            }\r\n                        }));\r\n                    }\r\n                }\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            el = null;\r\n            // nullify locals\r\n            doCleanup();\r\n        }));\r\n    };\r\n    CheckedBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    CheckedBinding.prototype.getCheckedEventObservables = function (el) {\r\n        var result = [];\r\n        result.push(Rx.Observable.fromEvent(el, 'click'));\r\n        result.push(Rx.Observable.fromEvent(el, 'change'));\r\n        return result;\r\n    };\r\n    return CheckedBinding;\r\n})();\r\nexports.default = CheckedBinding;\r\n//# sourceMappingURL=Checked.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/Checked.js\n ** module id = 36\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar Command_1 = require(\"../Core/Command\");\r\n\"use strict\";\r\nvar keysByCode = {\r\n    8: 'backspace',\r\n    9: 'tab',\r\n    13: 'enter',\r\n    27: 'esc',\r\n    32: 'space',\r\n    33: 'pageup',\r\n    34: 'pagedown',\r\n    35: 'end',\r\n    36: 'home',\r\n    37: 'left',\r\n    38: 'up',\r\n    39: 'right',\r\n    40: 'down',\r\n    45: 'insert',\r\n    46: 'delete'\r\n};\r\nvar KeyPressBinding = (function () {\r\n    function KeyPressBinding(domManager, app) {\r\n        this.priority = 0;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    KeyPressBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"keyPress-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        // create an observable for key combination\r\n        var tokens = this.domManager.getObjectLiteralTokens(options);\r\n        var obs = Rx.Observable.fromEvent(el, \"keydown\")\r\n            .where(function (x) { return !x.repeat; })\r\n            .publish()\r\n            .refCount();\r\n        tokens.forEach(function (token) {\r\n            var keyDesc = token.key;\r\n            var combination, combinations = [];\r\n            // parse key combinations\r\n            keyDesc.split(' ').forEach(function (variation) {\r\n                combination = {\r\n                    expression: keyDesc,\r\n                    keys: {}\r\n                };\r\n                variation.split('-').forEach(function (value) {\r\n                    combination.keys[value.trim()] = true;\r\n                });\r\n                combinations.push(combination);\r\n            });\r\n            _this.wireKey(token.value, obs, combinations, ctx, state, module);\r\n        });\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            el = null;\r\n            // nullify locals\r\n        }));\r\n    };\r\n    KeyPressBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    KeyPressBinding.prototype.testCombination = function (combination, event) {\r\n        var metaPressed = !!(event.metaKey && !event.ctrlKey);\r\n        var altPressed = !!event.altKey;\r\n        var ctrlPressed = !!event.ctrlKey;\r\n        var shiftPressed = !!event.shiftKey;\r\n        var keyCode = event.keyCode;\r\n        var metaRequired = !!combination.keys.meta;\r\n        var altRequired = !!combination.keys.alt;\r\n        var ctrlRequired = !!combination.keys.ctrl;\r\n        var shiftRequired = !!combination.keys.shift;\r\n        // normalize keycodes\r\n        if ((!shiftPressed || shiftRequired) && keyCode >= 65 && keyCode <= 90)\r\n            keyCode = keyCode + 32;\r\n        var mainKeyPressed = combination.keys[keysByCode[keyCode]] || combination.keys[keyCode.toString()] || combination.keys[String.fromCharCode(keyCode)];\r\n        return (mainKeyPressed &&\r\n            (metaRequired === metaPressed) &&\r\n            (altRequired === altPressed) &&\r\n            (ctrlRequired === ctrlPressed) &&\r\n            (shiftRequired === shiftPressed));\r\n    };\r\n    KeyPressBinding.prototype.testCombinations = function (combinations, event) {\r\n        for (var i = 0; i < combinations.length; i++) {\r\n            if (this.testCombination(combinations[i], event))\r\n                return true;\r\n        }\r\n        return false;\r\n    };\r\n    KeyPressBinding.prototype.wireKey = function (value, obs, combinations, ctx, state, module) {\r\n        var _this = this;\r\n        var exp = this.domManager.compileBindingOptions(value, module);\r\n        var command;\r\n        var commandParameter = undefined;\r\n        if (typeof exp === \"function\") {\r\n            var handler = this.domManager.evaluateExpression(exp, ctx);\r\n            handler = Utils_1.unwrapProperty(handler);\r\n            if (!Command_1.isCommand(handler)) {\r\n                state.cleanup.add(obs.where(function (e) { return _this.testCombinations(combinations, e); }).subscribe(function (e) {\r\n                    try {\r\n                        handler.apply(ctx.$data, [ctx]);\r\n                        e.preventDefault();\r\n                    }\r\n                    catch (e) {\r\n                        _this.app.defaultExceptionHandler.onNext(e);\r\n                    }\r\n                }));\r\n            }\r\n            else {\r\n                command = handler;\r\n                state.cleanup.add(obs.where(function (e) { return _this.testCombinations(combinations, e); }).subscribe(function (e) {\r\n                    try {\r\n                        command.execute(undefined);\r\n                        e.preventDefault();\r\n                    }\r\n                    catch (e) {\r\n                        _this.app.defaultExceptionHandler.onNext(e);\r\n                    }\r\n                }));\r\n            }\r\n        }\r\n        else if (typeof exp === \"object\") {\r\n            command = this.domManager.evaluateExpression(exp.command, ctx);\r\n            command = Utils_1.unwrapProperty(command);\r\n            if (exp.hasOwnProperty(\"parameter\"))\r\n                commandParameter = this.domManager.evaluateExpression(exp.parameter, ctx);\r\n            state.cleanup.add(obs.where(function (e) { return _this.testCombinations(combinations, e); }).subscribe(function (e) {\r\n                try {\r\n                    command.execute(commandParameter);\r\n                    e.preventDefault();\r\n                }\r\n                catch (e) {\r\n                    _this.app.defaultExceptionHandler.onNext(e);\r\n                }\r\n            }));\r\n        }\r\n        else {\r\n            Utils_1.throwError(\"invalid binding options\");\r\n        }\r\n    };\r\n    return KeyPressBinding;\r\n})();\r\nexports.default = KeyPressBinding;\r\n//# sourceMappingURL=KeyPress.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/KeyPress.js\n ** module id = 37\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar env = require(\"../Core/Environment\");\r\n\"use strict\";\r\nvar TextInputBinding = (function () {\r\n    function TextInputBinding(domManager, app) {\r\n        this.priority = 0;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    TextInputBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"textInput-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var tag = el.tagName.toLowerCase();\r\n        var isTextArea = tag === \"textarea\";\r\n        if (tag !== 'input' && tag !== 'textarea')\r\n            Utils_1.throwError(\"textInput-binding can only be applied to input or textarea elements\");\r\n        var exp = this.domManager.compileBindingOptions(options, module);\r\n        var prop;\r\n        var propertySubscription;\r\n        var eventSubscription;\r\n        var previousElementValue;\r\n        function updateElement(value) {\r\n            if (value === null || value === undefined) {\r\n                value = \"\";\r\n            }\r\n            // Update the element only if the element and model are different. On some browsers, updating the value\r\n            // will move the cursor to the end of the input, which would be bad while the user is typing.\r\n            if (el.value !== value) {\r\n                previousElementValue = value; // Make sure we ignore events (propertychange) that result from updating the value\r\n                el.value = value;\r\n            }\r\n        }\r\n        function doCleanup() {\r\n            if (propertySubscription) {\r\n                propertySubscription.dispose();\r\n                propertySubscription = null;\r\n            }\r\n            if (eventSubscription) {\r\n                eventSubscription.dispose();\r\n                eventSubscription = null;\r\n            }\r\n        }\r\n        state.cleanup.add(this.domManager.expressionToObservable(exp, ctx).subscribe(function (src) {\r\n            try {\r\n                if (!Utils_1.isProperty(src)) {\r\n                    // initial and final update\r\n                    updateElement(src);\r\n                }\r\n                else {\r\n                    doCleanup();\r\n                    // update on property change\r\n                    prop = src;\r\n                    propertySubscription = prop.changed.subscribe(function (x) {\r\n                        updateElement(x);\r\n                    });\r\n                    // initial update\r\n                    updateElement(prop());\r\n                    // don't attempt to updated computed properties\r\n                    if (!prop.source) {\r\n                        // wire change-events depending on browser and version\r\n                        var events = _this.getTextInputEventObservables(el, isTextArea);\r\n                        eventSubscription = Rx.Observable.merge(events).subscribe(function (e) {\r\n                            try {\r\n                                prop(el.value);\r\n                            }\r\n                            catch (e) {\r\n                                _this.app.defaultExceptionHandler.onNext(e);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            el = null;\r\n            // nullify locals\r\n            doCleanup();\r\n        }));\r\n    };\r\n    TextInputBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    TextInputBinding.prototype.getTextInputEventObservables = function (el, isTextArea) {\r\n        var result = [];\r\n        if (env.ie && env.ie.version < 10) {\r\n            if (env.ie.version <= 9) {\r\n                // wx.Internet Explorer 9 doesn't fire the 'input' event when deleting text, including using\r\n                // the backspace, delete, or ctrl-x keys, clicking the 'x' to clear the input, dragging text\r\n                // out of the field, and cutting or deleting text using the context menu. 'selectionchange'\r\n                // can detect all of those except dragging text out of the field, for which we use 'dragend'.\r\n                result.push(env.ie.getSelectionChangeObservable(el).where(function (doc) { return doc.activeElement === el; }));\r\n                result.push(Rx.Observable.fromEvent(el, 'dragend'));\r\n                // wx.IE 9 does support 'input', but since it doesn't fire it when\r\n                // using autocomplete, we'll use 'propertychange' for it also.\r\n                result.push(Rx.Observable.fromEvent(el, 'input'));\r\n                result.push(Rx.Observable.fromEvent(el, 'propertychange').where(function (e) { return e.propertyName === 'value'; }));\r\n            }\r\n        }\r\n        else {\r\n            // All other supported browsers support the 'input' event, which fires whenever the content of the element is changed\r\n            // through the user interface.\r\n            result.push(Rx.Observable.fromEvent(el, 'input'));\r\n            if (env.safari && env.safari.version < 5 && isTextArea) {\r\n                // Safari <5 doesn't fire the 'input' event for <textarea> elements (it does fire 'textInput'\r\n                // but only when typing). So we'll just catch as much as we can with keydown, cut, and paste.\r\n                result.push(Rx.Observable.fromEvent(el, 'keydown'));\r\n                result.push(Rx.Observable.fromEvent(el, 'paste'));\r\n                result.push(Rx.Observable.fromEvent(el, 'cut'));\r\n            }\r\n            else if (env.opera && env.opera.version < 11) {\r\n                // Opera 10 doesn't always fire the 'input' event for cut, paste, undo & drop operations.\r\n                // We can try to catch some of those using 'keydown'.\r\n                result.push(Rx.Observable.fromEvent(el, 'keydown'));\r\n            }\r\n            else if (env.firefox && env.firefox.version < 4.0) {\r\n                // Firefox <= 3.6 doesn't fire the 'input' event when text is filled in through autocomplete\r\n                result.push(Rx.Observable.fromEvent(el, 'DOMAutoComplete'));\r\n                // Firefox <=3.5 doesn't fire the 'input' event when text is dropped into the input.\r\n                result.push(Rx.Observable.fromEvent(el, 'dragdrop')); // <3.5\r\n                result.push(Rx.Observable.fromEvent(el, 'drop')); // 3.5\r\n            }\r\n        }\r\n        // Bind to the change event so that we can catch programmatic updates of the value that fire this event.\r\n        result.push(Rx.Observable.fromEvent(el, 'change'));\r\n        return result;\r\n    };\r\n    return TextInputBinding;\r\n})();\r\nexports.default = TextInputBinding;\r\n//# sourceMappingURL=TextInput.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/TextInput.js\n ** module id = 38\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar Value_1 = require(\"./Value\");\r\nvar List_1 = require(\"../Collections/List\");\r\n\"use strict\";\r\nvar impls = new Array();\r\nvar RadioSingleSelectionImpl = (function () {\r\n    function RadioSingleSelectionImpl(domManager) {\r\n        this.domManager = domManager;\r\n    }\r\n    RadioSingleSelectionImpl.prototype.supports = function (el, model) {\r\n        return (el.tagName.toLowerCase() === 'input' &&\r\n            el.getAttribute(\"type\") === 'radio') &&\r\n            !List_1.isList(model);\r\n    };\r\n    RadioSingleSelectionImpl.prototype.observeElement = function (el) {\r\n        return Rx.Observable.merge(Rx.Observable.fromEvent(el, 'click'), Rx.Observable.fromEvent(el, 'change'));\r\n    };\r\n    RadioSingleSelectionImpl.prototype.observeModel = function (model) {\r\n        if (Utils_1.isProperty(model)) {\r\n            var prop = model;\r\n            return prop.changed;\r\n        }\r\n        return Rx.Observable.never();\r\n    };\r\n    RadioSingleSelectionImpl.prototype.updateElement = function (el, model) {\r\n        var input = el;\r\n        input.checked = Value_1.getNodeValue(input, this.domManager) == Utils_1.unwrapProperty(model);\r\n    };\r\n    RadioSingleSelectionImpl.prototype.updateModel = function (el, model, e) {\r\n        var input = el;\r\n        if (input.checked) {\r\n            model(Value_1.getNodeValue(input, this.domManager));\r\n        }\r\n    };\r\n    return RadioSingleSelectionImpl;\r\n})();\r\nvar OptionSingleSelectionImpl = (function () {\r\n    function OptionSingleSelectionImpl(domManager) {\r\n        this.domManager = domManager;\r\n    }\r\n    OptionSingleSelectionImpl.prototype.supports = function (el, model) {\r\n        return el.tagName.toLowerCase() === 'select' &&\r\n            !List_1.isList(model);\r\n    };\r\n    OptionSingleSelectionImpl.prototype.observeElement = function (el) {\r\n        return Rx.Observable.fromEvent(el, 'change');\r\n    };\r\n    OptionSingleSelectionImpl.prototype.observeModel = function (model) {\r\n        if (Utils_1.isProperty(model)) {\r\n            var prop = model;\r\n            return prop.changed;\r\n        }\r\n        return Rx.Observable.never();\r\n    };\r\n    OptionSingleSelectionImpl.prototype.updateElement = function (el, model) {\r\n        var select = el;\r\n        var value = Utils_1.unwrapProperty(model);\r\n        var length = select.options.length;\r\n        if (value == null) {\r\n            select.selectedIndex = -1;\r\n        }\r\n        else {\r\n            for (var i = 0; i < length; i++) {\r\n                var option = select.options[i];\r\n                if (Value_1.getNodeValue(option, this.domManager) == value) {\r\n                    select.selectedIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    OptionSingleSelectionImpl.prototype.updateModel = function (el, model, e) {\r\n        var select = el;\r\n        // selected-value comes from the option at selectedIndex\r\n        var value = select.selectedIndex !== -1 ?\r\n            Value_1.getNodeValue(select.options[select.selectedIndex], this.domManager) :\r\n            undefined;\r\n        model(value);\r\n    };\r\n    return OptionSingleSelectionImpl;\r\n})();\r\nvar SelectedValueBinding = (function () {\r\n    function SelectedValueBinding(domManager, app) {\r\n        this.priority = 0;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n        impls.push(new RadioSingleSelectionImpl(domManager));\r\n        impls.push(new OptionSingleSelectionImpl(domManager));\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    SelectedValueBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"selectedValue-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var impl;\r\n        var implCleanup;\r\n        var exp = this.domManager.compileBindingOptions(options, module);\r\n        function cleanupImpl() {\r\n            if (implCleanup) {\r\n                implCleanup.dispose();\r\n                implCleanup = null;\r\n            }\r\n        }\r\n        // options is supposed to be a field-access path\r\n        state.cleanup.add(this.domManager.expressionToObservable(exp, ctx).subscribe(function (model) {\r\n            try {\r\n                cleanupImpl();\r\n                // lookup implementation\r\n                impl = undefined;\r\n                for (var i = 0; i < impls.length; i++) {\r\n                    if (impls[i].supports(el, model)) {\r\n                        impl = impls[i];\r\n                        break;\r\n                    }\r\n                }\r\n                if (!impl)\r\n                    Utils_1.throwError(\"selectedValue-binding does not support this combination of bound element and model!\");\r\n                implCleanup = new Rx.CompositeDisposable();\r\n                // initial update\r\n                impl.updateElement(el, model);\r\n                // update on model change\r\n                implCleanup.add(impl.observeModel(model).subscribe(function (x) {\r\n                    try {\r\n                        impl.updateElement(el, model);\r\n                    }\r\n                    catch (e) {\r\n                        _this.app.defaultExceptionHandler.onNext(e);\r\n                    }\r\n                }));\r\n                // wire change-events\r\n                if (Utils_1.isProperty(model)) {\r\n                    implCleanup.add(impl.observeElement(el).subscribe(function (e) {\r\n                        try {\r\n                            impl.updateModel(el, model, e);\r\n                        }\r\n                        catch (e) {\r\n                            _this.app.defaultExceptionHandler.onNext(e);\r\n                        }\r\n                    }));\r\n                }\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            el = null;\r\n            // nullify locals\r\n            cleanupImpl();\r\n        }));\r\n    };\r\n    SelectedValueBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    return SelectedValueBinding;\r\n})();\r\nexports.default = SelectedValueBinding;\r\n//# sourceMappingURL=SelectedValue.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/SelectedValue.js\n ** module id = 39\n ** module chunks = 0\n **/","/// <reference path=\"../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\n\"use strict\";\r\nvar ComponentBinding = (function () {\r\n    function ComponentBinding(domManager, app) {\r\n        this.priority = 30;\r\n        this.controlsDescendants = true;\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    ComponentBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"component-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var compiled = this.domManager.compileBindingOptions(options, module);\r\n        var opt = compiled;\r\n        var exp;\r\n        var componentNameObservable;\r\n        var componentParams = {};\r\n        var cleanup;\r\n        function doCleanup() {\r\n            if (cleanup) {\r\n                cleanup.dispose();\r\n                cleanup = null;\r\n            }\r\n        }\r\n        if (typeof compiled === \"function\") {\r\n            exp = compiled;\r\n            componentNameObservable = this.domManager.expressionToObservable(exp, ctx);\r\n        }\r\n        else {\r\n            // collect component-name observable\r\n            componentNameObservable = this.domManager.expressionToObservable(opt.name, ctx);\r\n            // collect params observables\r\n            if (opt.params) {\r\n                if (Utils_1.isFunction(opt.params)) {\r\n                    // opt params is object passed by value (probably $componentParams from view-binding)\r\n                    componentParams = this.domManager.evaluateExpression(opt.params, ctx);\r\n                }\r\n                else if (typeof opt.params === \"object\") {\r\n                    Object.keys(opt.params).forEach(function (x) {\r\n                        componentParams[x] = _this.domManager.evaluateExpression(opt.params[x], ctx);\r\n                    });\r\n                }\r\n                else {\r\n                    Utils_1.throwError(\"invalid component-params\");\r\n                }\r\n            }\r\n        }\r\n        // clear children\r\n        var oldContents = new Array();\r\n        while (el.firstChild) {\r\n            oldContents.push(el.removeChild(el.firstChild));\r\n        }\r\n        // subscribe to any input changes\r\n        state.cleanup.add(componentNameObservable.subscribe(function (componentName) {\r\n            try {\r\n                doCleanup();\r\n                cleanup = new Rx.CompositeDisposable();\r\n                // lookup component\r\n                var obs = module.loadComponent(componentName, componentParams);\r\n                var disp = undefined;\r\n                if (obs == null)\r\n                    Utils_1.throwError(\"component '{0}' is not registered with current module-context\", componentName);\r\n                disp = obs.subscribe(function (component) {\r\n                    // loader cleanup\r\n                    if (disp != null) {\r\n                        disp.dispose();\r\n                        disp = undefined;\r\n                    }\r\n                    // auto-dispose view-model\r\n                    if (component.viewModel) {\r\n                        if (Utils_1.isDisposable(component.viewModel)) {\r\n                            cleanup.add(component.viewModel);\r\n                        }\r\n                    }\r\n                    // done\r\n                    _this.applyTemplate(component, el, ctx, state, component.template, component.viewModel);\r\n                });\r\n                if (disp != null)\r\n                    cleanup.add(disp);\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n            oldContents = null;\r\n            compiled = null;\r\n            doCleanup();\r\n        }));\r\n    };\r\n    ComponentBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    ComponentBinding.prototype.applyTemplate = function (component, el, ctx, state, template, vm) {\r\n        // clear\r\n        while (el.firstChild) {\r\n            this.domManager.cleanNode(el.firstChild);\r\n            el.removeChild(el.firstChild);\r\n        }\r\n        // clone template and inject\r\n        for (var i = 0; i < template.length; i++) {\r\n            var node = template[i].cloneNode(true);\r\n            el.appendChild(node);\r\n        }\r\n        if (vm) {\r\n            state.model = vm;\r\n            // refresh context\r\n            ctx = this.domManager.getDataContext(el);\r\n        }\r\n        // invoke preBindingInit \r\n        if (vm && component.preBindingInit && vm.hasOwnProperty(component.preBindingInit)) {\r\n            vm[component.preBindingInit].call(vm, el);\r\n        }\r\n        // done\r\n        this.domManager.applyBindingsToDescendants(ctx, el);\r\n        // invoke postBindingInit \r\n        if (vm && component.postBindingInit && vm.hasOwnProperty(component.postBindingInit)) {\r\n            vm[component.postBindingInit].call(vm, el);\r\n        }\r\n    };\r\n    return ComponentBinding;\r\n})();\r\nexports.default = ComponentBinding;\r\n//# sourceMappingURL=Component.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Bindings/Component.js\n ** module id = 40\n ** module chunks = 0\n **/","/// <reference path=\"../../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../../Core/Utils\");\r\n\"use strict\";\r\nvar StateActiveBinding = (function () {\r\n    function StateActiveBinding(domManager, router, app) {\r\n        this.priority = 5;\r\n        this.domManager = domManager;\r\n        this.router = router;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    StateActiveBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"stateActive-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var compiled = this.domManager.compileBindingOptions(options, module);\r\n        var exp;\r\n        var observables = [];\r\n        var opt = compiled;\r\n        var paramsKeys = [];\r\n        var stateName;\r\n        var stateParams;\r\n        var cssClass = \"active\";\r\n        observables.push(this.router.current.changed.startWith(this.router.current()));\r\n        if (typeof compiled === \"function\") {\r\n            exp = compiled;\r\n            observables.push(this.domManager.expressionToObservable(exp, ctx));\r\n        }\r\n        else {\r\n            // collect state-name observable\r\n            observables.push(this.domManager.expressionToObservable(opt.name, ctx));\r\n            // collect params observables\r\n            if (opt.params) {\r\n                Object.keys(opt.params).forEach(function (x) {\r\n                    paramsKeys.push(x);\r\n                    observables.push(_this.domManager.expressionToObservable(opt.params[x], ctx));\r\n                });\r\n            }\r\n            if (opt.cssClass) {\r\n                cssClass = this.domManager.evaluateExpression(opt.cssClass, ctx);\r\n            }\r\n        }\r\n        // subscribe to any input changes\r\n        state.cleanup.add(Rx.Observable.combineLatest(observables, function (_) { return Utils_1.args2Array(arguments); }).subscribe(function (latest) {\r\n            try {\r\n                // first element is the current state\r\n                var currentState = latest.shift();\r\n                // second element is the state-name\r\n                stateName = Utils_1.unwrapProperty(latest.shift());\r\n                // subsequent entries are latest param values\r\n                stateParams = {};\r\n                for (var i = 0; i < paramsKeys.length; i++) {\r\n                    stateParams[paramsKeys[i]] = Utils_1.unwrapProperty(latest[i]);\r\n                }\r\n                var active = _this.router.includes(stateName, stateParams);\r\n                var classes = cssClass.split(/\\s+/).map(function (x) { return x.trim(); }).filter(function (x) { return x; });\r\n                if (classes.length) {\r\n                    Utils_1.toggleCssClass.apply(null, [el, active].concat(classes));\r\n                }\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify locals\r\n            observables = null;\r\n            compiled = null;\r\n            stateName = null;\r\n            stateParams = null;\r\n            opt = null;\r\n            paramsKeys = null;\r\n        }));\r\n    };\r\n    StateActiveBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    return StateActiveBinding;\r\n})();\r\nexports.default = StateActiveBinding;\r\n//# sourceMappingURL=StateActive.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Routing/Bindings/StateActive.js\n ** module id = 41\n ** module chunks = 0\n **/","/// <reference path=\"../../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../../Core/Utils\");\r\n\"use strict\";\r\nvar ViewBinding = (function () {\r\n    function ViewBinding(domManager, router, app) {\r\n        this.priority = 1000;\r\n        this.controlsDescendants = true;\r\n        this.domManager = domManager;\r\n        this.router = router;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    ViewBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"view-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var compiled = this.domManager.compileBindingOptions(options, module);\r\n        var viewName = this.domManager.evaluateExpression(compiled, ctx);\r\n        var currentConfig;\r\n        var cleanup;\r\n        function doCleanup() {\r\n            if (cleanup) {\r\n                cleanup.dispose();\r\n                cleanup = null;\r\n            }\r\n        }\r\n        if (viewName == null || typeof viewName !== \"string\")\r\n            Utils_1.throwError(\"views must be named!\");\r\n        // subscribe to router-state changes\r\n        state.cleanup.add(this.router.current.changed.startWith(this.router.current()).subscribe(function (newState) {\r\n            try {\r\n                doCleanup();\r\n                cleanup = new Rx.CompositeDisposable();\r\n                var config = _this.router.getViewComponent(viewName);\r\n                if (config != null) {\r\n                    if (!Utils_1.isEqual(currentConfig, config)) {\r\n                        cleanup.add(_this.applyTemplate(viewName, config.component, currentConfig ? currentConfig.component : undefined, config.params, config.animations, el, ctx, module));\r\n                        currentConfig = config;\r\n                    }\r\n                }\r\n                else {\r\n                    cleanup.add(_this.applyTemplate(viewName, null, currentConfig ? currentConfig.component : undefined, null, currentConfig ? currentConfig.animations : {}, el, ctx, module));\r\n                    currentConfig = {};\r\n                }\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify common locals\r\n        }));\r\n    };\r\n    ViewBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    ViewBinding.prototype.applyTemplate = function (viewName, componentName, previousComponentName, componentParams, animations, el, ctx, module) {\r\n        var _this = this;\r\n        var self = this;\r\n        var oldElements = Utils_1.nodeChildrenToArray(el);\r\n        var combined = [];\r\n        var obs;\r\n        function removeOldElements() {\r\n            oldElements.forEach(function (x) {\r\n                self.domManager.cleanNode(x);\r\n                el.removeChild(x);\r\n            });\r\n        }\r\n        function instantiateComponent(animation) {\r\n            // extend the data-context\r\n            ctx.$componentParams = componentParams;\r\n            // create component container element\r\n            var container = document.createElement(\"div\");\r\n            var binding = Utils_1.formatString(\"component: { name: '{0}', params: $componentParams }\", componentName);\r\n            container.setAttribute(\"data-bind\", binding);\r\n            // prepare container for animation\r\n            if (animation != null)\r\n                animation.prepare(container);\r\n            // now insert it\r\n            el.appendChild(container);\r\n            // and apply bindings\r\n            self.domManager.applyBindings(ctx, container);\r\n        }\r\n        // construct leave-observable\r\n        if (oldElements.length > 0) {\r\n            var leaveAnimation;\r\n            if (animations && animations.leave) {\r\n                if (typeof animations.leave === \"string\") {\r\n                    leaveAnimation = module.animation(animations.leave);\r\n                }\r\n                else {\r\n                    leaveAnimation = animations.leave;\r\n                }\r\n            }\r\n            if (leaveAnimation) {\r\n                leaveAnimation.prepare(oldElements);\r\n                obs = leaveAnimation.run(oldElements)\r\n                    .continueWith(function () { return leaveAnimation.complete(oldElements); })\r\n                    .continueWith(removeOldElements);\r\n            }\r\n            else {\r\n                obs = Rx.Observable.startDeferred(removeOldElements);\r\n            }\r\n            combined.push(obs);\r\n        }\r\n        // construct enter-observable\r\n        if (componentName != null) {\r\n            var enterAnimation;\r\n            if (animations && animations.enter) {\r\n                if (typeof animations.enter === \"string\") {\r\n                    enterAnimation = module.animation(animations.enter);\r\n                }\r\n                else {\r\n                    enterAnimation = animations.enter;\r\n                }\r\n            }\r\n            obs = Rx.Observable.startDeferred(function () { return instantiateComponent(enterAnimation); });\r\n            if (enterAnimation) {\r\n                obs = obs.continueWith(enterAnimation.run(el.childNodes))\r\n                    .continueWith(function () { return enterAnimation.complete(el.childNodes); });\r\n            }\r\n            // notify world\r\n            obs = obs.continueWith(function () {\r\n                var transition = {\r\n                    view: viewName,\r\n                    fromComponent: previousComponentName,\r\n                    toComponent: componentName\r\n                };\r\n                var ri = _this.router;\r\n                ri.viewTransitionsSubject.onNext(transition);\r\n            });\r\n            combined.push(obs);\r\n        }\r\n        // optimize return\r\n        if (combined.length > 1)\r\n            obs = Rx.Observable.combineLatest(combined, Utils_1.noop).take(1);\r\n        else if (combined.length === 1)\r\n            obs = combined[0].take(1);\r\n        else\r\n            obs = null;\r\n        // no-op return\r\n        return obs ? (obs.subscribe() || Rx.Disposable.empty) : Rx.Disposable.empty;\r\n    };\r\n    return ViewBinding;\r\n})();\r\nexports.default = ViewBinding;\r\n//# sourceMappingURL=View.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Routing/Bindings/View.js\n ** module id = 42\n ** module chunks = 0\n **/","/// <reference path=\"../../../node_modules/rx/ts/rx.all.d.ts\" />\r\n/// <reference path=\"../../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../../Core/Utils\");\r\n\"use strict\";\r\nvar StateRefBinding = (function () {\r\n    function StateRefBinding(domManager, router, app) {\r\n        this.priority = 5;\r\n        this.domManager = domManager;\r\n        this.router = router;\r\n        this.app = app;\r\n    }\r\n    ////////////////////\r\n    // wx.IBinding\r\n    StateRefBinding.prototype.applyBinding = function (node, options, ctx, state, module) {\r\n        var _this = this;\r\n        if (node.nodeType !== 1)\r\n            Utils_1.throwError(\"stateRef-binding only operates on elements!\");\r\n        if (options == null)\r\n            Utils_1.throwError(\"invalid binding-options!\");\r\n        var el = node;\r\n        var isAnchor = el.tagName.toLowerCase() === \"a\";\r\n        var anchor = isAnchor ? el : undefined;\r\n        var compiled = this.domManager.compileBindingOptions(options, module);\r\n        var exp;\r\n        var observables = [];\r\n        var opt = compiled;\r\n        var paramsKeys = [];\r\n        var stateName;\r\n        var stateParams;\r\n        if (typeof compiled === \"function\") {\r\n            exp = compiled;\r\n            observables.push(this.domManager.expressionToObservable(exp, ctx));\r\n        }\r\n        else {\r\n            // collect state-name observable\r\n            observables.push(this.domManager.expressionToObservable(opt.name, ctx));\r\n            // collect params observables\r\n            if (opt.params) {\r\n                Object.keys(opt.params).forEach(function (x) {\r\n                    paramsKeys.push(x);\r\n                    observables.push(_this.domManager.expressionToObservable(opt.params[x], ctx));\r\n                });\r\n            }\r\n        }\r\n        // subscribe to any input changes\r\n        state.cleanup.add(Rx.Observable.combineLatest(observables, function (_) { return Utils_1.args2Array(arguments); }).subscribe(function (latest) {\r\n            try {\r\n                // first element is always the state-name\r\n                stateName = Utils_1.unwrapProperty(latest.shift());\r\n                // subsequent entries are latest param values\r\n                stateParams = {};\r\n                for (var i = 0; i < paramsKeys.length; i++) {\r\n                    stateParams[paramsKeys[i]] = Utils_1.unwrapProperty(latest[i]);\r\n                }\r\n                if (anchor != null) {\r\n                    anchor.href = _this.router.url(stateName, stateParams);\r\n                }\r\n            }\r\n            catch (e) {\r\n                _this.app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        }));\r\n        // subscribe to anchor's click event\r\n        state.cleanup.add(Rx.Observable.fromEvent(el, \"click\").subscribe(function (e) {\r\n            e.preventDefault();\r\n            // initiate state change using latest name and params\r\n            _this.router.go(stateName, stateParams, { location: true });\r\n        }));\r\n        // release closure references to GC \r\n        state.cleanup.add(Rx.Disposable.create(function () {\r\n            // nullify args\r\n            node = null;\r\n            options = null;\r\n            ctx = null;\r\n            state = null;\r\n            // nullify locals\r\n            observables = null;\r\n            compiled = null;\r\n            stateName = null;\r\n            stateParams = null;\r\n            opt = null;\r\n            paramsKeys = null;\r\n        }));\r\n    };\r\n    StateRefBinding.prototype.configure = function (options) {\r\n        // intentionally left blank\r\n    };\r\n    return StateRefBinding;\r\n})();\r\nexports.default = StateRefBinding;\r\n//# sourceMappingURL=StateRef.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Routing/Bindings/StateRef.js\n ** module id = 43\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\n\"use strict\";\r\nvar templateCache = {};\r\nvar SelectComponent = (function () {\r\n    function SelectComponent(htmlTemplateEngine) {\r\n        var _this = this;\r\n        this.template = function (params) {\r\n            return _this.buildTemplate(params);\r\n        };\r\n        this.viewModel = function (params) {\r\n            var opt = params;\r\n            return {\r\n                items: params.items,\r\n                selectedValue: params.selectedValue,\r\n                hooks: { afterRender: opt.afterRender }\r\n            };\r\n        };\r\n        this.htmlTemplateEngine = htmlTemplateEngine;\r\n    }\r\n    SelectComponent.prototype.buildTemplate = function (params) {\r\n        var result;\r\n        var key = undefined;\r\n        var nodes;\r\n        // check cache\r\n        if (!params.noCache) {\r\n            key = (params.name != null ? params.name : \"\") + \"-\" +\r\n                (params.itemText != null ? params.itemText : \"\") + \"-\" +\r\n                (params.itemValue != null ? params.itemValue : \"\") + \"-\" +\r\n                (params.itemClass != null ? params.itemClass : \"\") + \"-\" +\r\n                (params.selectedValue != null ? \"true\" : \"false\") + \"-\" +\r\n                (params.multiple ? \"true\" : \"false\") + \"-\" +\r\n                (params.required ? \"true\" : \"false\") + \"-\" +\r\n                (params.autofocus ? \"true\" : \"false\") + \"-\" +\r\n                (params.size ? params.size.toString() : \"0\");\r\n            nodes = templateCache[key];\r\n            if (nodes != null) {\r\n                //console.log(\"cache hit\", key, result);\r\n                return nodes;\r\n            }\r\n        }\r\n        // base-template\r\n        result = '<select class=\"wx-select\" data-bind=\"{0}\"><option data-bind=\"{1}\"></option></select>';\r\n        var bindings = [];\r\n        var attrs = [];\r\n        var itemBindings = [];\r\n        var itemAttrs = [];\r\n        bindings.push({ key: \"foreach\", value: \"{ data: items, hooks: hooks }\" });\r\n        // selection (two-way)\r\n        if (params.selectedValue)\r\n            bindings.push({ key: \"selectedValue\", value: \"@selectedValue\" });\r\n        // name\r\n        if (params.name) {\r\n            attrs.push({ key: 'name', value: params.name });\r\n        }\r\n        // multi-select\r\n        if (params.multiple) {\r\n            attrs.push({ key: 'multiple', value: \"true\" });\r\n        }\r\n        // size\r\n        if (params.size !== undefined) {\r\n            attrs.push({ key: 'size', value: params.size.toString() });\r\n        }\r\n        // required\r\n        if (params.required) {\r\n            attrs.push({ key: 'required', value: \"true\" });\r\n        }\r\n        // required\r\n        if (params.autofocus) {\r\n            attrs.push({ key: 'autofocus', value: \"true\" });\r\n        }\r\n        // assemble attr-binding\r\n        if (attrs.length)\r\n            bindings.push({ key: \"attr\", value: \"{ \" + attrs.map(function (x) { return x.key + \": \" + x.value; }).join(\", \") + \" }\" });\r\n        // value\r\n        itemBindings.push({ key: \"value\", value: params.itemValue || \"$data\" });\r\n        // label\r\n        itemBindings.push({ key: 'text', value: params.itemText || \"$data\" });\r\n        // per-item css class\r\n        if (params.itemClass) {\r\n            itemAttrs.push({ key: 'class', value: \"'\" + params.itemClass + \"'\" });\r\n        }\r\n        // assemble attr-binding\r\n        if (itemAttrs.length)\r\n            itemBindings.push({ key: \"attr\", value: \"{ \" + itemAttrs.map(function (x) { return x.key + \": \" + x.value; }).join(\", \") + \" }\" });\r\n        // assemble all bindings\r\n        var bindingString = bindings.map(function (x) { return x.key + \": \" + x.value; }).join(\", \");\r\n        var itemBindingString = itemBindings.map(function (x) { return x.key + \": \" + x.value; }).join(\", \");\r\n        // assemble template\r\n        result = Utils_1.formatString(result, bindingString, itemBindingString);\r\n        //console.log(result);\r\n        // store\r\n        if (!params.noCache) {\r\n            templateCache[key] = result;\r\n        }\r\n        // app.templateEngine can be altered by developer therefore we make sure to parse using HtmlTemplateEngine\r\n        nodes = this.htmlTemplateEngine.parse(result);\r\n        return nodes;\r\n    };\r\n    return SelectComponent;\r\n})();\r\nexports.default = SelectComponent;\r\n//# sourceMappingURL=Select.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Components/Select.js\n ** module id = 44\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\n\"use strict\";\r\nvar groupId = 0;\r\nvar templateCache = {};\r\nvar RadioGroupComponent = (function () {\r\n    function RadioGroupComponent(htmlTemplateEngine) {\r\n        var _this = this;\r\n        this.template = function (params) {\r\n            return _this.buildTemplate(params);\r\n        };\r\n        this.viewModel = function (params) {\r\n            var opt = params;\r\n            var groupName = opt.groupName != null ?\r\n                opt.groupName :\r\n                Utils_1.formatString(\"wx-radiogroup-{0}\", groupId++);\r\n            return {\r\n                items: params.items,\r\n                selectedValue: params.selectedValue,\r\n                groupName: groupName,\r\n                hooks: { afterRender: params.afterRender }\r\n            };\r\n        };\r\n        this.htmlTemplateEngine = htmlTemplateEngine;\r\n    }\r\n    RadioGroupComponent.prototype.buildTemplate = function (params) {\r\n        var result;\r\n        var key = undefined;\r\n        var nodes;\r\n        // check cache\r\n        if (!params.noCache) {\r\n            key = (params.itemText != null ? params.itemText : \"\") + \"-\" +\r\n                (params.itemValue != null ? params.itemValue : \"\") + \"-\" +\r\n                (params.itemClass != null ? params.itemClass : \"\") + \"-\" +\r\n                (params.selectedValue != null ? \"true\" : \"false\");\r\n            nodes = templateCache[key];\r\n            if (nodes != null) {\r\n                //console.log(\"cache hit\", key, result);\r\n                return nodes;\r\n            }\r\n        }\r\n        // base-template\r\n        result = '<div class=\"wx-radiogroup\" data-bind=\"{0}\"><input type=\"radio\" data-bind=\"{1}\"/>{2}</div>';\r\n        var bindings = [];\r\n        var attrs = [];\r\n        var itemBindings = [];\r\n        var itemAttrs = [];\r\n        var perItemExtraMarkup = \"\";\r\n        bindings.push({ key: \"foreach\", value: \"{ data: items, hooks: hooks }\" });\r\n        // assemble attr-binding\r\n        if (attrs.length)\r\n            bindings.push({ key: \"attr\", value: \"{ \" + attrs.map(function (x) { return x.key + \": \" + x.value; }).join(\", \") + \" }\" });\r\n        // value\r\n        itemBindings.push({ key: \"value\", value: params.itemValue || \"$data\" });\r\n        // name\r\n        itemAttrs.push({ key: 'name', value: \"$parent.groupName\" });\r\n        // selection (two-way)\r\n        if (params.selectedValue) {\r\n            itemBindings.push({ key: \"selectedValue\", value: \"$parent.@selectedValue\" });\r\n        }\r\n        // label\r\n        if (params.itemText) {\r\n            perItemExtraMarkup += Utils_1.formatString('<label data-bind=\"text: {0}, attr: { for: {1} }\"></label>', params.itemText, \"$parent.groupName + '-' + $index\");\r\n            itemAttrs.push({ key: 'id', value: \"$parent.groupName + '-' + $index\" });\r\n        }\r\n        // per-item css class\r\n        if (params.itemClass) {\r\n            itemAttrs.push({ key: 'class', value: \"'\" + params.itemClass + \"'\" });\r\n        }\r\n        // assemble attr-binding\r\n        if (itemAttrs.length)\r\n            itemBindings.push({ key: \"attr\", value: \"{ \" + itemAttrs.map(function (x) { return x.key + \": \" + x.value; }).join(\", \") + \" }\" });\r\n        // assemble all bindings\r\n        var bindingString = bindings.map(function (x) { return x.key + \": \" + x.value; }).join(\", \");\r\n        var itemBindingString = itemBindings.map(function (x) { return x.key + \": \" + x.value; }).join(\", \");\r\n        // assemble template\r\n        result = Utils_1.formatString(result, bindingString, itemBindingString, perItemExtraMarkup);\r\n        // store\r\n        if (!params.noCache) {\r\n            templateCache[key] = result;\r\n        }\r\n        // app.templateEngine can be altered by developer therefore we make sure to parse using HtmlTemplateEngine\r\n        nodes = this.htmlTemplateEngine.parse(result);\r\n        return nodes;\r\n    };\r\n    return RadioGroupComponent;\r\n})();\r\nexports.default = RadioGroupComponent;\r\n//# sourceMappingURL=RadioGroup.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Components/RadioGroup.js\n ** module id = 45\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\nvar Property_1 = require(\"./../Core/Property\");\r\nvar RouteMatcher_1 = require(\"./RouteMatcher\");\r\n\"use strict\";\r\nvar Router = (function () {\r\n    function Router(domManager, app) {\r\n        var _this = this;\r\n        this.current = Property_1.property();\r\n        //////////////////////////////////\r\n        // Implementation\r\n        this.states = {};\r\n        this.pathSeparator = \".\";\r\n        this.parentPathDirective = \"^\";\r\n        this.rootStateName = \"$\";\r\n        this.validPathRegExp = /^[a-zA-Z]([\\w-_]*$)/;\r\n        this.viewTransitionsSubject = new Rx.Subject();\r\n        this.domManager = domManager;\r\n        this.app = app;\r\n        this.viewTransitions = this.viewTransitionsSubject.asObservable();\r\n        this.reset(false);\r\n        // monitor navigation history\r\n        app.history.onPopState.subscribe(function (e) {\r\n            try {\r\n                // certain versions of WebKit raise an empty popstate event on page-load\r\n                if (e && e.state) {\r\n                    var state = e.state;\r\n                    var stateName = state.stateName;\r\n                    if (stateName != null) {\r\n                        // enter state using extracted params\r\n                        _this.go(stateName, state.params, { location: false });\r\n                        // update title\r\n                        app.title(state.title);\r\n                    }\r\n                }\r\n            }\r\n            catch (e) {\r\n                app.defaultExceptionHandler.onNext(e);\r\n            }\r\n        });\r\n        // monitor title changes\r\n        app.title.changed.subscribe(function (x) {\r\n            document.title = x;\r\n            if (_this.current() != null)\r\n                _this.replaceHistoryState(_this.current(), x);\r\n        });\r\n    }\r\n    //////////////////////////////////\r\n    // IRouter\r\n    Router.prototype.state = function (config) {\r\n        this.registerStateInternal(config);\r\n        return this;\r\n    };\r\n    Router.prototype.updateCurrentStateParams = function (withParamsAction) {\r\n        var _current = this.current();\r\n        withParamsAction(_current.params);\r\n        this.replaceHistoryState(_current, this.app.title());\r\n    };\r\n    Router.prototype.go = function (to, params, options) {\r\n        to = this.mapPath(to);\r\n        if (this.states[to] == null)\r\n            Utils_1.throwError(\"state '{0}' is not registered\", to);\r\n        this.activateState(to, params, options);\r\n    };\r\n    Router.prototype.get = function (state) {\r\n        return this.states[state];\r\n    };\r\n    Router.prototype.is = function (state, params, options) {\r\n        var _current = this.current();\r\n        var isActive = _current.name === state;\r\n        params = params || {};\r\n        if (isActive) {\r\n            var currentParamsKeys = Object.keys(_current.params);\r\n            var paramsKeys = Object.keys(params);\r\n            if (currentParamsKeys.length === paramsKeys.length) {\r\n                for (var i = 0; i < paramsKeys.length; i++) {\r\n                    if (_current.params[paramsKeys[i]] != params[paramsKeys[i]]) {\r\n                        isActive = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                isActive = false;\r\n            }\r\n        }\r\n        return isActive;\r\n    };\r\n    Router.prototype.includes = function (state, params, options) {\r\n        var _current = this.current();\r\n        var isActive = _current.name.indexOf(state) === 0;\r\n        params = params || {};\r\n        if (isActive) {\r\n            var currentParamsKeys = Object.keys(_current.params);\r\n            var paramsKeys = Object.keys(params);\r\n            paramsKeys = paramsKeys.length <= currentParamsKeys.length ?\r\n                paramsKeys : currentParamsKeys;\r\n            for (var i = 0; i < paramsKeys.length; i++) {\r\n                if (_current.params[paramsKeys[i]] != params[paramsKeys[i]]) {\r\n                    isActive = false;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return isActive;\r\n    };\r\n    Router.prototype.url = function (state, params) {\r\n        state = this.mapPath(state);\r\n        var route = this.getAbsoluteRouteForState(state);\r\n        if (route != null)\r\n            return route.stringify(params);\r\n        return null;\r\n    };\r\n    Router.prototype.reset = function (enterRootState) {\r\n        if (enterRootState === void 0) { enterRootState = true; }\r\n        this.states = {};\r\n        // Implicit root state that is always present\r\n        this.root = this.registerStateInternal({\r\n            name: this.rootStateName,\r\n            url: RouteMatcher_1.route(\"/\")\r\n        });\r\n        if (enterRootState)\r\n            this.go(this.rootStateName, {}, { location: 2 /* replace */ });\r\n    };\r\n    Router.prototype.sync = function (url) {\r\n        if (url == null)\r\n            url = this.app.history.location.pathname; // + app.history.location.search;\r\n        // iterate over registered states to find matching uri\r\n        var keys = Object.keys(this.states);\r\n        var length = keys.length;\r\n        var params;\r\n        for (var i = 0; i < length; i++) {\r\n            var state = this.states[keys[i]];\r\n            var route_1 = this.getAbsoluteRouteForState(state.name);\r\n            if ((params = route_1.parse(url)) != null) {\r\n                this.go(state.name, params, { location: 2 /* replace */ });\r\n                return;\r\n            }\r\n        }\r\n        // not found, enter root state as fallback\r\n        if (this.current() == null)\r\n            this.reload();\r\n    };\r\n    Router.prototype.reload = function () {\r\n        var state;\r\n        var params;\r\n        // reload current state or enter inital root state            \r\n        if (this.current() != null) {\r\n            state = this.current().name;\r\n            params = this.current().params;\r\n        }\r\n        else {\r\n            state = this.rootStateName;\r\n            params = {};\r\n        }\r\n        this.go(state, params, { force: true, location: 2 /* replace */ });\r\n    };\r\n    Router.prototype.getViewComponent = function (viewName) {\r\n        var _current = this.current();\r\n        var result = undefined;\r\n        if (_current.views != null) {\r\n            var component = _current.views[viewName];\r\n            var stateParams = {};\r\n            if (component != null) {\r\n                result = {};\r\n                if (typeof component === \"object\") {\r\n                    result.component = component.component;\r\n                    result.params = component.params || {};\r\n                    result.animations = component.animations;\r\n                }\r\n                else {\r\n                    result.component = component;\r\n                    result.params = {};\r\n                    result.animations = undefined;\r\n                }\r\n                // ensure that only parameters configured at state level surface at view-level\r\n                var parameterNames = this.getViewParameterNamesFromStateConfig(viewName, result.component);\r\n                parameterNames.forEach(function (x) {\r\n                    if (_current.params.hasOwnProperty(x)) {\r\n                        stateParams[x] = _current.params[x];\r\n                    }\r\n                });\r\n                // merge state params into component params\r\n                result.params = Utils_1.extend(stateParams, result.params);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Router.prototype.registerStateInternal = function (state) {\r\n        var _this = this;\r\n        var parts = state.name.split(this.pathSeparator);\r\n        if (state.name !== this.rootStateName) {\r\n            // validate name\r\n            if (parts.forEach(function (path) {\r\n                if (!_this.validPathRegExp.test(path)) {\r\n                    Utils_1.throwError(\"invalid state-path '{0}' (a state-path must start with a character, optionally followed by one or more alphanumeric characters, dashes or underscores)\");\r\n                }\r\n            }))\r\n                ;\r\n        }\r\n        // wrap and store\r\n        state = Utils_1.extend(state, {});\r\n        this.states[state.name] = state;\r\n        if (state.url != null) {\r\n            // create route from string\r\n            if (typeof state.url === \"string\") {\r\n                state.url = RouteMatcher_1.route(state.url);\r\n            }\r\n        }\r\n        else {\r\n            // derive relative route from name\r\n            if (state.name !== this.rootStateName)\r\n                state.url = RouteMatcher_1.route(parts[parts.length - 1]);\r\n            else\r\n                state.url = RouteMatcher_1.route(\"/\");\r\n        }\r\n        // detect root-state override\r\n        if (state.name === this.rootStateName)\r\n            this.root = state;\r\n        return state;\r\n    };\r\n    Router.prototype.pushHistoryState = function (state, title) {\r\n        var hs = {\r\n            stateName: state.name,\r\n            params: state.params,\r\n            title: title != null ? title : document.title\r\n        };\r\n        this.app.history.pushState(hs, \"\", state.url);\r\n    };\r\n    Router.prototype.replaceHistoryState = function (state, title) {\r\n        var hs = {\r\n            stateName: state.name,\r\n            params: state.params,\r\n            title: title != null ? title : document.title\r\n        };\r\n        this.app.history.replaceState(hs, \"\", state.url);\r\n    };\r\n    Router.prototype.mapPath = function (path) {\r\n        // child-relative\r\n        if (path.indexOf(this.pathSeparator) === 0) {\r\n            return this.current().name + path;\r\n        }\r\n        else if (path.indexOf(this.parentPathDirective) === 0) {\r\n            // parent-relative                \r\n            var parent_1 = this.current().name;\r\n            // can't go further up than root\r\n            if (parent_1 === this.rootStateName)\r\n                return parent_1;\r\n            // test parents and siblings until one is found that is registered\r\n            var parts = parent_1.split(this.pathSeparator);\r\n            for (var i = parts.length - 1; i > 0; i--) {\r\n                var tmp = parts.slice(0, i).join(this.pathSeparator);\r\n                // check if parent or sibling relative to current parent exists \r\n                if (this.get(tmp) || this.get(tmp + path.substr(1))) {\r\n                    path = tmp + path.substr(1);\r\n                    return path;\r\n                }\r\n            }\r\n            // make it root relative\r\n            path = this.rootStateName + path.substr(1);\r\n            return path;\r\n        }\r\n        return path;\r\n    };\r\n    Router.prototype.getStateHierarchy = function (name) {\r\n        var parts = name.split(this.pathSeparator);\r\n        var stateName = \"\";\r\n        var result = [];\r\n        var state;\r\n        if (name !== this.rootStateName)\r\n            result.push(this.root);\r\n        for (var i = 0; i < parts.length; i++) {\r\n            if (i > 0)\r\n                stateName += this.pathSeparator + parts[i];\r\n            else\r\n                stateName = parts[i];\r\n            state = this.states[stateName];\r\n            // if not registered, introduce fake state to keep hierarchy intact\r\n            if (state == null) {\r\n                state = {\r\n                    name: stateName,\r\n                    url: RouteMatcher_1.route(stateName)\r\n                };\r\n            }\r\n            result.push(state);\r\n        }\r\n        return result;\r\n    };\r\n    Router.prototype.getAbsoluteRouteForState = function (name, hierarchy) {\r\n        hierarchy = hierarchy != null ? hierarchy : this.getStateHierarchy(name);\r\n        var result = null;\r\n        hierarchy.forEach(function (state) {\r\n            // concat urls\r\n            if (result != null) {\r\n                var route_2 = state.url;\r\n                // individual states may use absolute urls as well\r\n                if (!route_2.isAbsolute)\r\n                    result = result.concat(state.url);\r\n                else\r\n                    result = route_2;\r\n            }\r\n            else {\r\n                result = state.url;\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    Router.prototype.activateState = function (to, params, options) {\r\n        var hierarchy = this.getStateHierarchy(to);\r\n        var stateViews = {};\r\n        var stateParams = {};\r\n        hierarchy.forEach(function (state) {\r\n            // merge views\r\n            if (state.views != null) {\r\n                Utils_1.extend(state.views, stateViews);\r\n            }\r\n            // merge params\r\n            if (state.params != null) {\r\n                Utils_1.extend(state.params, stateParams);\r\n            }\r\n        });\r\n        // merge param overrides\r\n        if (params) {\r\n            Utils_1.extend(params, stateParams);\r\n        }\r\n        // construct resulting state\r\n        var route = this.getAbsoluteRouteForState(to, hierarchy);\r\n        var state = Utils_1.extend(this.states[to], {});\r\n        state.url = route.stringify(params);\r\n        state.views = stateViews;\r\n        state.params = stateParams;\r\n        // perform deep equal against current state\r\n        var _current = this.current();\r\n        if ((options && options.force) || _current == null ||\r\n            _current.name !== to ||\r\n            !Utils_1.isEqual(_current.params, state.params)) {\r\n            // reset views used by previous state that are unused by new state\r\n            if (_current != null && _current.views != null && state.views != null) {\r\n                Object.keys(_current.views).forEach(function (x) {\r\n                    if (!state.views.hasOwnProperty(x)) {\r\n                        state.views[x] = null;\r\n                    }\r\n                });\r\n            }\r\n            // update history\r\n            if (options && options.location) {\r\n                if (options.location === 2 /* replace */)\r\n                    this.replaceHistoryState(state, this.app.title());\r\n                else\r\n                    this.pushHistoryState(state, this.app.title());\r\n            }\r\n            if (_current != null) {\r\n                if (_current.onLeave)\r\n                    _current.onLeave(this.get(_current.name), _current.params);\r\n            }\r\n            // activate\r\n            this.current(state);\r\n            if (state.onEnter)\r\n                state.onEnter(this.get(state.name), params);\r\n        }\r\n    };\r\n    Router.prototype.getViewParameterNamesFromStateConfig = function (view, component) {\r\n        var hierarchy = this.getStateHierarchy(this.current().name);\r\n        var stateParams = {};\r\n        var result = [];\r\n        var config;\r\n        var index = -1;\r\n        // walk the hierarchy backward to figure out when the component was introduced at the specified view-slot\r\n        for (var i = hierarchy.length; i--; i >= 0) {\r\n            config = hierarchy[i];\r\n            if (config.views && config.views[view]) {\r\n                var other = config.views[view];\r\n                if (typeof other === \"object\") {\r\n                    other = other.component;\r\n                }\r\n                if (other === component) {\r\n                    index = i; // found but keep looking\r\n                }\r\n            }\r\n        }\r\n        if (index !== -1) {\r\n            config = hierarchy[index];\r\n            // truncate hierarchy and merge params\r\n            hierarchy = hierarchy.slice(0, index + 1);\r\n            hierarchy.forEach(function (state) {\r\n                // merge params\r\n                if (state.params != null) {\r\n                    Utils_1.extend(state.params, stateParams);\r\n                }\r\n            });\r\n            // extract resulting property names\r\n            result = Object.keys(stateParams);\r\n            // append any route-params\r\n            result = result.concat(config.url.params);\r\n        }\r\n        return result;\r\n    };\r\n    return Router;\r\n})();\r\nexports.Router = Router;\r\n//# sourceMappingURL=Router.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Routing/Router.js\n ** module id = 46\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\n/*\r\n * JavaScript Route Matcher\r\n * http://benalman.com/\r\n *\r\n * Copyright (c) 2011 \"Cowboy\" Ben Alman\r\n * Dual licensed under the MIT and GPL licenses.\r\n * http://benalman.com/about/license/\r\n */\r\n\"use strict\";\r\n// Characters to be escaped with \\. RegExp borrowed from the Backbone router\r\n// but escaped (note: unnecessarily) to keep JSHint from complaining.\r\nvar reEscape = /[\\-\\[\\]{}()+?.,\\\\\\^$|#\\s]/g;\r\n// Match named :param or *splat placeholders.\r\nvar reParam = /([:*])(\\w+)/g;\r\nvar RouteMatcher = (function () {\r\n    // Pass in a route string (or RegExp) plus an optional map of rules, and get\r\n    // back an object with .parse and .stringify methods.\r\n    function RouteMatcher(route, rules) {\r\n        var _this = this;\r\n        // store\r\n        this.route = route;\r\n        this.rules = rules;\r\n        // Object to be returned. The public API.\r\n        // Matched param or splat names, in order\r\n        this.params = [];\r\n        // Route matching RegExp.\r\n        var re = route;\r\n        // Build route RegExp from passed string.\r\n        if (typeof route === \"string\") {\r\n            // Escape special chars.\r\n            re = re.replace(reEscape, \"\\\\$&\");\r\n            // Replace any :param or *splat with the appropriate capture group.\r\n            re = re.replace(reParam, function (_, mode, name) {\r\n                _this.params.push(name);\r\n                // :param should capture until the next / or EOL, while *splat should\r\n                // capture until the next :param, *splat, or EOL.\r\n                return mode === \":\" ? \"([^/]*)\" : \"(.*)\";\r\n            });\r\n            // Add ^/$ anchors and create the actual RegExp.\r\n            re = new RegExp(\"^\" + re + \"$\");\r\n            // Match the passed url against the route, returning an object of params\r\n            // and values.\r\n            this.parse = function (url) {\r\n                var i = 0;\r\n                var param, value;\r\n                var params = {};\r\n                var matches = url.match(re);\r\n                // If no matches, return null.\r\n                if (!matches) {\r\n                    return null;\r\n                }\r\n                // Add all matched :param / *splat values into the params object.\r\n                while (i < _this.params.length) {\r\n                    param = _this.params[i++];\r\n                    value = matches[i];\r\n                    // If a rule exists for this param and it doesn't validate, return null.\r\n                    if (rules && param in rules && !_this.validateRule(rules[param], value)) {\r\n                        return null;\r\n                    }\r\n                    params[param] = value;\r\n                }\r\n                return params;\r\n            };\r\n            // Build path by inserting the given params into the route.\r\n            this.stringify = function (params) {\r\n                params = params || {};\r\n                var param, re;\r\n                var result = route;\r\n                // Insert each passed param into the route string. Note that this loop\r\n                // doesn't check .hasOwnProperty because this script doesn't support\r\n                // modifications to Object.prototype.\r\n                for (param in params) {\r\n                    re = new RegExp(\"[:*]\" + param + \"\\\\b\");\r\n                    result = result.replace(re, params[param]);\r\n                }\r\n                // Missing params should be replaced with empty string.\r\n                return result.replace(reParam, \"\");\r\n            };\r\n        }\r\n        else {\r\n            // RegExp route was passed. This is super-simple.\r\n            this.parse = function (url) {\r\n                var matches = url.match(re);\r\n                return matches && { captures: matches.slice(1) };\r\n            };\r\n            // There's no meaningful way to stringify based on a RegExp route, so\r\n            // return empty string.\r\n            this.stringify = function () { return \"\"; };\r\n        }\r\n    }\r\n    RouteMatcher.prototype.stripTrailingSlash = function (route) {\r\n        if (route.length === 0 || route === \"/\" || route.lastIndexOf(\"/\") !== route.length - 1)\r\n            return route;\r\n        return route.substr(0, route.length - 1);\r\n    };\r\n    Object.defineProperty(RouteMatcher.prototype, \"isAbsolute\", {\r\n        get: function () {\r\n            return this.route.indexOf(\"/\") === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RouteMatcher.prototype.concat = function (route) {\r\n        var other = route;\r\n        var a = this.stripTrailingSlash(this.route);\r\n        var b = this.stripTrailingSlash(other.route);\r\n        var rules = null;\r\n        // check for conflicting rules\r\n        if (other.rules) {\r\n            if (this.rules) {\r\n                Object.keys(this.rules).forEach(function (rule) {\r\n                    if (other.rules.hasOwnProperty(rule)) {\r\n                        Utils_1.throwError(\"route '{0}' and '{1}' have conflicting rule '{2}\", a, b, rule);\r\n                    }\r\n                });\r\n                rules = Utils_1.extend(this.rules, Utils_1.extend(other.rules, {}));\r\n            }\r\n            else {\r\n                rules = Utils_1.extend(other.rules, {});\r\n            }\r\n        }\r\n        else if (this.rules) {\r\n            rules = Utils_1.extend(this.rules, {});\r\n        }\r\n        if (a === \"/\")\r\n            a = \"\";\r\n        return new RouteMatcher(a + \"/\" + b, rules);\r\n    };\r\n    // Test to see if a value matches the corresponding rule.\r\n    RouteMatcher.prototype.validateRule = function (rule, value) {\r\n        // For a given rule, get the first letter of the string name of its\r\n        // constructor function. \"R\" -> RegExp, \"F\" -> Function (these shouldn't\r\n        // conflict with any other types one might specify). Note: instead of\r\n        // getting .toString from a new object {} or Object.prototype, I'm assuming\r\n        // that exports will always be an object, and using its .toString method.\r\n        // Bad idea? Let me know by filing an issue\r\n        var type = this.toString.call(rule).charAt(8);\r\n        // If regexp, match. If function, invoke. Otherwise, compare. Note that ==\r\n        // is used because type coercion is needed, as `value` will always be a\r\n        // string, but `rule` might not.\r\n        return type === \"R\" ? rule.test(value) : type === \"F\" ? rule(value) : rule == value;\r\n    };\r\n    return RouteMatcher;\r\n})();\r\nexports.RouteMatcher = RouteMatcher;\r\nfunction route(route, rules) {\r\n    return new RouteMatcher(route, rules);\r\n}\r\nexports.route = route;\r\n//# sourceMappingURL=RouteMatcher.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Routing/RouteMatcher.js\n ** module id = 47\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar ScheduledSubject_1 = require(\"./../Core/ScheduledSubject\");\r\n// ReactiveUI's MessageBus\r\n\"use strict\";\r\nvar MessageBus = (function () {\r\n    function MessageBus() {\r\n        //////////////////////////////////\r\n        // Implementation\r\n        this.messageBus = {};\r\n        this.schedulerMappings = {};\r\n    }\r\n    //////////////////////////////////\r\n    // IMessageBus\r\n    MessageBus.prototype.listen = function (contract) {\r\n        return this.setupSubjectIfNecessary(contract).skip(1);\r\n    };\r\n    MessageBus.prototype.isRegistered = function (contract) {\r\n        return this.messageBus.hasOwnProperty(contract);\r\n    };\r\n    MessageBus.prototype.registerMessageSource = function (source, contract) {\r\n        return source.subscribe(this.setupSubjectIfNecessary(contract));\r\n    };\r\n    MessageBus.prototype.sendMessage = function (message, contract) {\r\n        this.setupSubjectIfNecessary(contract).onNext(message);\r\n    };\r\n    MessageBus.prototype.registerScheduler = function (scheduler, contract) {\r\n        this.schedulerMappings[contract] = scheduler;\r\n    };\r\n    MessageBus.prototype.setupSubjectIfNecessary = function (contract) {\r\n        var ret = this.messageBus[contract];\r\n        if (ret == null) {\r\n            ret = ScheduledSubject_1.createScheduledSubject(this.getScheduler(contract), null, new Rx.BehaviorSubject(undefined));\r\n            this.messageBus[contract] = ret;\r\n        }\r\n        return ret;\r\n    };\r\n    MessageBus.prototype.getScheduler = function (contract) {\r\n        var scheduler = this.schedulerMappings[contract];\r\n        return scheduler || Rx.Scheduler.currentThread;\r\n    };\r\n    return MessageBus;\r\n})();\r\nexports.default = MessageBus;\r\n//# sourceMappingURL=MessageBus.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/MessageBus.js\n ** module id = 48\n ** module chunks = 0\n **/","exports.version = '0.9.87';\r\n//# sourceMappingURL=Version.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Version.js\n ** module id = 49\n ** module chunks = 0\n **/","/// <reference path=\"./Interfaces.ts\" />\r\nvar Utils_1 = require(\"./Core/Utils\");\r\nvar IID_1 = require(\"./IID\");\r\nvar ScheduledSubject_1 = require(\"./Core/ScheduledSubject\");\r\nvar Reflect_1 = require(\"./Core/Reflect\");\r\nvar Injector_1 = require(\"./Core/Injector\");\r\nvar res = require(\"./Core/Resources\");\r\n\"use strict\";\r\nvar RxObsConstructor = Rx.Observable; // this hack is neccessary because the .d.ts for RxJs declares Observable as an interface)\r\n/**\r\n* Creates an read-only observable property with an optional default value from the current (this) observable\r\n* (Note: This is the equivalent to Knockout's ko.computed)\r\n* @param {T} initialValue? Optional initial value, valid until the observable produces a value\r\n*/\r\nfunction toProperty(initialValue, scheduler) {\r\n    scheduler = scheduler || Rx.Scheduler.currentThread;\r\n    // initialize accessor function (read-only)\r\n    var accessor = function propertyAccessor(newVal) {\r\n        if (arguments.length > 0) {\r\n            Utils_1.throwError(\"attempt to write to a read-only observable property\");\r\n        }\r\n        if (accessor.sub == null) {\r\n            accessor.sub = accessor._source.connect();\r\n        }\r\n        return accessor.value;\r\n    };\r\n    Reflect_1.Implements(IID_1.default.IObservableProperty)(accessor);\r\n    Reflect_1.Implements(IID_1.default.IDisposable)(accessor);\r\n    //////////////////////////////////\r\n    // IDisposable implementation\r\n    accessor.dispose = function () {\r\n        if (accessor.sub) {\r\n            accessor.sub.dispose();\r\n            accessor.sub = null;\r\n        }\r\n    };\r\n    //////////////////////////////////\r\n    // IObservableProperty<T> implementation\r\n    accessor.value = initialValue;\r\n    // setup observables\r\n    accessor.changedSubject = new Rx.Subject();\r\n    accessor.changed = accessor.changedSubject\r\n        .publish()\r\n        .refCount();\r\n    accessor.changingSubject = new Rx.Subject();\r\n    accessor.changing = accessor.changingSubject\r\n        .publish()\r\n        .refCount();\r\n    accessor.source = this;\r\n    accessor.thrownExceptions = ScheduledSubject_1.createScheduledSubject(scheduler, Injector_1.injector.get(res.app).defaultExceptionHandler);\r\n    //////////////////////////////////\r\n    // implementation\r\n    var firedInitial = false;\r\n    accessor.sub = this\r\n        .distinctUntilChanged()\r\n        .subscribe(function (x) {\r\n        // Suppress a non-change between initialValue and the first value\r\n        // from a Subscribe\r\n        if (firedInitial && x === accessor.value) {\r\n            return;\r\n        }\r\n        firedInitial = true;\r\n        accessor.changingSubject.onNext(x);\r\n        accessor.value = x;\r\n        accessor.changedSubject.onNext(x);\r\n    }, function (x) { return accessor.thrownExceptions.onNext(x); });\r\n    return accessor;\r\n}\r\nRxObsConstructor.prototype.toProperty = toProperty;\r\nRxObsConstructor.prototype.continueWith = function () {\r\n    var args = Utils_1.args2Array(arguments);\r\n    var val = args.shift();\r\n    var obs = undefined;\r\n    if (Utils_1.isRxObservable(val)) {\r\n        obs = val;\r\n    }\r\n    else if (Utils_1.isFunction(val)) {\r\n        var action = val;\r\n        obs = Rx.Observable.startDeferred(action);\r\n    }\r\n    return this.selectMany(function (_) { return obs; });\r\n};\r\nRxObsConstructor.startDeferred = function (action) {\r\n    return Rx.Observable.defer(function () {\r\n        return Rx.Observable.create(function (observer) {\r\n            var cancelled = false;\r\n            if (!cancelled)\r\n                action();\r\n            observer.onNext(undefined);\r\n            observer.onCompleted();\r\n            return Rx.Disposable.create(function () { return cancelled = true; });\r\n        });\r\n    });\r\n};\r\nfunction install() {\r\n    // deliberately left blank    \r\n}\r\nexports.install = install;\r\n//# sourceMappingURL=RxExtensions.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/RxExtensions.js\n ** module id = 50\n ** module chunks = 0\n **/","/// <reference path=\"../Interfaces.ts\" />\r\nvar Utils_1 = require(\"../Core/Utils\");\r\n\"use strict\";\r\nfunction toElementList(element) {\r\n    var nodes;\r\n    if (element instanceof Node || element instanceof HTMLElement)\r\n        nodes = [element];\r\n    else if (Array.isArray(element))\r\n        nodes = element;\r\n    else if (element instanceof NodeList)\r\n        nodes = Utils_1.nodeListToArray(element);\r\n    else\r\n        Utils_1.throwError(\"invalid argument: element\");\r\n    var elements = nodes.filter(function (x) { return x.nodeType === 1; });\r\n    return elements;\r\n}\r\nfunction parseTimingValue(x) {\r\n    // it's always safe to consider only second values and omit `ms` values since\r\n    // getComputedStyle will always handle the conversion for us\r\n    if (x.charAt(x.length - 1) === \"s\") {\r\n        x = x.substring(0, x.length - 1);\r\n    }\r\n    var value = parseFloat(x) || 0;\r\n    return value;\r\n}\r\nfunction getMaximumTransitionDuration(el) {\r\n    var str = getComputedStyle(el)[\"transitionDuration\"];\r\n    var maxValue = 0;\r\n    var values = str.split(/\\s*,\\s*/);\r\n    values.forEach(function (x) {\r\n        var value = parseTimingValue(x);\r\n        maxValue = maxValue ? Math.max(value, maxValue) : value;\r\n    });\r\n    return maxValue * 1000;\r\n}\r\nfunction getMaximumTransitionDelay(el) {\r\n    var str = getComputedStyle(el)[\"transitionDelay\"];\r\n    var maxValue = 0;\r\n    var values = str.split(/\\s*,\\s*/);\r\n    values.forEach(function (x) {\r\n        var value = Math.max(0, parseTimingValue(x));\r\n        maxValue = maxValue ? Math.max(value, maxValue) : value;\r\n    });\r\n    return maxValue * 1000;\r\n}\r\nfunction getKeyframeAnimationDuration(el) {\r\n    var durationStr = getComputedStyle(el)[\"animationDuration\"] || getComputedStyle(el)[\"webkitAnimationDuration\"] || \"0s\";\r\n    var delayStr = getComputedStyle(el)[\"animationDelay\"] || getComputedStyle(el)[\"webkitAnimationDelay\"] || \"0s\";\r\n    var duration = parseTimingValue(durationStr);\r\n    var delay = parseTimingValue(delayStr);\r\n    return (duration + delay) * 1000;\r\n}\r\nfunction scriptedAnimation(run, prepare, complete) {\r\n    var result = {};\r\n    if (prepare) {\r\n        result.prepare = function (nodes, params) {\r\n            var elements = toElementList(nodes);\r\n            elements.forEach(function (x) { return prepare(x, params); });\r\n        };\r\n    }\r\n    else {\r\n        result.prepare = Utils_1.noop;\r\n    }\r\n    result.run = function (nodes, params) {\r\n        return Rx.Observable.defer(function () {\r\n            var elements = toElementList(nodes);\r\n            if (elements.length === 0)\r\n                return Rx.Observable.return(undefined);\r\n            return Rx.Observable.combineLatest(elements.map(function (x) { return run(x, params); }), Utils_1.noop);\r\n        });\r\n    };\r\n    if (complete) {\r\n        result.complete = function (nodes, params) {\r\n            var elements = toElementList(nodes);\r\n            elements.forEach(function (x) { return complete(x, params); });\r\n        };\r\n    }\r\n    else {\r\n        result.complete = Utils_1.noop;\r\n    }\r\n    return result;\r\n}\r\nfunction cssTransitionAnimation(prepare, run, complete) {\r\n    var result = {};\r\n    var prepToAdd;\r\n    var prepToRemove;\r\n    var runToAdd;\r\n    var runToRemove;\r\n    var completeToAdd;\r\n    var completeToRemove;\r\n    if (prepare) {\r\n        var prepIns;\r\n        if (typeof prepare === \"string\") {\r\n            prepare = prepare.split(/\\s+/).map(function (x) { return x.trim(); }).filter(function (x) { return x; });\r\n        }\r\n        if (typeof prepare[0] === \"string\") {\r\n            // convert into wx.IAnimationCssClassInstruction\r\n            prepIns = prepare.map(function (x) { return { css: x, add: true }; });\r\n        }\r\n        else {\r\n            prepIns = prepare;\r\n        }\r\n        prepToAdd = prepIns.filter(function (x) { return x.add; }).map(function (x) { return x.css; });\r\n        prepToRemove = prepIns.filter(function (x) { return !x.add || x.remove; }).map(function (x) { return x.css; });\r\n        result.prepare = function (nodes, params) {\r\n            var elements = toElementList(nodes);\r\n            if (prepToAdd && prepToAdd.length)\r\n                elements.forEach(function (x) { return Utils_1.toggleCssClass.apply(null, [x, true].concat(prepToAdd)); });\r\n            if (prepToRemove && prepToRemove.length)\r\n                elements.forEach(function (x) { return Utils_1.toggleCssClass.apply(null, [x, false].concat(prepToRemove)); });\r\n        };\r\n    }\r\n    var runIns;\r\n    if (typeof run === \"string\") {\r\n        run = run.split(/\\s+/).map(function (x) { return x.trim(); }).filter(function (x) { return x; });\r\n    }\r\n    if (typeof run[0] === \"string\") {\r\n        // convert into wx.IAnimationCssClassInstruction\r\n        runIns = run.map(function (x) { return { css: x, add: true }; });\r\n    }\r\n    else {\r\n        runIns = run;\r\n    }\r\n    runToAdd = runIns.filter(function (x) { return x.add; }).map(function (x) { return x.css; });\r\n    runToRemove = runIns.filter(function (x) { return !x.add || x.remove; }).map(function (x) { return x.css; });\r\n    result.run = function (nodes, params) {\r\n        return Rx.Observable.defer(function () {\r\n            var elements = toElementList(nodes);\r\n            if (elements.length === 0)\r\n                return Rx.Observable.return(undefined);\r\n            var obs = Rx.Observable.combineLatest(elements.map(function (x) {\r\n                var duration = Math.max(getMaximumTransitionDuration(x) + getMaximumTransitionDelay(x), getKeyframeAnimationDuration(x));\r\n                return Rx.Observable.timer(duration);\r\n            }), Utils_1.noop);\r\n            // defer animation-start to avoid problems with transitions on freshly added elements \r\n            Rx.Observable.timer(1).subscribe(function () {\r\n                if (runToAdd && runToAdd.length)\r\n                    elements.forEach(function (x) { return Utils_1.toggleCssClass.apply(null, [x, true].concat(runToAdd)); });\r\n                if (runToRemove && runToRemove.length)\r\n                    elements.forEach(function (x) { return Utils_1.toggleCssClass.apply(null, [x, false].concat(runToRemove)); });\r\n            });\r\n            return obs;\r\n        });\r\n    };\r\n    var completeIns;\r\n    if (complete) {\r\n        if (typeof complete === \"string\") {\r\n            complete = complete.split(/\\s+/).map(function (x) { return x.trim(); }).filter(function (x) { return x; });\r\n        }\r\n        if (typeof complete[0] === \"string\") {\r\n            // convert into wx.IAnimationCssClassInstruction\r\n            completeIns = complete.map(function (x) { return { css: x, add: true }; });\r\n        }\r\n        else {\r\n            completeIns = complete;\r\n        }\r\n        completeToAdd = completeIns.filter(function (x) { return x.add; }).map(function (x) { return x.css; });\r\n        completeToRemove = completeIns.filter(function (x) { return !x.add || x.remove; }).map(function (x) { return x.css; });\r\n    }\r\n    else {\r\n        // default to remove classes added during prepare & run stages\r\n        completeToRemove = [];\r\n        if (prepToAdd && prepToAdd.length)\r\n            completeToRemove = completeToRemove.concat(prepToAdd);\r\n        if (runToAdd && runToAdd.length)\r\n            completeToRemove = completeToRemove.concat(runToAdd);\r\n    }\r\n    result.complete = function (nodes, params) {\r\n        var elements = toElementList(nodes);\r\n        if (completeToAdd && completeToAdd.length)\r\n            elements.forEach(function (x) { return Utils_1.toggleCssClass.apply(null, [x, true].concat(completeToAdd)); });\r\n        if (completeToRemove && completeToRemove.length)\r\n            elements.forEach(function (x) { return Utils_1.toggleCssClass.apply(null, [x, false].concat(completeToRemove)); });\r\n    };\r\n    return result;\r\n}\r\nfunction animation() {\r\n    var args = Utils_1.args2Array(arguments);\r\n    var val = args.shift();\r\n    if (typeof val === \"function\") {\r\n        return scriptedAnimation(val, args.shift(), args.shift());\r\n    }\r\n    return cssTransitionAnimation(val, args.shift(), args.shift());\r\n}\r\nexports.animation = animation;\r\n//# sourceMappingURL=Animation.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./build/src/es5/Core/Animation.js\n ** module id = 51\n ** module chunks = 0\n **/"],"sourceRoot":""}