<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <title>WebRx - Component-Registration</title>

        <meta property="og:type" content="website" /> 
        <meta property="og:title" content="WebRx - Component-Registration" /> 
        <meta property="og:site_name" content="WebRx"/>         
        
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <link rel="apple-touch-icon" sizes="57x57" href="/images/favicon/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

        <link rel='stylesheet' type='text/css' href='/bundles/7036170bedefe02d836fe1b02f16ec3f.css' />


        <script type='text/javascript' src='/bundles/830e693822865a52409118ee8f723736.js'></script>

      </head>
    <body>
        <h1 id="logoh1">WebRx - Component-Registration</h1>
        <div id="main-container" class="container">
            <nav class="navbar navbar-inverse">
              <div class="container-fluid">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </button>
                    <a class="navbar-brand" href="/"><img src="/images/Logo.png" height="28"/><h3>WebRx</h3></a>
                </div>

                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                  <ul class="nav navbar-nav navbar-right">
                    <li><a href="/docs/examples.html">Examples</a></li>
                    <li><a href="/docs">Documentation</a></li>

                    <li><a href="https://github.com/WebRxJS/WebRx"><i class="fa fa-github"></i> Source</a></li>
                      <li><a target="_blank" href="https://twitter.com/webrxjs"><i class="fa fa-twitter"></i> News</a></li>
                    </ul>
                </div>
              </div>
            </nav>

          <style>
     .content-panel {
         padding: 15px;
     }
</style>

<div class="content-panel docs syntax-theme-monokai">
    <div class="row">
        <div class="col-md-3">
            <div class="index">
                <h3>Getting started</h3>
                <ul>
                    <li><a href="../docs/index.html#start">How WebRx works and what benefits it brings</a></li>
                </ul>

                <h3>Binding syntax</h3>
                <ul>
                    <li><a href="../docs/binding-syntax.html#start">The <i>data-bind</i> syntax</a></li>
                    <li><a href="../docs/binding-context.html#start">The binding context</a></li>
                </ul>

                <h3>Core Components</h3>
                <ul>
                    <li><a href="../docs/observable-properties.html#start">Observable Properties</a></li>
                    <li><a href="../docs/output-properties.html#start">Output Properties</a></li>
                    <li><a href="../docs/observable-lists.html#start">Observable Lists</a></li>
                    <li><a href="../docs/commands.html#start">Commands</a></li>
                </ul>

                <h3>Bindings</h3>

                <h4>Controlling text and appearance</h4>
                <ul>
                    <li><a href="../docs/visible-binding.html#start">The <i>visible</i> binding</a></li>
                    <li><a href="../docs/hidden-binding.html#start">The <i>hidden</i> binding</a></li>
                    <li><a href="../docs/text-binding.html#start">The <i>text</i> binding</a></li>
                    <li><a href="../docs/html-binding.html#start">The <i>html</i> binding</a></li>
                    <li><a href="../docs/css-binding.html#start">The <i>css</i> binding</a></li>
                    <li><a href="../docs/style-binding.html#start">The <i>style</i> binding</a></li>
                    <li><a href="../docs/attr-binding.html#start">The <i>attr</i> binding</a></li>
                </ul>

                <h4>Control flow</h4>
                <ul>
                    <li><a href="../docs/foreach-binding.html#start">The <i>foreach</i> binding</a></li>
                    <li><a href="../docs/if-binding.html#start">The <i>if</i> binding</a></li>
                    <li><a href="../docs/ifnot-binding.html#start">The <i>ifnot</i> binding</a></li>
                    <li><a href="../docs/with-binding.html#start">The <i>with</i> binding</a></li>
                </ul>

                <h4>Working with form fields</h4>
                <ul>
                    <li><a href="../docs/command-binding.html#start">The <i>command</i> binding</a></li>
                    <li><a href="../docs/event-binding.html#start">The <i>event</i> binding</a></li>
                    <li><a href="../docs/enabled-binding.html#start">The <i>enabled</i> binding</a></li>
                    <li><a href="../docs/disabled-binding.html#start">The <i>disabled</i> binding</a></li>
                    <li><a href="../docs/value-binding.html#start">The <i>value</i> binding</a></li>
                    <li><a href="../docs/textinput-binding.html#start">The <i>textInput</i> binding</a></li>
                    <li><a href="../docs/hasfocus-binding.html#start">The <i>hasFocus</i> binding</a></li>
                    <li><a href="../docs/checked-binding.html#start">The <i>checked</i> binding</a></li>
                    <li><a href="../docs/selected-value-binding.html#start">The <i>selectedValue</i> binding</a></li>
                </ul>

                <!--
                <h3>Creating custom bindings</h3>
                <ul>
                    <li><a href="../docs/custom-bindings.html#start">Creating custom bindings</a></li>
                    <li><a href="../docs/custom-bindings-controlling-descendant-bindings.html#start">Controlling descendant bindings</a></li>
                    <li><a href="../docs/custom-bindings-disposal.html#start">Custom disposal logic</a></li>
                </ul>
                -->

                <h3>Components</h3>
                <ul>
                    <li><a href="../docs/component-overview.html#start">Overview: What components and custom elements offer</a></li>
                    <li><a href="../docs/component-registration.html#start">Defining and registering components</a></li>
                    <li><a href="../docs/component-binding.html#start">The <i>component</i> binding</a></li>
                    <!-- <li><a href="../docs/component-custom-elements.html#start">Using custom elements</a></li>
                    <li><a href="../docs/component-built-in.html#start">Built-in components</a></li> -->
                </ul>

                <h3>Modules</h3>
                <ul>
                    <li><a href="../docs/module-overview.html#start">Overview: What modules offer</a></li>
                    <li><a href="../docs/module-registration.html#start">Defining and registering modules</a></li>
                    <li><a href="../docs/module-binding.html#start">The <i>module</i> binding</a></li>
                </ul>

                <h3>Routing</h3>
                <ul>
                    <li><a href="../docs/routing-overview.html#start">Overview: Routing architecture</a></li>
                    <li><a href="../docs/routing-registration.html#start">Defining and registering routing states</a></li>
                    <li><a href="../docs/view-binding.html#start">The <i>view</i> binding</a></li>
                    <li><a href="../docs/sref-binding.html#start">The <i>sref</i> binding</a></li>
                    <li><a href="../docs/sactive-binding.html#start">The <i>sactive</i> binding</a></li>
                </ul>

                <h3>Dependency-Injection</h3>
                <ul>
                    <li><a href="../docs/dependency-injection-overview.html#start">Overview: Dependency Injection</a></li>
                    <li><a href="../docs/dependency-registration.html#start">Defining and registering dependencies</a></li>
                </ul>

                <h3>Messaging</h3>
                <ul>
                    <li><a href="../docs/message-bus.html#start">Overview: Messaging</a></li>
                </ul>

                <!--
                <h3>Further techniques</h3>
                <ul>
                    <li><a href="../docs/unobtrusive-event-handling.html#start">Unobtrusive event handling</a></li>
                    <li><a href="../docs/binding-preprocessing.html#start">Extending Webrx's binding syntax</a></li>
                </ul>
                -->

                <h3>API Docs</h3>
                <ul>
                    <li><a href="../api/modules/_interfaces_.wx.html">Module <code>wx</code></a></li>
                </ul>

                <h3>More information</h3>
                <ul>
                    <li><a href="../docs/browser-support.html#start">Browser support</a></li>
                    <li><a href="../docs/benchmarks.html#start">Benchmarks</a></li>
                </ul>
            </div>
        </div>

        <div id="start" class="col-md-9">
            <div class="body"><h1>Component-Registration</h1>

<p>Just like binding-handlers, and expresion-filters, components are <a href="/docs/module-overview.html#start">module-scoped-resources</a>
that can either be registered with the global application-module <code>wx.app</code> or a custom-module.</p>

<p>For WebRx to be able to load and instantiate your components, you must register them using <code>wx.app.component()</code>,
providing a configuration as described here.</p>

<p>You can register a component as follows:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;some-component-name&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">see</span> <span class="nx">below</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">template</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">see</span> <span class="nx">below</span><span class="o">&gt;</span>
<span class="p">});</span>
</code></pre></div>
<p>or to register the component with a specific <a href="/docs/module-overview.html#start">module</a>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">&quot;my-module&quot;</span><span class="p">).</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;some-component-name&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">see</span> <span class="nx">below</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="nx">template</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">see</span> <span class="nx">below</span><span class="o">&gt;</span>
<span class="p">});</span>
</code></pre></div>
<p>The component name can be any non-empty string. It&#39;s recommended, but not mandatory, to use 
lowercase dash-separated strings (such as your-component-name) so that the component name is 
valid to use as a custom element.</p>

<p><code>viewModel</code> is optional, and can take any of the viewModel formats described below.
<code>template</code> is required, and can take any of the template formats described below.
If no viewmodel is given, the component is treated as a simple block of HTML that will be bound 
to any parameters passed to the component.</p>

<h2>Specifying a viewmodel</h2>

<p>Viewmodels can be specified in any of the following forms:</p>

<h3>A constructor function</h3>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">SomeComponentViewModel</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// &#39;params&#39; is an object whose key/value pairs are the parameters</span>
    <span class="c1">// passed from the component binding or custom element.</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">someProperty</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">something</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">SomeComponentViewModel</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">doSomething</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">};</span>

<span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="nx">SomeComponentViewModel</span><span class="p">,</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>WebRx will invoke your constructor once for each instance of the component, producing a separate viewmodel object for each. 
Properties on the resulting object or its prototype chain (e.g., <code>someProperty</code> and <code>doSomething</code> in the example above) 
are available for binding in the component&#39;s view.</p>

<h3>An inline-array-annotated constructor function</h3>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">injector</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;greeter&quot;</span><span class="p">,</span> <span class="p">[</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">greet</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">...</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}]);</span>

<span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;greeter&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">greeter</span><span class="p">,</span> <span class="nx">componentParams</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">otherProperty</span> <span class="o">=</span> <span class="nx">greeter</span><span class="p">.</span><span class="nx">greet</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">someProperty</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">something</span><span class="p">;</span>
    <span class="p">}],</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<h3>An injectable</h3>

<p>Alternatively, you can specifiy the identifier of an injectable which is to be resolved through WebRx&#39;s <a href="/docs/dependency-injection-overview.html#start">injector</a>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">{</span> <span class="nx">resolve</span><span class="o">:</span> <span class="s2">&quot;some-injectable-identifier&quot;</span> <span class="p">},</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>In this case, the component-binding will pass the inline-annotated array to the <a href="/docs/dependency-injection-overview.html#start">Injector&#39;s</a> 
<code>resolve</code> method to construct the view-model. Any dependencies listed in the annotated-array will be resolved and passed to your 
constructor function. In the example above the view-model&#39;s constructor function will receive a <code>greeter</code> instance as first argument.
The second argument will be the component arguments.</p>

<h3>A promise</h3>

<p>A view-model can also be resolved through a <a href="http://promises-aplus.github.com/promises-spec">Promises/A+</a> compliant or 
<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">ES6-compliant</a> Promise:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">{</span> <span class="nx">promise</span><span class="o">:</span> <span class="nx">promiseInstance</span> <span class="p">},</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>Compatible implementations can be found in any number of libraries such as Angular, jQuery, Dojo, WinJS, 
and even libraries dedicated to them such as Q or when.js.</p>

<p><strong>Note</strong>: It is necessary to specify <code>viewModel: { promise: object }</code>, and not just <code>viewModel: object</code>. 
This differentiates from the other cases below.</p>

<h3>A shared object instance</h3>

<p>If you want all instances of your component to share the same viewmodel object instance (which is not usually desirable):</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">sharedViewModelInstance</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span> <span class="p">};</span>

<span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">{</span> <span class="nx">instance</span><span class="o">:</span> <span class="nx">sharedViewModelInstance</span> <span class="p">},</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Note</strong>: It is necessary to specify <code>viewModel: { instance: object }</code>, and not just <code>viewModel: object</code>. This differentiates from the other cases below.</p>

<h3>An AMD module</h3>

<p>If you have an AMD loader (such as require.js) already in your page, then you can use it to fetch a viewmodel. 
For more details about how this works, see how WebRx loads components via AMD below. Example:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">{</span> <span class="nx">require</span><span class="o">:</span> <span class="s1">&#39;some/module/name&#39;</span> <span class="p">},</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>The returned AMD module object can be in any of the forms allowed for viewmodels. So, it can be a constructor function, e.g.:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// AMD module whose value is a component viewmodel constructor</span>
<span class="nx">define</span><span class="p">([</span><span class="s1">&#39;webrx&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">wx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">MyViewModel</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">MyViewModel</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<p>… or a shared object instance, e.g.:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// AMD module whose value is a shared component viewmodel instance</span>
<span class="nx">define</span><span class="p">([</span><span class="s1">&#39;webrx&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">wx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">MyViewModel</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nx">instance</span><span class="o">:</span> <span class="k">new</span> <span class="nx">MyViewModel</span><span class="p">()</span> <span class="p">};</span>
<span class="p">});</span>
</code></pre></div>
<p>… or a createViewModel function, e.g.:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// AMD module whose value is a &#39;createViewModel&#39; function</span>
<span class="nx">define</span><span class="p">([</span><span class="s1">&#39;webrx&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">wx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">myViewModelFactory</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="nx">componentInfo</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// return something</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nx">createViewModel</span><span class="o">:</span> <span class="nx">myViewModelFactory</span> <span class="p">};</span>
<span class="p">});</span>
</code></pre></div>
<p>… or even, though it&#39;s unlikely you&#39;d want to do this, a reference to a different AMD module, e.g.:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// AMD module whose value is a reference to a different AMD module,</span>
<span class="c1">// which in turn can be in any of these formats</span>
<span class="nx">define</span><span class="p">([</span><span class="s1">&#39;webrx&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">wx</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">module</span><span class="o">:</span> <span class="s1">&#39;some/other/module&#39;</span> <span class="p">};</span>
<span class="p">});</span>
</code></pre></div>
<h2>Specifying a template</h2>

<p>Templates can be specified in any of the following forms. The most commonly useful are existing element IDs and AMD modules.</p>

<h3>An existing element ID</h3>

<p>For example, the following element:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;template</span> <span class="na">id=</span><span class="s">&#39;my-component-template&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1</span> <span class="na">data-bind=</span><span class="s">&#39;text: title&#39;</span><span class="nt">&gt;&lt;/h1&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">data-bind=</span><span class="s">&#39;click: doSomething&#39;</span><span class="nt">&gt;</span>Click me right now<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/template&gt;</span>
</code></pre></div>
<p>… can be used as the template for a component by specifying its ID:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">{</span> <span class="nx">element</span><span class="o">:</span> <span class="s1">&#39;my-component-template&#39;</span> <span class="p">},</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>Note that only the nodes inside the specified element will be cloned into each instance of the component. 
The container element will not be treated as part of the component template.</p>

<p>You&#39;re not limited to using template elements, but these are convenient (on browsers that support them) 
since they don&#39;t get rendered on their own. Any other element type works too.</p>

<h3>An existing element instance</h3>

<p>If you have a reference to a DOM element in your code, you can use it as a container for template markup:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">elemInstance</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;my-component-template&#39;</span><span class="p">);</span>

<span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">{</span> <span class="nx">element</span><span class="o">:</span> <span class="nx">elemInstance</span> <span class="p">},</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>Again, only the nodes inside the specified element will be cloned for use as the component&#39;s template.</p>

<h3>A string of markup</h3>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;&lt;h1 data-bind=&quot;text: title&quot;&gt;&lt;/h1&gt;\</span>
<span class="s1">               &lt;button data-bind=&quot;click: doSomething&quot;&gt;Clickety&lt;/button&gt;&#39;</span><span class="p">,</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>This is mainly useful when you&#39;re fetching the markup from somewhere programmatically (e.g., AMD - see below), 
or as a build system output that packages components for distribution, since it&#39;s not very convenient to 
manually edit HTML as a JavaScript string literal.</p>

<h3>An array of DOM nodes</h3>

<p>If you&#39;re building configurations programmatically and you have an array of DOM nodes, you can use them as a component template:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myNodes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;first-node&#39;</span><span class="p">),</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;second-node&#39;</span><span class="p">),</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;third-node&#39;</span><span class="p">)</span>
<span class="p">];</span>

<span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">template</span><span class="o">:</span> <span class="nx">myNodes</span><span class="p">,</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>In this case, all the specified nodes (and their descendants) will be cloned and concatenated into each copy of the component that gets instantiated.</p>

<h3>A document fragment</h3>

<p>If you&#39;re building configurations programmatically and you have a DocumentFragment object, you can use it as a component template:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">template</span><span class="o">:</span> <span class="nx">someDocumentFragmentInstance</span><span class="p">,</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>Since document fragments can have multiple top-level nodes, the entire document fragment (not just descendants of top-level nodes) 
is treated as the component template.</p>

<h3>A promise</h3>

<p>A template can also be resolved through a <a href="http://promises-aplus.github.com/promises-spec">Promises/A+</a> compliant or 
<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">ES6-compliant</a> Promise:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">{</span> <span class="nx">promise</span><span class="o">:</span> <span class="nx">promiseInstance</span> <span class="p">},</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>Compatible implementations can be found in any number of libraries such as Angular, jQuery, Dojo, WinJS, 
and even libraries dedicated to them such as Q or when.js.</p>

<p><strong>Note</strong>: It is necessary to specify <code>template: { promise: object }</code>, and not just <code>template: object</code>.</p>

<h3>An injectable</h3>

<p>Alternatively, you can specifiy the identifier of an injectable which is to be resolved through WebRx&#39;s <a href="/docs/dependency-injection-overview.html#start">injector</a>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">{</span> <span class="nx">resolve</span><span class="o">:</span> <span class="s2">&quot;some-injectable-identifier&quot;</span> <span class="p">},</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>In this case it is assumed that the injectable-resolves to an array of Nodes.</p>

<h3>An AMD module</h3>

<p>If you have an AMD loader (such as require.js) already in your page, then you can use it to fetch a template. 
For more details about how this works, see how WebRx loads components via AMD below. Example:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">{</span> <span class="nx">require</span><span class="o">:</span> <span class="s1">&#39;some/template&#39;</span> <span class="p">},</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>The returned AMD module object can be in any of the forms allowed for viewmodels. So, it can be a string of markup, e.g. fetched using require.js&#39;s text plugin:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">{</span> <span class="nx">require</span><span class="o">:</span> <span class="s1">&#39;text!path/my-html-file.html&#39;</span> <span class="p">},</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>… or any of the other forms described here, though it would be unusual for the others to be useful when fetching templates via AMD.</p>

<h2>How WebRx loads components via AMD</h2>

<p>When you load a viewmodel or template via require declarations ...</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">{</span> <span class="nx">require</span><span class="o">:</span> <span class="s1">&#39;some/module/name&#39;</span> <span class="p">},</span>
    <span class="nx">template</span><span class="o">:</span> <span class="p">{</span> <span class="nx">require</span><span class="o">:</span> <span class="s1">&#39;text!some-template.html&#39;</span> <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>all WebRx does is call <code>require([&#39;some/module/name&#39;], callback)</code> and <code>require([&#39;text!some-template.html&#39;], callback)</code>, 
and uses the asynchronously-returned objects as the viewmodel and template definitions. So,</p>

<p>This does not take a strict dependency on require.js or any other particular module loader. Any module loader that provides an 
AMD-style require API will do. </p>

<p>WebRx does not interpret the module name in any way - it merely passes it through to <code>require()</code>. So of course WebRx does not 
know or care about where your module files are loaded from. That&#39;s up to your AMD loader and how you&#39;ve configured it.
WebRx doesn&#39;t know or care whether your AMD modules are anonymous or not. Typically we find it&#39;s most convenient for 
components to be defined as anonymous modules, but that concern is entirely separate from WebRx. AMD modules are loaded only on demand.</p>

<p>WebRx does not call <code>require([moduleName], ...)</code> until your component is being instantiated. This is how components get loaded on demand, not up front.</p>

<p>For example, if your component is inside some other element with an if binding (or another control flow binding), 
then it will not cause the AMD module to be loaded until the if condition is true. Of course, if the AMD module was 
already loaded (e.g., in a preloaded bundle) then the require call will not trigger any additional HTTP requests, 
so you can control what is preloaded and what is loaded on demand.</p>

<h2>Registering components as a single AMD module</h2>

<p>For even better encapsulation, you can package a component into a single self-describing AMD module. Then you can reference a component as simply as:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">wx</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;my-component&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">require</span><span class="o">:</span> <span class="s1">&#39;some/module&#39;</span> <span class="p">});</span>
</code></pre></div>
<p>Notice that no viewmodel/template pair is specified. The AMD module itself can provide a viewmodel/template pair, 
using any of the definition formats listed above. For example, the file <code>some/module.js</code> could be declared as:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// AMD module &#39;some/module.js&#39; encapsulating the configuration for a component</span>
<span class="nx">define</span><span class="p">([</span><span class="s1">&#39;webrx&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">wx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">MyComponentViewModel</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">personName</span> <span class="o">=</span> <span class="nx">wx</span><span class="p">.</span><span class="nx">property</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">viewModel</span><span class="o">:</span> <span class="nx">MyComponentViewModel</span><span class="p">,</span>
        <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;The name is &lt;strong data-bind=&quot;text: personName&quot;&gt;&lt;/strong&gt;&#39;</span>
    <span class="p">};</span>
<span class="p">});</span>
</code></pre></div>
<h2>A recommended AMD module pattern</h2>

<p>What tends to be most useful in practice is creating AMD modules that have inline viewmodel classes, 
and explicitly take AMD dependencies on external template files.</p>

<p>For example, if the following is in a file at <code>path/my-component.js</code>,</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Recommended AMD module pattern for a WebRx component that:</span>
<span class="c1">//  - Can be referenced with just a single &#39;require&#39; declaration</span>
<span class="c1">//  - Can be included in a bundle using the r.js optimizer</span>
<span class="nx">define</span><span class="p">([</span><span class="s1">&#39;webrx&#39;</span><span class="p">,</span> <span class="s1">&#39;text!./my-component.html&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">wx</span><span class="p">,</span> <span class="nx">htmlString</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">MyComponentViewModel</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Set up properties, etc.</span>
    <span class="p">}</span>

    <span class="c1">// Use prototype to declare any public methods</span>
    <span class="nx">MyComponentViewModel</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">doSomething</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">};</span>

    <span class="c1">// Return component definition</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">viewModel</span><span class="o">:</span> <span class="nx">MyComponentViewModel</span><span class="p">,</span> <span class="nx">template</span><span class="o">:</span> <span class="nx">htmlString</span> <span class="p">};</span>
<span class="p">});</span>
</code></pre></div>
<p>… and the template markup is in the file path/my-component.html, then you have these benefits:</p>

<p>Applications can reference this trivially, i.e., <code>wx.app.component(&#39;my-component&#39;, { require: &#39;path/my-component&#39; });</code></p>

<p>You only need two files for the component - a viewmodel (<code>path/my-component.js</code>) and a template (<code>path/my-component.html</code>) - 
which is a very natural arrangement during development. Since the dependency on the template is explicitly stated in the define call, 
this automatically works with the r.js optimizer or similar bundling tools. The entire component - viewmodel plus template - 
can therefore trivially be included in a bundle file during a build step.</p>

<p><a class="next-topic" href="/docs/component-binding.html#start">Next: The Component-Binding</a></p>
</div>
        </div>
    </div>
</div>


            <div id="footer" class="content-panel">
                <div class="row">
                  <div class="copyright col-md-4">
                    Copyright (c) 2015 WebRxJS.org
                  </div>

                  <div class="copyright col-md-4">
                  </div>

                  <div class="copyright col-md-4 text-right">
                    <a id="impressum" href="/impressum.html">Impressum</a>
                  </div>
                </div>
            </div>
        </div>

        <script type='text/javascript'>
        if(!wx.env.isSupported)
          wx.toggleCssClass(document.body, true, "wx-unsupported");
        </script>

        <script type='text/javascript' src='/bundles/18baa086413d7418c89e22074e8680b3.js'></script>


        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-60860613-1', 'auto');
          ga('send', 'pageview');
        </script>
    </body>
</html>
